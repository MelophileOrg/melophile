{"remainingRequest":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end\\src\\store\\actions.js","dependencies":[{"path":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end\\src\\store\\actions.js","mtime":1574320098245},{"path":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiQzpcXFVzZXJzXFxhbmRyZVxcRG9jdW1lbnRzXFxHaXRIdWJcXFNwb3RpZnktRmVhdHVyZXNcXGZyb250LWVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vIElOSUNJQUxJWkFUSU9OIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBOb25lCnZhciBpbmljaWFsaXplR2V0VG9rZW4gPSBmdW5jdGlvbiBpbmljaWFsaXplR2V0VG9rZW4oY29udGV4dCkgewogIHZhciBhdXRoRW5kcG9pbnQgPSAnaHR0cHM6Ly9hY2NvdW50cy5zcG90aWZ5LmNvbS9hdXRob3JpemUnOwogIHZhciBjbGllbnRJZCA9ICc0MjkwM2VlYjJiZjk0M2M0YmQ0OTAzMzcwZjdhOTNmNSc7CiAgdmFyIHJlZGlyZWN0VXJpID0gJ2h0dHA6Ly9teW11c2ljdGFzdGUub3JnL3JlZGlyZWN0Lyc7CiAgaWYgKGNvbnRleHQuc3RhdGUuZGV2KSByZWRpcmVjdFVyaSA9ICdodHRwOi8vbG9jYWxob3N0OjgwODAvcmVkaXJlY3QvJzsKICB2YXIgc2NvcGVzID0gWyd1c2VyLXJlYWQtcmVjZW50bHktcGxheWVkJywgJ3VzZXItdG9wLXJlYWQnLCAndXNlci1saWJyYXJ5LXJlYWQnLCAndXNlci1yZWFkLWVtYWlsJywgJ3BsYXlsaXN0LXJlYWQtcHJpdmF0ZSddOwoKICBpZiAoIWNvbnRleHQuc3RhdGUuYWNjZXNzX3Rva2VuKSB7CiAgICB3aW5kb3cubG9jYXRpb24gPSAiIi5jb25jYXQoYXV0aEVuZHBvaW50LCAiP2NsaWVudF9pZD0iKS5jb25jYXQoY2xpZW50SWQsICImcmVkaXJlY3RfdXJpPSIpLmNvbmNhdChyZWRpcmVjdFVyaSwgIiZzY29wZT0iKS5jb25jYXQoc2NvcGVzLmpvaW4oJyUyMCcpLCAiJnJlc3BvbnNlX3R5cGU9dG9rZW4mc2hvd19kaWFsb2c9dHJ1ZSIpOwogIH0KfTsgLy8gTm9uZQoKCnZhciBpbmljaWFsaXplUGFyc2VUb2tlbiA9IGZ1bmN0aW9uIGluaWNpYWxpemVQYXJzZVRva2VuKGNvbnRleHQpIHsKICB2YXIgdG9rZW4gPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSkuc3BsaXQoJyYnKS5yZWR1Y2UoZnVuY3Rpb24gKGluaXRpYWwsIGl0ZW0pIHsKICAgIGlmIChpdGVtKSB7CiAgICAgIHZhciBwYXJ0cyA9IGl0ZW0uc3BsaXQoJz0nKTsKICAgICAgaW5pdGlhbFtwYXJ0c1swXV0gPSBkZWNvZGVVUklDb21wb25lbnQocGFydHNbMV0pOwogICAgfQoKICAgIHJldHVybiBpbml0aWFsOwogIH0sIHt9KTsKICBjb250ZXh0LmRpc3BhdGNoKCdpbmljaWFsaXplU2V0VG9rZW4nLCB0b2tlbi5hY2Nlc3NfdG9rZW4pOwp9OyAvLyBUb2tlbgoKCnZhciBpbmljaWFsaXplU2V0VG9rZW4gPSBmdW5jdGlvbiBpbmljaWFsaXplU2V0VG9rZW4oY29udGV4dCwgdG9rZW4pIHsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGluaWNpYWxpemVTZXRUb2tlbiQoX2NvbnRleHQpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLnNldEFjY2Vzc1Rva2VuKHRva2VuKSk7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmNvbW1pdCgnc2V0SW5pY2lhbGl6ZWQnLCB0cnVlKSk7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2goJ2dldFVzZXInKTsKCiAgICAgICAgY2FzZSA1OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07IC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8gTE9BRCBMSUJSQVJZIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoKdmFyIGxvYWRMaWJyYXJ5ID0gZnVuY3Rpb24gbG9hZExpYnJhcnkoY29udGV4dCkgewogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gbG9hZExpYnJhcnkkKF9jb250ZXh0MikgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdyZXRyaWV2ZVNhdmVkVHJhY2tzJywgewogICAgICAgICAgICBsaW1pdDogNTAsCiAgICAgICAgICAgIG9mZnNldDogMAogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnYXZlcmFnZUF1ZGlvRmVhdHVyZVZhbHVlcycpOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ2F2ZXJhZ2VNb2RlJyk7CiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuZGlzcGF0Y2goJ3JldHJpZXZlVG9wQ2hhcnRzJykpOwoKICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0UHJvZ3Jlc3NUcmFja3MnKTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRQcm9ncmVzc0FydGlzdHMnKTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRQcm9ncmVzc0dlbnJlcycpOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFByb2dyZXNzQ2hhcnRzJyk7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0UHJvZ3Jlc3NUaW1lbGluZXMnKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGNvbnRleHQuc3RhdGUpOwoKICAgICAgICBjYXNlIDEyOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKdmFyIHJldHJpZXZlU2F2ZWRUcmFja3MgPSBmdW5jdGlvbiByZXRyaWV2ZVNhdmVkVHJhY2tzKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgdHJhY2tzLCBpZHMsIGF1ZGlvRmVhdHVyZXMsIGFydGlzdElkcywgaSwgajsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJldHJpZXZlU2F2ZWRUcmFja3MkKF9jb250ZXh0MykgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdnZXRTYXZlZFRyYWNrcycsIHsKICAgICAgICAgICAgbGltaXQ6IHBheWxvYWQubGltaXQsCiAgICAgICAgICAgIG9mZnNldDogcGF5bG9hZC5vZmZzZXQKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgdHJhY2tzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICBpZHMgPSB0cmFja3MubWFwKGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgICAgICByZXR1cm4gdHJhY2sudHJhY2suaWQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrcycsIGlkcykpOwoKICAgICAgICBjYXNlIDY6CiAgICAgICAgICBhdWRpb0ZlYXR1cmVzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICBhcnRpc3RJZHMgPSB7fTsKICAgICAgICAgIGkgPSAwOwoKICAgICAgICBjYXNlIDk6CiAgICAgICAgICBpZiAoIShpIDwgdHJhY2tzLmxlbmd0aCkpIHsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCEodHJhY2tzW2ldLnRyYWNrLmlkIGluIGNvbnRleHQuc3RhdGUudHJhY2tzKSkgewogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgiY29udGludWUiLCAyMik7CgogICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoKCd1cGRhdGVUaW1lbGluZXMnLCB7CiAgICAgICAgICAgIGRhdGU6IHRyYWNrc1tpXS5hZGRlZF9hdCwKICAgICAgICAgICAgZmVhdHVyZXM6IGF1ZGlvRmVhdHVyZXNbaV0KICAgICAgICAgIH0pOwogICAgICAgICAgX2NvbnRleHQzLnQwID0gY29udGV4dDsKICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTY7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuZGlzcGF0Y2goJ2NvbnZlcnRUcmFja09iamVjdCcsIHsKICAgICAgICAgICAgdHJhY2s6IHRyYWNrc1tpXS50cmFjaywKICAgICAgICAgICAgZGF0ZTogdHJhY2tzW2ldLmFkZGVkX2F0CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMTY6CiAgICAgICAgICBfY29udGV4dDMudDEgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICBfY29udGV4dDMudDAuY29tbWl0LmNhbGwoX2NvbnRleHQzLnQwLCAncHVzaFRyYWNrJywgX2NvbnRleHQzLnQxKTsKCiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoKCdwcm9jZXNzQXVkaW9GZWF0dXJlcycsIGF1ZGlvRmVhdHVyZXNbaV0pOwoKICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0cmFja3NbaV0udHJhY2suYXJ0aXN0cy5sZW5ndGg7IGorKykgewogICAgICAgICAgICBpZiAodHJhY2tzW2ldLnRyYWNrLmFydGlzdHNbal0uaWQgaW4gY29udGV4dC5zdGF0ZS5hcnRpc3RzKSB7CiAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ2FkZFRyYWNrVG9BcnRpc3QnLCB7CiAgICAgICAgICAgICAgICBpZDogdHJhY2tzW2ldLnRyYWNrLmFydGlzdHNbal0uaWQsCiAgICAgICAgICAgICAgICB0cmFjazogdHJhY2tzW2ldLnRyYWNrLmlkCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKCEodHJhY2tzW2ldLnRyYWNrLmFydGlzdHNbal0uaWQgaW4gYXJ0aXN0SWRzKSkgYXJ0aXN0SWRzW3RyYWNrc1tpXS50cmFjay5hcnRpc3RzW2pdLmlkXSA9IFt0cmFja3NbaV0udHJhY2suaWRdO2Vsc2UgYXJ0aXN0SWRzW3RyYWNrc1tpXS50cmFjay5hcnRpc3RzW2pdLmlkXS5wdXNoKHRyYWNrc1tpXS50cmFjay5pZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnYWRkUHJvY2Vzc2VkJyk7CiAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZXh0LnN0YXRlLnByb2dyZXNzLnByb2Nlc3NlZCk7CgogICAgICAgIGNhc2UgMjI6CiAgICAgICAgICBpKys7CiAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyNToKICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjc7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuZGlzcGF0Y2goJ3JldHJpZXZlU2F2ZWRBcnRpc3RzJywgYXJ0aXN0SWRzKSk7CgogICAgICAgIGNhc2UgMjc6CiAgICAgICAgICBpZiAoISh0cmFja3MubGVuZ3RoID09IHBheWxvYWQubGltaXQpKSB7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzA7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuZGlzcGF0Y2goJ3JldHJpZXZlU2F2ZWRUcmFja3MnLCB7CiAgICAgICAgICAgIGxpbWl0OiA1MCwKICAgICAgICAgICAgb2Zmc2V0OiBwYXlsb2FkLm9mZnNldCArIHBheWxvYWQubGltaXQKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzMDoKICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAzMToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCnZhciByZXRyaWV2ZVNhdmVkQXJ0aXN0cyA9IGZ1bmN0aW9uIHJldHJpZXZlU2F2ZWRBcnRpc3RzKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgaWRzLCB0cmFja3MsIGFydGlzdHMsIHNlY3Rpb25JZHMsIG5ld0FydGlzdHMsIGksIGFydGlzdE9iamVjdCwgajsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJldHJpZXZlU2F2ZWRBcnRpc3RzJChfY29udGV4dDQpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGlkcyA9IE9iamVjdC5rZXlzKHBheWxvYWQpOwogICAgICAgICAgdHJhY2tzID0gT2JqZWN0LnZhbHVlcyhwYXlsb2FkKTsKICAgICAgICAgIGFydGlzdHMgPSBbXTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgaWYgKCEoaWRzLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHNlY3Rpb25JZHMgPSBpZHMuc3BsaWNlKDAsIDUwKTsKICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnZ2V0QXJ0aXN0cycsIHNlY3Rpb25JZHMpKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgbmV3QXJ0aXN0cyA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgYXJ0aXN0cyA9IGFydGlzdHMuY29uY2F0KG5ld0FydGlzdHMpOwogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBpID0gMDsKCiAgICAgICAgY2FzZSAxMjoKICAgICAgICAgIGlmICghKGkgPCBhcnRpc3RzLmxlbmd0aCkpIHsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzNTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYXJ0aXN0c1tpXS50cmFja3MgPSB0cmFja3NbaV07CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE2OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdjb252ZXJ0QXJ0aXN0T2JqZWN0JywgYXJ0aXN0c1tpXSkpOwoKICAgICAgICBjYXNlIDE2OgogICAgICAgICAgYXJ0aXN0T2JqZWN0ID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgncHVzaEFydGlzdCcsIGFydGlzdE9iamVjdCk7CiAgICAgICAgICBqID0gMDsKCiAgICAgICAgY2FzZSAxOToKICAgICAgICAgIGlmICghKGogPCBhcnRpc3RzW2ldLmdlbnJlcy5sZW5ndGgpKSB7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghKGFydGlzdHNbaV0uZ2VucmVzW2pdIGluIGNvbnRleHQuc3RhdGUuZ2VucmVzKSkgewogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWNvbnRleHQuc3RhdGUuZ2VucmVzW2FydGlzdHNbaV0uZ2VucmVzW2pdXS5hcnRpc3RzLmluY2x1ZGVzKGFydGlzdHNbaV0uaWQpKSBjb250ZXh0LmNvbW1pdCgnYWRkQXJ0aXN0VG9HZW5yZScsIHsKICAgICAgICAgICAgaWQ6IGFydGlzdHNbaV0uZ2VucmVzW2pdLAogICAgICAgICAgICBhcnRpc3Q6IGFydGlzdHNbaV0uaWQKICAgICAgICAgIH0pOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ2FkZEdlbnJlVHJhY2tOdW0nLCB7CiAgICAgICAgICAgIGtleTogYXJ0aXN0c1tpXS5nZW5yZXNbal0sCiAgICAgICAgICAgIHZhbHVlOiB0cmFja3NbaV0ubGVuZ3RoCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJjb250aW51ZSIsIDI5KTsKCiAgICAgICAgY2FzZSAyNDoKICAgICAgICAgIF9jb250ZXh0NC50MCA9IGNvbnRleHQ7CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI3OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdnZW5lcmF0ZUdlbnJlJywgewogICAgICAgICAgICBuYW1lOiBhcnRpc3RzW2ldLmdlbnJlc1tqXSwKICAgICAgICAgICAgYXJ0aXN0czogW2FydGlzdHNbaV0uaWRdCiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMjc6CiAgICAgICAgICBfY29udGV4dDQudDEgPSBfY29udGV4dDQuc2VudDsKCiAgICAgICAgICBfY29udGV4dDQudDAuY29tbWl0LmNhbGwoX2NvbnRleHQ0LnQwLCAncHVzaEdlbnJlJywgX2NvbnRleHQ0LnQxKTsKCiAgICAgICAgY2FzZSAyOToKICAgICAgICAgIGorKzsKICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzMjoKICAgICAgICAgIGkrKzsKICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTI7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzNToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCnZhciB1cGRhdGVUaW1lbGluZXMgPSBmdW5jdGlvbiB1cGRhdGVUaW1lbGluZXMoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciBub3csIGRhdGUsIG1vbnRocywga2V5cywgaTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHVwZGF0ZVRpbWVsaW5lcyQoX2NvbnRleHQ1KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHBheWxvYWQuZGF0ZSk7CiAgICAgICAgICBtb250aHMgPSAobm93LmdldEZ1bGxZZWFyKCkgLSBkYXRlLmdldEZ1bGxZZWFyKCkpICogMTI7CiAgICAgICAgICBtb250aHMgKz0gbm93LmdldE1vbnRoKCk7CiAgICAgICAgICBtb250aHMgLT0gZGF0ZS5nZXRNb250aCgpOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ2FkZERhdGVBZGRlZFRpbWVsaW5lJywgbW9udGhzKTsKICAgICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXMpOwoKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRBdWRpb0ZlYXR1cmVUaW1lbGluZScsIHsKICAgICAgICAgICAgICBrZXk6IGtleXNbaV0sCiAgICAgICAgICAgICAgbW9udGg6IG1vbnRocywKICAgICAgICAgICAgICB2YWx1ZTogcGF5bG9hZC5mZWF0dXJlc1trZXlzW2ldXQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgY2FzZSA4OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKdmFyIHByb2Nlc3NBdWRpb0ZlYXR1cmVzID0gZnVuY3Rpb24gcHJvY2Vzc0F1ZGlvRmVhdHVyZXMoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciBrZXlzLCBpLCBpbmRleDsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHByb2Nlc3NBdWRpb0ZlYXR1cmVzJChfY29udGV4dDYpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXMpOwogICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdiYW5nZXJDYWxjJywgewogICAgICAgICAgICB0ZW1wbzogcGF5bG9hZC50ZW1wbywKICAgICAgICAgICAgZW5lcmd5OiBwYXlsb2FkLmVuZXJneSwKICAgICAgICAgICAgZGFuY2VhYmlsaXR5OiBwYXlsb2FkLmRhbmNlYWJpbGl0eQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBwYXlsb2FkLmJhbmdlciA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgaSA9IDA7CgogICAgICAgIGNhc2UgNToKICAgICAgICAgIGlmICghKGkgPCBrZXlzLmxlbmd0aCkpIHsKICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyMzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgaW5kZXggPSBjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXNba2V5c1tpXV0ubWluY2hhcnQubGVuZ3RoIC0gMTsKICAgICAgICAgIGlmIChpbmRleCA8IDApIGluZGV4ID0gMDsKCiAgICAgICAgICBpZiAoIShjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXNba2V5c1tpXV0ubWluY2hhcnQubGVuZ3RoIDwgMjUgfHwgcGF5bG9hZFtrZXlzW2ldXSA8IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlc1trZXlzW2ldXS5taW5jaGFydFtpbmRleF0udmFsdWUpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHdoaWxlIChpbmRleCA+IDAgJiYgcGF5bG9hZFtrZXlzW2ldXSA8IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlc1trZXlzW2ldXS5taW5jaGFydFtpbmRleF0udmFsdWUpIHsKICAgICAgICAgICAgaW5kZXggLT0gMTsKICAgICAgICAgIH0KCiAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEyOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmNvbW1pdCgnc3BsaWNlQXVkaW9GZWF0dXJlRXh0cmVtZXMnLCB7CiAgICAgICAgICAgIGtleToga2V5c1tpXSwKICAgICAgICAgICAgY2hhcnQ6ICdtaW5jaGFydCcsCiAgICAgICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICBpZDogcGF5bG9hZC5pZCwKICAgICAgICAgICAgICB2YWx1ZTogcGF5bG9hZFtrZXlzW2ldXQogICAgICAgICAgICB9CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBpbmRleCA9IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlc1trZXlzW2ldXS5tYXhjaGFydC5sZW5ndGggLSAxOwogICAgICAgICAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSAwOwoKICAgICAgICAgIGlmICghKGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlc1trZXlzW2ldXS5tYXhjaGFydC5sZW5ndGggPCAyNSB8fCBwYXlsb2FkW2tleXNbaV1dID4gY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzW2tleXNbaV1dLm1heGNoYXJ0W2luZGV4XS52YWx1ZSkpIHsKICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxODsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgd2hpbGUgKGluZGV4ID4gMCAmJiBwYXlsb2FkW2tleXNbaV1dID4gY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzW2tleXNbaV1dLm1heGNoYXJ0W2luZGV4XS52YWx1ZSkgewogICAgICAgICAgICBpbmRleCAtPSAxOwogICAgICAgICAgfQoKICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTg7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuY29tbWl0KCdzcGxpY2VBdWRpb0ZlYXR1cmVFeHRyZW1lcycsIHsKICAgICAgICAgICAga2V5OiBrZXlzW2ldLAogICAgICAgICAgICBjaGFydDogJ21heGNoYXJ0JywKICAgICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgICB2YWx1ZTogewogICAgICAgICAgICAgIGlkOiBwYXlsb2FkLmlkLAogICAgICAgICAgICAgIHZhbHVlOiBwYXlsb2FkW2tleXNbaV1dCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAxODoKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRBdWRpb0ZlYXR1cmVWYWx1ZScsIHsKICAgICAgICAgICAga2V5OiBrZXlzW2ldLAogICAgICAgICAgICB2YWx1ZTogcGF5bG9hZFtrZXlzW2ldXQogICAgICAgICAgfSk7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgncGxvdEF1ZGlvRmVhdHVyZVZhbHVlJywgewogICAgICAgICAgICBrZXk6IGtleXNbaV0sCiAgICAgICAgICAgIHZhbHVlOiBwYXlsb2FkW2tleXNbaV1dCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSAyMDoKICAgICAgICAgIGkrKzsKICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDIzOgogICAgICAgICAgY29udGV4dC5jb21taXQoJ2FkZE1vZGUnLCBwYXlsb2FkLm1vZGUpOwoKICAgICAgICBjYXNlIDI0OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKdmFyIHJldHJpZXZlVG9wQ2hhcnRzID0gZnVuY3Rpb24gcmV0cmlldmVUb3BDaGFydHMoY29udGV4dCkgewogIHZhciBnZW5yZVR1cGxlcywgdG9wR2VucmVzLCB0b3BHZW5yZUlkcywgYXJ0aXN0VHVwbGVzLCB0b3BBcnRpc3RzLCB0b3BBcnRpc3RJZHMsIHRlcm1zLCB0b3BQbGF5ZWQsIGksIHRvcFRyYWNrcywgaiwgX3RvcEFydGlzdHMsIF9qOwoKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHJldHJpZXZlVG9wQ2hhcnRzJChfY29udGV4dDcpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGdlbnJlVHVwbGVzID0gT2JqZWN0LmVudHJpZXMoY29udGV4dC5zdGF0ZS5nZW5yZXMpOwogICAgICAgICAgdG9wR2VucmVzID0gZ2VucmVUdXBsZXMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICBpZiAoISgidHJhY2tOdW0iIGluIGFbMV0pICYmICEoInRyYWNrTnVtIiBpbiBiWzFdKSkgcmV0dXJuIDA7CiAgICAgICAgICAgIGlmICghKCJ0cmFja051bSIgaW4gYlsxXSkpIHJldHVybiAwIC0gYVsxXS50cmFja051bTsKICAgICAgICAgICAgaWYgKCEoInRyYWNrTnVtIiBpbiBhWzFdKSkgcmV0dXJuIGJbMV0udHJhY2tOdW07CiAgICAgICAgICAgIHJldHVybiBiWzFdLnRyYWNrTnVtIC0gYVsxXS50cmFja051bTsKICAgICAgICAgIH0pLnNsaWNlKDAsIDUwKTsKICAgICAgICAgIHRvcEdlbnJlSWRzID0gdG9wR2VucmVzLm1hcChmdW5jdGlvbiAoZ2VucmUpIHsKICAgICAgICAgICAgcmV0dXJuIGdlbnJlWzBdOwogICAgICAgICAgfSk7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG9wU2F2ZWRHZW5yZXMnLCB0b3BHZW5yZUlkcyk7CiAgICAgICAgICBhcnRpc3RUdXBsZXMgPSBPYmplY3QuZW50cmllcyhjb250ZXh0LnN0YXRlLmFydGlzdHMpOwogICAgICAgICAgdG9wQXJ0aXN0cyA9IGFydGlzdFR1cGxlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgIGlmICghKCJ0cmFja3MiIGluIGFbMV0pICYmICEoInRyYWNrcyIgaW4gYlsxXSkpIHJldHVybiAwOwogICAgICAgICAgICBpZiAoISgidHJhY2tzIiBpbiBiWzFdKSkgcmV0dXJuIDAgLSBhWzFdLnRyYWNrcy5sZW5ndGg7CiAgICAgICAgICAgIGlmICghKCJ0cmFja3MiIGluIGFbMV0pKSByZXR1cm4gYlsxXS50cmFja3MubGVuZ3RoOwogICAgICAgICAgICByZXR1cm4gYlsxXS50cmFja3MubGVuZ3RoIC0gYVsxXS50cmFja3MubGVuZ3RoOwogICAgICAgICAgfSkuc2xpY2UoMCwgNTApOwogICAgICAgICAgdG9wQXJ0aXN0SWRzID0gdG9wQXJ0aXN0cy5tYXAoZnVuY3Rpb24gKGFydGlzdCkgewogICAgICAgICAgICByZXR1cm4gYXJ0aXN0WzBdOwogICAgICAgICAgfSk7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG9wU2F2ZWRBcnRpc3RzJywgdG9wQXJ0aXN0SWRzKTsKICAgICAgICAgIHRlcm1zID0gWydzaG9ydF90ZXJtJywgJ21lZGl1bV90ZXJtJywgJ2xvbmdfdGVybSddOwogICAgICAgICAgdG9wUGxheWVkID0gewogICAgICAgICAgICB0cmFja3M6IFtbXSwgW10sIFtdXSwKICAgICAgICAgICAgYXJ0aXN0czogW1tdLCBbXSwgW11dCiAgICAgICAgICB9OwogICAgICAgICAgaSA9IDA7CgogICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBpZiAoIShpIDwgdGVybXMubGVuZ3RoKSkgewogICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQ5OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE0OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdnZXRUb3BUcmFja3MnLCB7CiAgICAgICAgICAgIGxpbWl0OiA1MCwKICAgICAgICAgICAgdGltZV9yYW5nZTogdGVybXNbaV0KICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAxNDoKICAgICAgICAgIHRvcFRyYWNrcyA9IF9jb250ZXh0Ny5zZW50OwogICAgICAgICAgaiA9IDA7CgogICAgICAgIGNhc2UgMTY6CiAgICAgICAgICBpZiAoIShqIDwgdG9wVHJhY2tzLmxlbmd0aCkpIHsKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyOTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCEodG9wVHJhY2tzW2pdLmlkIGluIGNvbnRleHQuc3RhdGUudHJhY2tzKSkgewogICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDIxOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICB0b3BQbGF5ZWQudHJhY2tzW2ldLnB1c2godG9wVHJhY2tzW2pdLmlkKTsKICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjY7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyMToKICAgICAgICAgIF9jb250ZXh0Ny50MCA9IHRvcFBsYXllZC50cmFja3NbaV07CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI0OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdjb252ZXJ0VHJhY2tPYmplY3QnLCB7CiAgICAgICAgICAgIHRyYWNrOiB0b3BUcmFja3Nbal0KICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAyNDoKICAgICAgICAgIF9jb250ZXh0Ny50MSA9IF9jb250ZXh0Ny5zZW50OwoKICAgICAgICAgIF9jb250ZXh0Ny50MC5wdXNoLmNhbGwoX2NvbnRleHQ3LnQwLCBfY29udGV4dDcudDEpOwoKICAgICAgICBjYXNlIDI2OgogICAgICAgICAgaisrOwogICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxNjsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI5OgogICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzMTsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnZ2V0VG9wQXJ0aXN0cycsIHsKICAgICAgICAgICAgbGltaXQ6IDUwLAogICAgICAgICAgICB0aW1lX3JhbmdlOiB0ZXJtc1tpXQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDMxOgogICAgICAgICAgX3RvcEFydGlzdHMgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgIF9qID0gMDsKCiAgICAgICAgY2FzZSAzMzoKICAgICAgICAgIGlmICghKF9qIDwgX3RvcEFydGlzdHMubGVuZ3RoKSkgewogICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQ2OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIShfdG9wQXJ0aXN0c1tfal0uaWQgaW4gY29udGV4dC5zdGF0ZS5hcnRpc3RzKSkgewogICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDM4OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICB0b3BQbGF5ZWQuYXJ0aXN0c1tpXS5wdXNoKF90b3BBcnRpc3RzW19qXS5pZCk7CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQzOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzg6CiAgICAgICAgICBfY29udGV4dDcudDIgPSB0b3BQbGF5ZWQuYXJ0aXN0c1tpXTsKICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNDE7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuZGlzcGF0Y2goJ2NvbnZlcnRBcnRpc3RPYmplY3QnLCBfdG9wQXJ0aXN0c1tfal0pKTsKCiAgICAgICAgY2FzZSA0MToKICAgICAgICAgIF9jb250ZXh0Ny50MyA9IF9jb250ZXh0Ny5zZW50OwoKICAgICAgICAgIF9jb250ZXh0Ny50Mi5wdXNoLmNhbGwoX2NvbnRleHQ3LnQyLCBfY29udGV4dDcudDMpOwoKICAgICAgICBjYXNlIDQzOgogICAgICAgICAgX2orKzsKICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzM7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0NjoKICAgICAgICAgIGkrKzsKICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTE7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA0OToKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRUb3BQbGF5ZWRUcmFja3MnLCB0b3BQbGF5ZWQudHJhY2tzKTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRUb3BQbGF5ZWRBcnRpc3RzJywgdG9wUGxheWVkLmFydGlzdHMpOwoKICAgICAgICBjYXNlIDUxOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OwovKg0Kew0KICAgIGlkOiBTdHJpbmcsIA0KICAgIG5hbWU6IFN0cmluZywNCiAgICBpbWFnZTogU3RyaW5nLA0KICAgIGFydGlzdHM6IEFycmF5LA0KfQ0KKi8KCgp2YXIgY29udmVydFRyYWNrT2JqZWN0ID0gZnVuY3Rpb24gY29udmVydFRyYWNrT2JqZWN0KGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgdHJhY2tPYmplY3Q7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjb252ZXJ0VHJhY2tPYmplY3QkKF9jb250ZXh0OCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgdHJhY2tPYmplY3QgPSB7fTsKICAgICAgICAgIHRyYWNrT2JqZWN0LmlkID0gcGF5bG9hZC50cmFjay5pZDsKICAgICAgICAgIHRyYWNrT2JqZWN0Lm5hbWUgPSBwYXlsb2FkLnRyYWNrLm5hbWU7CiAgICAgICAgICBpZiAoJ2FsYnVtJyBpbiBwYXlsb2FkLnRyYWNrKSBpZiAoJ2ltYWdlcycgaW4gcGF5bG9hZC50cmFjay5hbGJ1bSkgaWYgKHBheWxvYWQudHJhY2suYWxidW0uaW1hZ2VzLmxlbmd0aCA+IDApIHRyYWNrT2JqZWN0LmltYWdlID0gcGF5bG9hZC50cmFjay5hbGJ1bS5pbWFnZXNbMF0udXJsOwogICAgICAgICAgaWYgKF90eXBlb2YocGF5bG9hZC50cmFjay5hcnRpc3RzWzBdKSA9PSAnb2JqZWN0JykgdHJhY2tPYmplY3QuYXJ0aXN0cyA9IHBheWxvYWQudHJhY2suYXJ0aXN0cy5tYXAoZnVuY3Rpb24gKGFydGlzdCkgewogICAgICAgICAgICByZXR1cm4gYXJ0aXN0LmlkOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoJ2RhdGUnIGluIHBheWxvYWQpIHRyYWNrT2JqZWN0LmRhdGUgPSBwYXlsb2FkLmRhdGU7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgdHJhY2tPYmplY3QpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07Cgp2YXIgY29udmVydEFydGlzdE9iamVjdCA9IGZ1bmN0aW9uIGNvbnZlcnRBcnRpc3RPYmplY3QoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciBhcnRpc3RPYmplY3Q7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjb252ZXJ0QXJ0aXN0T2JqZWN0JChfY29udGV4dDkpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGFydGlzdE9iamVjdCA9IHt9OwogICAgICAgICAgYXJ0aXN0T2JqZWN0LmlkID0gcGF5bG9hZC5pZDsKICAgICAgICAgIGFydGlzdE9iamVjdC5uYW1lID0gcGF5bG9hZC5uYW1lOwogICAgICAgICAgaWYgKCdpbWFnZXMnIGluIHBheWxvYWQpIGlmIChwYXlsb2FkLmltYWdlcy5sZW5ndGggPiAwKSBhcnRpc3RPYmplY3QuaW1hZ2UgPSBwYXlsb2FkLmltYWdlc1swXS51cmw7CiAgICAgICAgICBpZiAoJ2dlbnJlcycgaW4gcGF5bG9hZCkgYXJ0aXN0T2JqZWN0LmdlbnJlcyA9IHBheWxvYWQuZ2VucmVzOwogICAgICAgICAgaWYgKCd0cmFja3MnIGluIHBheWxvYWQpIGFydGlzdE9iamVjdC50cmFja3MgPSBwYXlsb2FkLnRyYWNrczsKICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBhcnRpc3RPYmplY3QpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07Cgp2YXIgZ2VuZXJhdGVHZW5yZSA9IGZ1bmN0aW9uIGdlbmVyYXRlR2VucmUoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciBnZW5yZU9iamVjdDsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdlbmVyYXRlR2VucmUkKF9jb250ZXh0MTApIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgZ2VucmVPYmplY3QgPSB7fTsKICAgICAgICAgIGdlbnJlT2JqZWN0Lm5hbWUgPSBwYXlsb2FkLm5hbWU7CiAgICAgICAgICBnZW5yZU9iamVjdC5hcnRpc3RzID0gcGF5bG9hZC5hcnRpc3RzOwogICAgICAgICAgZ2VucmVPYmplY3QudHJhY2tOdW0gPSAxOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBnZW5yZU9iamVjdCk7CgogICAgICAgIGNhc2UgNToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07Cgp2YXIgYmFuZ2VyQ2FsYyA9IGZ1bmN0aW9uIGJhbmdlckNhbGMoY29udGV4dCwgcGF5bG9hZCkgewogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gYmFuZ2VyQ2FsYyQoX2NvbnRleHQxMSkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIsIChwYXlsb2FkLnRlbXBvIC0gOTYgKyBwYXlsb2FkLmVuZXJneSAqIDEwMCArIHBheWxvYWQuZGFuY2VhYmlsaXR5ICogNTApIC8gMjEwKTsKCiAgICAgICAgY2FzZSAxOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBBUEkgQ0FMTFMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8gU3RyaW5nCgoKdmFyIGdldFRyYWNrID0gZnVuY3Rpb24gZ2V0VHJhY2soY29udGV4dCwgdHJhY2tfaWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRUcmFjayQoX2NvbnRleHQxMikgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDEyLnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldFRyYWNrKHRyYWNrX2lkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxMi5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MTIucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDEyLnQwID0gX2NvbnRleHQxMlsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8gQXJyYXkgb2YgU3RyaW5ncwoKCnZhciBnZXRUcmFja3MgPSBmdW5jdGlvbiBnZXRUcmFja3MoY29udGV4dCwgdHJhY2tfaWRzKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0VHJhY2tzJChfY29udGV4dDEzKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0VHJhY2tzKHRyYWNrX2lkcykpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTMuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQxMy50MCA9IF9jb250ZXh0MTNbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIFN0cmluZwoKCnZhciBnZXRBcnRpc3QgPSBmdW5jdGlvbiBnZXRBcnRpc3QoY29udGV4dCwgaWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRBcnRpc3QkKF9jb250ZXh0MTQpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQxNC5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRBcnRpc3QoaWQpKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDE0LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQxNC5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MTQudDAgPSBfY29udGV4dDE0WyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyBTdHJpbmcKCgp2YXIgZ2V0QWxidW0gPSBmdW5jdGlvbiBnZXRBbGJ1bShjb250ZXh0LCBpZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEFsYnVtJChfY29udGV4dDE1KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTUucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QWxidW0oaWQpKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDE1LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQxNS5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MTUudDAgPSBfY29udGV4dDE1WyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyBBcnJheSBvZiBTdHJpbmdzCgoKdmFyIGdldEFydGlzdHMgPSBmdW5jdGlvbiBnZXRBcnRpc3RzKGNvbnRleHQsIGlkcykgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEFydGlzdHMkKF9jb250ZXh0MTYpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxNi5wcmV2ID0gX2NvbnRleHQxNi5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQxNi5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRBcnRpc3RzKGlkcykpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTYuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuYXJ0aXN0cyk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MTYucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDE2LnQwID0gX2NvbnRleHQxNlsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8KCgp2YXIgZ2V0QXJ0aXN0UmVsYXRlZEFydGlzdHMgPSBmdW5jdGlvbiBnZXRBcnRpc3RSZWxhdGVkQXJ0aXN0cyhjb250ZXh0LCBpZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEFydGlzdFJlbGF0ZWRBcnRpc3RzJChfY29udGV4dDE3KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTcucHJldiA9IF9jb250ZXh0MTcubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTcucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXJ0aXN0UmVsYXRlZEFydGlzdHMoaWQpKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDE3LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmFydGlzdHMpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDE3LnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQxNy50MCA9IF9jb250ZXh0MTdbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIHtsaW1pdDogTnVtYmVyLCBvZmZzZXQ6IDB9CgoKdmFyIGdldFBsYXlsaXN0cyA9IGZ1bmN0aW9uIGdldFBsYXlsaXN0cyhjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0UGxheWxpc3RzJChfY29udGV4dDE4KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTgucHJldiA9IF9jb250ZXh0MTgubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTgucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0VXNlclBsYXlsaXN0cyhjb250ZXh0LnN0YXRlLnVzZXIuaWQsIHBheWxvYWQpKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDE4LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLml0ZW1zKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQxOC5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MTgudDAgPSBfY29udGV4dDE4WyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyBTdHJpbmcKCgp2YXIgZ2V0UGxheWxpc3QgPSBmdW5jdGlvbiBnZXRQbGF5bGlzdChjb250ZXh0LCBwbGF5bGlzdElkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0UGxheWxpc3QkKF9jb250ZXh0MTkpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxOS5wcmV2ID0gX2NvbnRleHQxOS5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQxOS5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MTkubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRQbGF5bGlzdChwbGF5bGlzdElkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxOS5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTkuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MTkucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDE5LnQwID0gX2NvbnRleHQxOVsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8ge2xpbWl0OiBOdW1iZXIgMS01MCwgdGltZV9yYW5nZTogImxvbmdfdGVybSIgU2V2ZXJhbCB5ZWFycywgIm1lZGl1bV90ZXJtIiA2IE1vbnRocywgInNob3J0X3Rlcm0iIDQgV2Vla3MsIG9mZnNldDogSW5kZXggb2YgZmlyc3QgZW50cnkgdG8gcmV0dXJufQoKCnZhciBnZXRUb3BUcmFja3MgPSBmdW5jdGlvbiBnZXRUb3BUcmFja3MoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldFRvcFRyYWNrcyQoX2NvbnRleHQyMCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDIwLnByZXYgPSBfY29udGV4dDIwLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDIwLnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQyMC5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldE15VG9wVHJhY2tzKHsKICAgICAgICAgICAgbGltaXQ6IHBheWxvYWQubGltaXQsCiAgICAgICAgICAgIHRpbWVfcmFuZ2U6IHBheWxvYWQudGltZV9yYW5nZQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MjAuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIwLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuaXRlbXMpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDIwLnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQyMC50MCA9IF9jb250ZXh0MjBbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIHtsaW1pdDogTnVtYmVyIDEtNTAsIHRpbWVfcmFuZ2U6ICJsb25nX3Rlcm0iIFNldmVyYWwgeWVhcnMsICJtZWRpdW1fdGVybSIgNiBNb250aHMsICJzaG9ydF90ZXJtIiA0IFdlZWtzLCBvZmZzZXQ6IEluZGV4IG9mIGZpcnN0IGVudHJ5IHRvIHJldHVybn0KCgp2YXIgZ2V0VG9wQXJ0aXN0cyA9IGZ1bmN0aW9uIGdldFRvcEFydGlzdHMoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldFRvcEFydGlzdHMkKF9jb250ZXh0MjEpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyMS5wcmV2ID0gX2NvbnRleHQyMS5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyMS5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjEubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRNeVRvcEFydGlzdHMoewogICAgICAgICAgICBsaW1pdDogcGF5bG9hZC5saW1pdCwKICAgICAgICAgICAgdGltZV9yYW5nZTogcGF5bG9hZC50aW1lX3JhbmdlCiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyMS5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjEuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5pdGVtcyk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MjEucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDIxLnQwID0gX2NvbnRleHQyMVsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8ge2xpbWl0OiBOdW1iZXIgMS01MCwgYWZ0ZXI6IFVuaXggdGltZXN0YW1wIE1pbGxpc2Vjb25kcywgYmVmb3JlOiBVbml4IHRpbWVzdGFtcCBNaWxsaXNlY29uZHMKCgp2YXIgZ2V0UmVjZW50bHlQbGF5ZWQgPSBmdW5jdGlvbiBnZXRSZWNlbnRseVBsYXllZChjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0UmVjZW50bHlQbGF5ZWQkKF9jb250ZXh0MjIpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyMi5wcmV2ID0gX2NvbnRleHQyMi5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyMi5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjIubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRNeVJlY2VudGx5UGxheWVkVHJhY2tzKHsKICAgICAgICAgICAgbGltaXQ6IHBheWxvYWQubGltaXQKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIyLnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQyMi5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MjIudDAgPSBfY29udGV4dDIyWyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyBBcnJheSBvZiBTdHJpbmdzCgoKdmFyIGdldEF1ZGlvRmVhdHVyZXNGb3JUcmFja3MgPSBmdW5jdGlvbiBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzKGNvbnRleHQsIHRyYWNrX2lkcykgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEF1ZGlvRmVhdHVyZXNGb3JUcmFja3MkKF9jb250ZXh0MjMpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyMy5wcmV2ID0gX2NvbnRleHQyMy5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyMy5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjMubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzKHRyYWNrX2lkcykpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MjMuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIzLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuYXVkaW9fZmVhdHVyZXMpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDIzLnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQyMy50MCA9IF9jb250ZXh0MjNbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIFN0cmluZwoKCnZhciBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2sgPSBmdW5jdGlvbiBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2soY29udGV4dCwgdHJhY2tfaWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2skKF9jb250ZXh0MjQpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyNC5wcmV2ID0gX2NvbnRleHQyNC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyNC5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjQubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzKFt0cmFja19pZF0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDI0LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmF1ZGlvX2ZlYXR1cmVzWzBdKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQyNC5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MjQudDAgPSBfY29udGV4dDI0WyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyBTdHJpbmcKCgp2YXIgZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrID0gZnVuY3Rpb24gZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrKGNvbnRleHQsIHRyYWNrX2lkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrJChfY29udGV4dDI1KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MjUucHJldiA9IF9jb250ZXh0MjUubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MjUucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDI1Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrKHRyYWNrX2lkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyNS5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjUuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MjUucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDI1LnQwID0gX2NvbnRleHQyNVsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDI1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDI1LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8ge3NlZWRfdHJhY2tzOiBbdHJhY2tfaWRdLCB0YXJnZXRfZGFuY2ViaWxpdHk6IE5VTSwgbGltaXQ6IDYsIG1heF8qIG1pbl8qfQoKCnZhciBnZXRSZWNvbWVuZGF0aW9ucyA9IGZ1bmN0aW9uIGdldFJlY29tZW5kYXRpb25zKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRSZWNvbWVuZGF0aW9ucyQoX2NvbnRleHQyNikgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDI2LnByZXYgPSBfY29udGV4dDI2Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDI2LnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQyNi5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldFJlY29tbWVuZGF0aW9ucyhwYXlsb2FkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyNi5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjYuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MjYucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDI2LnQwID0gX2NvbnRleHQyNlsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDI2LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDI2LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8ge2xpbWl0OiAxLTUwLCBvZmZzZXQ6IGZpcnN0IGluZGV4fQoKCnZhciBnZXRTYXZlZFRyYWNrcyA9IGZ1bmN0aW9uIGdldFNhdmVkVHJhY2tzKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRTYXZlZFRyYWNrcyQoX2NvbnRleHQyNykgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDI3LnByZXYgPSBfY29udGV4dDI3Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDI3LnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQyNy5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldE15U2F2ZWRUcmFja3MoewogICAgICAgICAgICBsaW1pdDogcGF5bG9hZC5saW1pdCwKICAgICAgICAgICAgb2Zmc2V0OiBwYXlsb2FkLm9mZnNldAogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mjcuc2VudDsKCiAgICAgICAgICBpZiAocGF5bG9hZC5vZmZzZXQgPT0gMCkgewogICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG90YWwnLCByZXNwb25zZS50b3RhbCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjcuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5pdGVtcyk7CgogICAgICAgIGNhc2UgODoKICAgICAgICAgIF9jb250ZXh0MjcucHJldiA9IDg7CiAgICAgICAgICBfY29udGV4dDI3LnQwID0gX2NvbnRleHQyN1siY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDI3LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTE6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDI3LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgOF1dKTsKfTsgLy8gTm9uZQoKCnZhciBnZXRVc2VyID0gZnVuY3Rpb24gZ2V0VXNlcihjb250ZXh0KSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0VXNlciQoX2NvbnRleHQyOCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDI4LnByZXYgPSBfY29udGV4dDI4Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDI4LnByZXYgPSAwOwoKICAgICAgICAgIGlmICghY29udGV4dC5zdGF0ZS5pbmljaWFsaXplZCkgewogICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSA3OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSA0OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0TWUoKSk7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyOC5zZW50OwogICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gNzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5jb21taXQoJ3NldFVzZXJEYXRhJywgcmVzcG9uc2UpKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gMTI7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA5OgogICAgICAgICAgX2NvbnRleHQyOC5wcmV2ID0gOTsKICAgICAgICAgIF9jb250ZXh0MjgudDAgPSBfY29udGV4dDI4WyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMjoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mjguc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA5XV0pOwp9OyAvLyBBcnJheSBJRHMKCgp2YXIgc2VhcmNoU3BvdGlmeSA9IGZ1bmN0aW9uIHNlYXJjaFNwb3RpZnkoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHNlYXJjaFNwb3RpZnkkKF9jb250ZXh0MjkpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyOS5wcmV2ID0gX2NvbnRleHQyOS5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyOS5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5zZWFyY2gocGF5bG9hZC5xdWVyeSwgWyd0cmFjayddLCB7CiAgICAgICAgICAgIGxpbWl0OiAyNQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mjkuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDI5LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDI5LnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQyOS50MCA9IF9jb250ZXh0MjlbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOS5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07Cgp2YXIgZ2V0QXJ0aXN0VG9wVHJhY2tzID0gZnVuY3Rpb24gZ2V0QXJ0aXN0VG9wVHJhY2tzKGNvbnRleHQsIGlkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0QXJ0aXN0VG9wVHJhY2tzJChfY29udGV4dDMwKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MzAucHJldiA9IF9jb250ZXh0MzAubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MzAucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDMwLm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXJ0aXN0VG9wVHJhY2tzKGlkLCAiVVMiLCB7fSkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MzAuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UudHJhY2tzKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQzMC5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MzAudDAgPSBfY29udGV4dDMwWyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzAuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzAuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OwoKZXhwb3J0IGRlZmF1bHQgewogIGluaWNpYWxpemVHZXRUb2tlbjogaW5pY2lhbGl6ZUdldFRva2VuLAogIGluaWNpYWxpemVQYXJzZVRva2VuOiBpbmljaWFsaXplUGFyc2VUb2tlbiwKICBpbmljaWFsaXplU2V0VG9rZW46IGluaWNpYWxpemVTZXRUb2tlbiwKICBsb2FkTGlicmFyeTogbG9hZExpYnJhcnksCiAgcmV0cmlldmVTYXZlZFRyYWNrczogcmV0cmlldmVTYXZlZFRyYWNrcywKICByZXRyaWV2ZVNhdmVkQXJ0aXN0czogcmV0cmlldmVTYXZlZEFydGlzdHMsCiAgdXBkYXRlVGltZWxpbmVzOiB1cGRhdGVUaW1lbGluZXMsCiAgcHJvY2Vzc0F1ZGlvRmVhdHVyZXM6IHByb2Nlc3NBdWRpb0ZlYXR1cmVzLAogIHJldHJpZXZlVG9wQ2hhcnRzOiByZXRyaWV2ZVRvcENoYXJ0cywKICBjb252ZXJ0VHJhY2tPYmplY3Q6IGNvbnZlcnRUcmFja09iamVjdCwKICBjb252ZXJ0QXJ0aXN0T2JqZWN0OiBjb252ZXJ0QXJ0aXN0T2JqZWN0LAogIGdlbmVyYXRlR2VucmU6IGdlbmVyYXRlR2VucmUsCiAgYmFuZ2VyQ2FsYzogYmFuZ2VyQ2FsYywKICBnZXRUcmFjazogZ2V0VHJhY2ssCiAgZ2V0VHJhY2tzOiBnZXRUcmFja3MsCiAgZ2V0QXJ0aXN0OiBnZXRBcnRpc3QsCiAgZ2V0QWxidW06IGdldEFsYnVtLAogIGdldEFydGlzdHM6IGdldEFydGlzdHMsCiAgZ2V0QXJ0aXN0UmVsYXRlZEFydGlzdHM6IGdldEFydGlzdFJlbGF0ZWRBcnRpc3RzLAogIGdldFBsYXlsaXN0czogZ2V0UGxheWxpc3RzLAogIGdldFBsYXlsaXN0OiBnZXRQbGF5bGlzdCwKICBnZXRUb3BUcmFja3M6IGdldFRvcFRyYWNrcywKICBnZXRUb3BBcnRpc3RzOiBnZXRUb3BBcnRpc3RzLAogIGdldFJlY2VudGx5UGxheWVkOiBnZXRSZWNlbnRseVBsYXllZCwKICBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzOiBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzLAogIGdldEF1ZGlvRmVhdHVyZXNGb3JUcmFjazogZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrLAogIGdldEF1ZGlvQW5hbHlzaXNGb3JUcmFjazogZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrLAogIGdldFJlY29tZW5kYXRpb25zOiBnZXRSZWNvbWVuZGF0aW9ucywKICBnZXRTYXZlZFRyYWNrczogZ2V0U2F2ZWRUcmFja3MsCiAgZ2V0VXNlcjogZ2V0VXNlciwKICBzZWFyY2hTcG90aWZ5OiBzZWFyY2hTcG90aWZ5LAogIGdldEFydGlzdFRvcFRyYWNrczogZ2V0QXJ0aXN0VG9wVHJhY2tzCn07"},{"version":3,"sources":["C:/Users/andre/Documents/GitHub/Spotify-Features/front-end/src/store/actions.js"],"names":["inicializeGetToken","context","authEndpoint","clientId","redirectUri","state","dev","scopes","access_token","window","location","join","inicializeParseToken","token","hash","substring","split","reduce","initial","item","parts","decodeURIComponent","dispatch","inicializeSetToken","spotifyApi","setAccessToken","commit","loadLibrary","limit","offset","console","log","retrieveSavedTracks","payload","tracks","ids","map","track","id","audioFeatures","artistIds","i","length","date","added_at","features","j","artists","push","progress","processed","retrieveSavedArtists","Object","keys","values","sectionIds","splice","newArtists","concat","artistObject","genres","includes","artist","key","value","name","updateTimelines","now","Date","months","getFullYear","getMonth","month","processAudioFeatures","tempo","energy","danceability","banger","index","minchart","chart","maxchart","mode","retrieveTopCharts","genreTuples","entries","topGenres","sort","a","b","trackNum","slice","topGenreIds","genre","artistTuples","topArtists","topArtistIds","terms","topPlayed","time_range","topTracks","convertTrackObject","trackObject","album","images","image","url","convertArtistObject","generateGenre","genreObject","bangerCalc","getTrack","track_id","response","getTracks","track_ids","getArtist","getAlbum","getArtists","getArtistRelatedArtists","getPlaylists","getUserPlaylists","user","items","getPlaylist","playlistId","getTopTracks","getMyTopTracks","getTopArtists","getMyTopArtists","getRecentlyPlayed","getMyRecentlyPlayedTracks","getAudioFeaturesForTracks","audio_features","getAudioFeaturesForTrack","getAudioAnalysisForTrack","getRecomendations","getRecommendations","getSavedTracks","getMySavedTracks","total","getUser","inicialized","getMe","searchSpotify","search","query","getArtistTopTracks"],"mappings":"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","sourcesContent":["////////////////////////////////////////////////////////////////\r\n// INICIALIZATION //////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\n// None\r\nconst inicializeGetToken = (context) => {\r\n    const authEndpoint = 'https://accounts.spotify.com/authorize';\r\n    const clientId = '42903eeb2bf943c4bd4903370f7a93f5';\r\n    let redirectUri = 'http://mymusictaste.org/redirect/';\r\n    if (context.state.dev)\r\n        redirectUri = 'http://localhost:8080/redirect/';\r\n    const scopes = [\r\n        'user-read-recently-played',\r\n        'user-top-read',\r\n        'user-library-read',\r\n        'user-read-email',\r\n        'playlist-read-private',\r\n    ];\r\n    if (!context.state.access_token) {\r\n        window.location = `${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join('%20')}&response_type=token&show_dialog=true`;\r\n    }\r\n};\r\n// None\r\nconst inicializeParseToken = (context) => {\r\n    let token = window.location.hash.substring(1).split('&').reduce(function (initial, item) {\r\n        if (item) {\r\n            let parts = item.split('=');\r\n            initial[parts[0]] = decodeURIComponent(parts[1]);\r\n        }\r\n        return initial;\r\n    }, {});\r\n    context.dispatch('inicializeSetToken', token.access_token);\r\n};\r\n// Token\r\nconst inicializeSetToken = async (context, token) => {\r\n    await context.state.spotifyApi.setAccessToken(token);\r\n    await context.commit('setInicialized', true);\r\n    context.dispatch('getUser');\r\n};\r\n////////////////////////////////////////////////////////////////\r\n// LOAD LIBRARY ////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\nconst loadLibrary = async (context) => {\r\n    await context.dispatch('retrieveSavedTracks', {limit: 50, offset: 0});\r\n    context.commit('averageAudioFeatureValues');\r\n    context.commit('averageMode');\r\n    await context.dispatch('retrieveTopCharts');\r\n    context.commit('setProgressTracks');\r\n    context.commit('setProgressArtists');\r\n    context.commit('setProgressGenres');\r\n    context.commit('setProgressCharts');\r\n    context.commit('setProgressTimelines');\r\n    console.log(context.state);\r\n};\r\nconst retrieveSavedTracks = async (context, payload) => {\r\n    let tracks = await context.dispatch('getSavedTracks', {limit: payload.limit, offset: payload.offset});\r\n    let ids = tracks.map(track => track.track.id);\r\n    let audioFeatures = await context.dispatch('getAudioFeaturesForTracks', ids);\r\n    let artistIds = {};\r\n    for (let i = 0; i < tracks.length; i++) {\r\n        if (tracks[i].track.id in context.state.tracks)\r\n            continue;\r\n        context.dispatch('updateTimelines', {date: tracks[i].added_at, features: audioFeatures[i]});\r\n        context.commit('pushTrack', await context.dispatch('convertTrackObject', {track: tracks[i].track, date: tracks[i].added_at}));\r\n        context.dispatch('processAudioFeatures', audioFeatures[i]);\r\n        for (let j = 0; j < tracks[i].track.artists.length; j++) {\r\n            if (tracks[i].track.artists[j].id in context.state.artists) {\r\n                context.commit('addTrackToArtist', {id: tracks[i].track.artists[j].id, track: tracks[i].track.id});\r\n            }\r\n            else {\r\n                if (!(tracks[i].track.artists[j].id in artistIds)) \r\n                    artistIds[tracks[i].track.artists[j].id] = [tracks[i].track.id];\r\n                else \r\n                    artistIds[tracks[i].track.artists[j].id].push(tracks[i].track.id);\r\n            }\r\n        }\r\n        context.commit('addProcessed');\r\n        console.log(context.state.progress.processed);\r\n    }\r\n    await context.dispatch('retrieveSavedArtists', artistIds);\r\n    if (tracks.length == payload.limit) {\r\n        await context.dispatch('retrieveSavedTracks', {limit: 50, offset: payload.offset + payload.limit});\r\n    }\r\n    return;\r\n};\r\nconst retrieveSavedArtists = async (context, payload) => {\r\n    let ids = Object.keys(payload);\r\n    let tracks = Object.values(payload);\r\n    let artists = [];\r\n    while (ids.length > 0) {\r\n        let sectionIds = ids.splice(0, 50);\r\n        let newArtists = await context.dispatch('getArtists', sectionIds);\r\n        artists = artists.concat(newArtists);\r\n    }\r\n    for (let i = 0; i < artists.length; i++) {\r\n        artists[i].tracks = tracks[i];\r\n        let artistObject = await context.dispatch('convertArtistObject', artists[i]);\r\n        context.commit('pushArtist', artistObject);\r\n        for (let j = 0; j < artists[i].genres.length; j++) {\r\n            if (artists[i].genres[j] in context.state.genres) {\r\n                if (!(context.state.genres[artists[i].genres[j]].artists.includes(artists[i].id)))\r\n                    context.commit('addArtistToGenre', {id: artists[i].genres[j], artist: artists[i].id});\r\n                context.commit('addGenreTrackNum', {key: artists[i].genres[j], value: tracks[i].length});\r\n                continue;\r\n            }\r\n            context.commit('pushGenre', await context.dispatch('generateGenre', {name: artists[i].genres[j], artists: [artists[i].id]}));\r\n        }\r\n    }\r\n};\r\nconst updateTimelines = async (context, payload) => {\r\n    let now = new Date();\r\n    let date = new Date(payload.date);\r\n    let months = (now.getFullYear() - date.getFullYear()) * 12;\r\n    months += now.getMonth();\r\n    months -= date.getMonth();\r\n    context.commit('addDateAddedTimeline', months);\r\n    let keys = Object.keys(context.state.audioFeatures);\r\n    for (let i = 0; i < keys.length; i++) {\r\n        context.commit('addAudioFeatureTimeline', {key: keys[i], month: months, value: payload.features[keys[i]]});\r\n    }\r\n};\r\nconst processAudioFeatures = async (context, payload) => {\r\n    let keys = Object.keys(context.state.audioFeatures);\r\n    payload.banger = await context.dispatch('bangerCalc', {tempo: payload.tempo, energy: payload.energy, danceability: payload.danceability});\r\n    for (let i = 0; i < keys.length; i++) {\r\n        let index = context.state.audioFeatures[keys[i]].minchart.length - 1;\r\n        if (index < 0) \r\n            index = 0;\r\n        if (context.state.audioFeatures[keys[i]].minchart.length < 25 || payload[keys[i]] < context.state.audioFeatures[keys[i]].minchart[index].value) {                \r\n            while (index > 0 && payload[keys[i]] < context.state.audioFeatures[keys[i]].minchart[index].value) {\r\n                index -= 1;\r\n            }\r\n            await context.commit('spliceAudioFeatureExtremes', {key: keys[i], chart: 'minchart', index: index, value: {id: payload.id, value: payload[keys[i]]}});\r\n        }\r\n        index = context.state.audioFeatures[keys[i]].maxchart.length - 1;\r\n        if (index < 0) \r\n            index = 0;\r\n        if (context.state.audioFeatures[keys[i]].maxchart.length < 25 || payload[keys[i]] > context.state.audioFeatures[keys[i]].maxchart[index].value) {\r\n            while (index > 0 && payload[keys[i]] > context.state.audioFeatures[keys[i]].maxchart[index].value)\r\n                index -= 1;\r\n            await context.commit('spliceAudioFeatureExtremes', {key: keys[i], chart: 'maxchart', index: index, value: {id: payload.id, value: payload[keys[i]]}});\r\n        }\r\n        context.commit('addAudioFeatureValue', {key: keys[i], value: payload[keys[i]]});\r\n        context.commit('plotAudioFeatureValue', {key: keys[i], value: payload[keys[i]]});\r\n    }\r\n    context.commit('addMode', payload.mode);\r\n};\r\nconst retrieveTopCharts = async (context) => {\r\n    let genreTuples = Object.entries(context.state.genres);\r\n    let topGenres = genreTuples.sort(function(a,b) {\r\n        if (!(\"trackNum\" in a[1]) && !(\"trackNum\" in b[1]))\r\n            return 0;\r\n        if (!(\"trackNum\" in b[1]))\r\n            return 0 - a[1].trackNum;\r\n        if (!(\"trackNum\" in a[1]))\r\n            return b[1].trackNum;\r\n        return b[1].trackNum - a[1].trackNum;\r\n    }).slice(0,50);\r\n    let topGenreIds = topGenres.map(genre => genre[0]);\r\n    context.commit('setTopSavedGenres', topGenreIds);\r\n    let artistTuples = Object.entries(context.state.artists);\r\n    let topArtists = artistTuples.sort(function(a,b) {\r\n        if (!(\"tracks\" in a[1]) && !(\"tracks\" in b[1]))\r\n            return 0;\r\n        if (!(\"tracks\" in b[1]))\r\n            return 0 - a[1].tracks.length;\r\n        if (!(\"tracks\" in a[1]))\r\n            return b[1].tracks.length;\r\n        return b[1].tracks.length - a[1].tracks.length\r\n    }).slice(0,50);\r\n    let topArtistIds = topArtists.map(artist => artist[0]);\r\n    context.commit('setTopSavedArtists', topArtistIds);\r\n    let terms = ['short_term', 'medium_term', 'long_term'];\r\n    let topPlayed = {\r\n        tracks: [[],[],[]],\r\n        artists: [[],[],[]]\r\n    }\r\n    for (let i = 0; i < terms.length; i++) {\r\n        let topTracks = await context.dispatch('getTopTracks', {limit: 50, time_range: terms[i]});\r\n        for (let j = 0; j < topTracks.length; j++) {\r\n            if (topTracks[j].id in context.state.tracks) \r\n                topPlayed.tracks[i].push(topTracks[j].id);\r\n            else\r\n                topPlayed.tracks[i].push(await context.dispatch('convertTrackObject', {track: topTracks[j]}));\r\n        }\r\n        let topArtists = await context.dispatch('getTopArtists', {limit: 50, time_range: terms[i]});\r\n        for (let j = 0; j < topArtists.length; j++) {\r\n            if (topArtists[j].id in context.state.artists) \r\n                topPlayed.artists[i].push(topArtists[j].id);\r\n            else\r\n                topPlayed.artists[i].push(await context.dispatch('convertArtistObject', topArtists[j]));\r\n        }\r\n    }\r\n    context.commit('setTopPlayedTracks', topPlayed.tracks);\r\n    context.commit('setTopPlayedArtists', topPlayed.artists);\r\n};\r\n/*\r\n{\r\n    id: String, \r\n    name: String,\r\n    image: String,\r\n    artists: Array,\r\n}\r\n*/\r\nconst convertTrackObject = async (context, payload) => {\r\n    let trackObject = {};\r\n    trackObject.id = payload.track.id;\r\n    trackObject.name = payload.track.name;\r\n    if ('album' in payload.track) \r\n        if ('images' in payload.track.album)\r\n            if (payload.track.album.images.length > 0)\r\n                trackObject.image = payload.track.album.images[0].url;\r\n    if (typeof(payload.track.artists[0]) == 'object')\r\n        trackObject.artists = payload.track.artists.map(artist => artist.id);\r\n    if ('date' in payload)\r\n        trackObject.date = payload.date;\r\n    return trackObject;\r\n};\r\nconst convertArtistObject = async (context, payload) => {\r\n    let artistObject = {};\r\n    artistObject.id = payload.id;\r\n    artistObject.name = payload.name;\r\n    if ('images' in payload)\r\n        if (payload.images.length > 0)\r\n            artistObject.image = payload.images[0].url;\r\n    if ('genres' in payload)\r\n        artistObject.genres = payload.genres;\r\n    if ('tracks' in payload)\r\n        artistObject.tracks = payload.tracks;\r\n    return artistObject;\r\n};\r\nconst generateGenre = async (context, payload) => {\r\n    let genreObject = {};\r\n    genreObject.name = payload.name;\r\n    genreObject.artists = payload.artists;\r\n    genreObject.trackNum = 1;\r\n    return genreObject;\r\n};\r\nconst bangerCalc = async (context, payload) => {\r\n    return ((payload.tempo - 96 + (payload.energy * 100) + (payload.danceability*50)) / 210);\r\n};\r\n////////////////////////////////////////////////////////////////\r\n// API CALLS ///////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\n// String\r\nconst getTrack = async (context, track_id) => {\r\n  try {\r\n      let response = await context.state.spotifyApi.getTrack(track_id);\r\n      return response;\r\n  } catch (error) {\r\n      return;\r\n  }\r\n};\r\n// Array of Strings\r\nconst getTracks = async (context, track_ids) => {\r\n  try {\r\n      let response = await context.state.spotifyApi.getTracks(track_ids);\r\n      return response;\r\n  } catch (error) {\r\n      return;\r\n  }\r\n};\r\n// String\r\nconst getArtist = async (context, id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getArtist(id);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n}; \r\n// String\r\nconst getAlbum = async (context, id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getAlbum(id);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n}; \r\n// Array of Strings\r\nconst getArtists = async (context, ids) => {\r\n  try {\r\n      let response = await context.state.spotifyApi.getArtists(ids);\r\n      return response.artists;\r\n  } catch (error) {\r\n      return;\r\n  }\r\n};\r\n//\r\nconst getArtistRelatedArtists = async (context, id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getArtistRelatedArtists(id);\r\n        return response.artists;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n  };\r\n// {limit: Number, offset: 0}\r\nconst getPlaylists = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getUserPlaylists(context.state.user.id, payload);\r\n        return response.items;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// String\r\nconst getPlaylist = async (context, playlistId) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getPlaylist(playlistId);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// {limit: Number 1-50, time_range: \"long_term\" Several years, \"medium_term\" 6 Months, \"short_term\" 4 Weeks, offset: Index of first entry to return}\r\nconst getTopTracks = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getMyTopTracks({limit: payload.limit, time_range: payload.time_range});\r\n        return response.items;\r\n    } catch (error) {\r\n        return;\r\n    }  \r\n};\r\n// {limit: Number 1-50, time_range: \"long_term\" Several years, \"medium_term\" 6 Months, \"short_term\" 4 Weeks, offset: Index of first entry to return}\r\nconst getTopArtists = async (context, payload) => {\r\n    try { \r\n        let response = await context.state.spotifyApi.getMyTopArtists({limit: payload.limit, time_range: payload.time_range});\r\n        return response.items;\r\n    } catch (error) {\r\n        return;\r\n    } \r\n};\r\n// {limit: Number 1-50, after: Unix timestamp Milliseconds, before: Unix timestamp Milliseconds\r\nconst getRecentlyPlayed = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getMyRecentlyPlayedTracks({limit: payload.limit});\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// Array of Strings\r\nconst getAudioFeaturesForTracks = async (context, track_ids) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getAudioFeaturesForTracks(track_ids);\r\n        return response.audio_features;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// String\r\nconst getAudioFeaturesForTrack = async (context, track_id) => {\r\n  try {\r\n      let response = await context.state.spotifyApi.getAudioFeaturesForTracks([track_id]);\r\n      return response.audio_features[0];\r\n  } catch (error) {\r\n      return;\r\n  }\r\n};\r\n// String\r\nconst getAudioAnalysisForTrack = async (context, track_id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getAudioAnalysisForTrack(track_id);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// {seed_tracks: [track_id], target_dancebility: NUM, limit: 6, max_* min_*}\r\nconst getRecomendations = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getRecommendations(payload);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// {limit: 1-50, offset: first index}\r\nconst getSavedTracks = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getMySavedTracks({limit: payload.limit, offset: payload.offset});\r\n        if (payload.offset == 0) {\r\n            context.commit('setTotal', response.total);\r\n        }\r\n        return response.items;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// None\r\nconst getUser = async (context) => {\r\n    try {\r\n      if (context.state.inicialized)\r\n      {\r\n        let response = await context.state.spotifyApi.getMe();\r\n        await context.commit('setUserData', response);\r\n      }\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// Array IDs\r\nconst searchSpotify = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.search(payload.query, ['track'], {limit: 25});\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n\r\nconst getArtistTopTracks = async (context, id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getArtistTopTracks(id, \"US\", {});\r\n        return response.tracks;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n\r\n\r\n\r\nexport default {\r\n    inicializeGetToken,\r\n    inicializeParseToken,\r\n    inicializeSetToken,\r\n\r\n    loadLibrary,\r\n    retrieveSavedTracks,\r\n    retrieveSavedArtists,\r\n    updateTimelines,\r\n    processAudioFeatures,\r\n    retrieveTopCharts,\r\n\r\n    convertTrackObject,\r\n    convertArtistObject,\r\n    generateGenre,\r\n\r\n    bangerCalc,\r\n\r\n    getTrack,\r\n    getTracks,\r\n    getArtist,\r\n    getAlbum,\r\n    getArtists,\r\n    getArtistRelatedArtists,\r\n    getPlaylists,\r\n    getPlaylist,\r\n    getTopTracks,\r\n    getTopArtists,\r\n    getRecentlyPlayed,\r\n    getAudioFeaturesForTracks,\r\n    getAudioFeaturesForTrack,\r\n    getAudioAnalysisForTrack,\r\n    getRecomendations,\r\n    getSavedTracks,\r\n    getUser,\r\n    searchSpotify,\r\n    getArtistTopTracks\r\n};"]}]}