{"remainingRequest":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end4\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end4\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end4\\src\\store\\actions.js","dependencies":[{"path":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end4\\src\\store\\actions.js","mtime":1574318919261},{"path":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end4\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end4\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end4\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiQzpcXFVzZXJzXFxhbmRyZVxcRG9jdW1lbnRzXFxHaXRIdWJcXFNwb3RpZnktRmVhdHVyZXNcXGZyb250LWVuZDRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwoKLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBJTklDSUFMSVpBVElPTiAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8gTm9uZQp2YXIgaW5pY2lhbGl6ZUdldFRva2VuID0gZnVuY3Rpb24gaW5pY2lhbGl6ZUdldFRva2VuKGNvbnRleHQpIHsKICB2YXIgYXV0aEVuZHBvaW50ID0gJ2h0dHBzOi8vYWNjb3VudHMuc3BvdGlmeS5jb20vYXV0aG9yaXplJzsKICB2YXIgY2xpZW50SWQgPSAnNDI5MDNlZWIyYmY5NDNjNGJkNDkwMzM3MGY3YTkzZjUnOwogIHZhciByZWRpcmVjdFVyaSA9ICdodHRwOi8vbXltdXNpY3Rhc3RlLm9yZy9yZWRpcmVjdC8nOwogIGlmIChjb250ZXh0LnN0YXRlLmRldikgcmVkaXJlY3RVcmkgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlZGlyZWN0Lyc7CiAgdmFyIHNjb3BlcyA9IFsndXNlci1yZWFkLXJlY2VudGx5LXBsYXllZCcsICd1c2VyLXRvcC1yZWFkJywgJ3VzZXItbGlicmFyeS1yZWFkJywgJ3VzZXItcmVhZC1lbWFpbCcsICdwbGF5bGlzdC1yZWFkLXByaXZhdGUnXTsKCiAgaWYgKCFjb250ZXh0LnN0YXRlLmFjY2Vzc190b2tlbikgewogICAgd2luZG93LmxvY2F0aW9uID0gIiIuY29uY2F0KGF1dGhFbmRwb2ludCwgIj9jbGllbnRfaWQ9IikuY29uY2F0KGNsaWVudElkLCAiJnJlZGlyZWN0X3VyaT0iKS5jb25jYXQocmVkaXJlY3RVcmksICImc2NvcGU9IikuY29uY2F0KHNjb3Blcy5qb2luKCclMjAnKSwgIiZyZXNwb25zZV90eXBlPXRva2VuJnNob3dfZGlhbG9nPXRydWUiKTsKICB9Cn07IC8vIE5vbmUKCgp2YXIgaW5pY2lhbGl6ZVBhcnNlVG9rZW4gPSBmdW5jdGlvbiBpbmljaWFsaXplUGFyc2VUb2tlbihjb250ZXh0KSB7CiAgdmFyIHRva2VuID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpLnNwbGl0KCcmJykucmVkdWNlKGZ1bmN0aW9uIChpbml0aWFsLCBpdGVtKSB7CiAgICBpZiAoaXRlbSkgewogICAgICB2YXIgcGFydHMgPSBpdGVtLnNwbGl0KCc9Jyk7CiAgICAgIGluaXRpYWxbcGFydHNbMF1dID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzFdKTsKICAgIH0KCiAgICByZXR1cm4gaW5pdGlhbDsKICB9LCB7fSk7CiAgY29udGV4dC5kaXNwYXRjaCgnaW5pY2lhbGl6ZVNldFRva2VuJywgdG9rZW4uYWNjZXNzX3Rva2VuKTsKfTsgLy8gVG9rZW4KCgp2YXIgaW5pY2lhbGl6ZVNldFRva2VuID0gZnVuY3Rpb24gaW5pY2lhbGl6ZVNldFRva2VuKGNvbnRleHQsIHRva2VuKSB7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBpbmljaWFsaXplU2V0VG9rZW4kKF9jb250ZXh0KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5zZXRBY2Nlc3NUb2tlbih0b2tlbikpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5jb21taXQoJ3NldEluaWNpYWxpemVkJywgdHJ1ZSkpOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoKCdnZXRVc2VyJyk7CgogICAgICAgIGNhc2UgNToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vIExPQUQgTElCUkFSWSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCnZhciBsb2FkTGlicmFyeSA9IGZ1bmN0aW9uIGxvYWRMaWJyYXJ5KGNvbnRleHQpIHsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGxvYWRMaWJyYXJ5JChfY29udGV4dDIpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgncmV0cmlldmVTYXZlZFRyYWNrcycsIHsKICAgICAgICAgICAgbGltaXQ6IDUwLAogICAgICAgICAgICBvZmZzZXQ6IDAKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAyOgogICAgICAgICAgY29udGV4dC5jb21taXQoJ2F2ZXJhZ2VBdWRpb0ZlYXR1cmVWYWx1ZXMnKTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhdmVyYWdlTW9kZScpOwogICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdyZXRyaWV2ZVRvcENoYXJ0cycpKTsKCiAgICAgICAgY2FzZSA2OgogICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFByb2dyZXNzVHJhY2tzJyk7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0UHJvZ3Jlc3NBcnRpc3RzJyk7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0UHJvZ3Jlc3NHZW5yZXMnKTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRQcm9ncmVzc0NoYXJ0cycpOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFByb2dyZXNzVGltZWxpbmVzJyk7CiAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZXh0LnN0YXRlKTsKCiAgICAgICAgY2FzZSAxMjoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCnZhciByZXRyaWV2ZVNhdmVkVHJhY2tzID0gZnVuY3Rpb24gcmV0cmlldmVTYXZlZFRyYWNrcyhjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIHRyYWNrcywgaWRzLCBhdWRpb0ZlYXR1cmVzLCBhcnRpc3RJZHMsIGksIGo7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiByZXRyaWV2ZVNhdmVkVHJhY2tzJChfY29udGV4dDMpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnZ2V0U2F2ZWRUcmFja3MnLCB7CiAgICAgICAgICAgIGxpbWl0OiBwYXlsb2FkLmxpbWl0LAogICAgICAgICAgICBvZmZzZXQ6IHBheWxvYWQub2Zmc2V0CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHRyYWNrcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgaWRzID0gdHJhY2tzLm1hcChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgcmV0dXJuIHRyYWNrLnRyYWNrLmlkOwogICAgICAgICAgfSk7CiAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuZGlzcGF0Y2goJ2dldEF1ZGlvRmVhdHVyZXNGb3JUcmFja3MnLCBpZHMpKTsKCiAgICAgICAgY2FzZSA2OgogICAgICAgICAgYXVkaW9GZWF0dXJlcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgYXJ0aXN0SWRzID0ge307CiAgICAgICAgICBpID0gMDsKCiAgICAgICAgY2FzZSA5OgogICAgICAgICAgaWYgKCEoaSA8IHRyYWNrcy5sZW5ndGgpKSB7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghKHRyYWNrc1tpXS50cmFjay5pZCBpbiBjb250ZXh0LnN0YXRlLnRyYWNrcykpIHsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoImNvbnRpbnVlIiwgMjIpOwoKICAgICAgICBjYXNlIDEyOgogICAgICAgICAgY29udGV4dC5kaXNwYXRjaCgndXBkYXRlVGltZWxpbmVzJywgewogICAgICAgICAgICBkYXRlOiB0cmFja3NbaV0uYWRkZWRfYXQsCiAgICAgICAgICAgIGZlYXR1cmVzOiBhdWRpb0ZlYXR1cmVzW2ldCiAgICAgICAgICB9KTsKICAgICAgICAgIF9jb250ZXh0My50MCA9IGNvbnRleHQ7CiAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE2OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdjb252ZXJ0VHJhY2tPYmplY3QnLCB7CiAgICAgICAgICAgIHRyYWNrOiB0cmFja3NbaV0udHJhY2ssCiAgICAgICAgICAgIGRhdGU6IHRyYWNrc1tpXS5hZGRlZF9hdAogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDE2OgogICAgICAgICAgX2NvbnRleHQzLnQxID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgX2NvbnRleHQzLnQwLmNvbW1pdC5jYWxsKF9jb250ZXh0My50MCwgJ3B1c2hUcmFjaycsIF9jb250ZXh0My50MSk7CgogICAgICAgICAgY29udGV4dC5kaXNwYXRjaCgncHJvY2Vzc0F1ZGlvRmVhdHVyZXMnLCBhdWRpb0ZlYXR1cmVzW2ldKTsKCiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdHJhY2tzW2ldLnRyYWNrLmFydGlzdHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgaWYgKHRyYWNrc1tpXS50cmFjay5hcnRpc3RzW2pdLmlkIGluIGNvbnRleHQuc3RhdGUuYXJ0aXN0cykgewogICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRUcmFja1RvQXJ0aXN0JywgewogICAgICAgICAgICAgICAgaWQ6IHRyYWNrc1tpXS50cmFjay5hcnRpc3RzW2pdLmlkLAogICAgICAgICAgICAgICAgdHJhY2s6IHRyYWNrc1tpXS50cmFjay5pZAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICghKHRyYWNrc1tpXS50cmFjay5hcnRpc3RzW2pdLmlkIGluIGFydGlzdElkcykpIGFydGlzdElkc1t0cmFja3NbaV0udHJhY2suYXJ0aXN0c1tqXS5pZF0gPSBbdHJhY2tzW2ldLnRyYWNrLmlkXTtlbHNlIGFydGlzdElkc1t0cmFja3NbaV0udHJhY2suYXJ0aXN0c1tqXS5pZF0ucHVzaCh0cmFja3NbaV0udHJhY2suaWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgY29udGV4dC5jb21taXQoJ2FkZFByb2Nlc3NlZCcpOwogICAgICAgICAgY29uc29sZS5sb2coY29udGV4dC5zdGF0ZS5wcm9ncmVzcy5wcm9jZXNzZWQpOwoKICAgICAgICBjYXNlIDIyOgogICAgICAgICAgaSsrOwogICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjU6CiAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI3OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdyZXRyaWV2ZVNhdmVkQXJ0aXN0cycsIGFydGlzdElkcykpOwoKICAgICAgICBjYXNlIDI3OgogICAgICAgICAgaWYgKCEodHJhY2tzLmxlbmd0aCA9PSBwYXlsb2FkLmxpbWl0KSkgewogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDMwOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDMwOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdyZXRyaWV2ZVNhdmVkVHJhY2tzJywgewogICAgICAgICAgICBsaW1pdDogNTAsCiAgICAgICAgICAgIG9mZnNldDogcGF5bG9hZC5vZmZzZXQgKyBwYXlsb2FkLmxpbWl0CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMzA6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMzE6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07Cgp2YXIgcmV0cmlldmVTYXZlZEFydGlzdHMgPSBmdW5jdGlvbiByZXRyaWV2ZVNhdmVkQXJ0aXN0cyhjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIGlkcywgdHJhY2tzLCBhcnRpc3RzLCBzZWN0aW9uSWRzLCBuZXdBcnRpc3RzLCBpLCBhcnRpc3RPYmplY3QsIGo7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiByZXRyaWV2ZVNhdmVkQXJ0aXN0cyQoX2NvbnRleHQ0KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBpZHMgPSBPYmplY3Qua2V5cyhwYXlsb2FkKTsKICAgICAgICAgIHRyYWNrcyA9IE9iamVjdC52YWx1ZXMocGF5bG9hZCk7CiAgICAgICAgICBhcnRpc3RzID0gW107CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIGlmICghKGlkcy5sZW5ndGggPiAwKSkgewogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDExOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBzZWN0aW9uSWRzID0gaWRzLnNwbGljZSgwLCA1MCk7CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuZGlzcGF0Y2goJ2dldEFydGlzdHMnLCBzZWN0aW9uSWRzKSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIG5ld0FydGlzdHMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgIGFydGlzdHMgPSBhcnRpc3RzLmNvbmNhdChuZXdBcnRpc3RzKTsKICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDExOgogICAgICAgICAgaSA9IDA7CgogICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBpZiAoIShpIDwgYXJ0aXN0cy5sZW5ndGgpKSB7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFydGlzdHNbaV0udHJhY2tzID0gdHJhY2tzW2ldOwogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnY29udmVydEFydGlzdE9iamVjdCcsIGFydGlzdHNbaV0pKTsKCiAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIGFydGlzdE9iamVjdCA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgY29udGV4dC5jb21taXQoJ3B1c2hBcnRpc3QnLCBhcnRpc3RPYmplY3QpOwogICAgICAgICAgaiA9IDA7CgogICAgICAgIGNhc2UgMTk6CiAgICAgICAgICBpZiAoIShqIDwgYXJ0aXN0c1tpXS5nZW5yZXMubGVuZ3RoKSkgewogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDMyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIShhcnRpc3RzW2ldLmdlbnJlc1tqXSBpbiBjb250ZXh0LnN0YXRlLmdlbnJlcykpIHsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyNDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFjb250ZXh0LnN0YXRlLmdlbnJlc1thcnRpc3RzW2ldLmdlbnJlc1tqXV0uYXJ0aXN0cy5pbmNsdWRlcyhhcnRpc3RzW2ldLmlkKSkgY29udGV4dC5jb21taXQoJ2FkZEFydGlzdFRvR2VucmUnLCB7CiAgICAgICAgICAgIGlkOiBhcnRpc3RzW2ldLmdlbnJlc1tqXSwKICAgICAgICAgICAgYXJ0aXN0OiBhcnRpc3RzW2ldLmlkCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRHZW5yZVRyYWNrTnVtJywgewogICAgICAgICAgICBrZXk6IGFydGlzdHNbaV0uZ2VucmVzW2pdLAogICAgICAgICAgICB2YWx1ZTogdHJhY2tzW2ldLmxlbmd0aAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgiY29udGludWUiLCAyOSk7CgogICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICBfY29udGV4dDQudDAgPSBjb250ZXh0OwogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyNzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnZ2VuZXJhdGVHZW5yZScsIHsKICAgICAgICAgICAgbmFtZTogYXJ0aXN0c1tpXS5nZW5yZXNbal0sCiAgICAgICAgICAgIGFydGlzdHM6IFthcnRpc3RzW2ldLmlkXQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDI3OgogICAgICAgICAgX2NvbnRleHQ0LnQxID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgX2NvbnRleHQ0LnQwLmNvbW1pdC5jYWxsKF9jb250ZXh0NC50MCwgJ3B1c2hHZW5yZScsIF9jb250ZXh0NC50MSk7CgogICAgICAgIGNhc2UgMjk6CiAgICAgICAgICBqKys7CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE5OwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzI6CiAgICAgICAgICBpKys7CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEyOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzU6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07Cgp2YXIgdXBkYXRlVGltZWxpbmVzID0gZnVuY3Rpb24gdXBkYXRlVGltZWxpbmVzKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgbm93LCBkYXRlLCBtb250aHMsIGtleXMsIGk7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiB1cGRhdGVUaW1lbGluZXMkKF9jb250ZXh0NSkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShwYXlsb2FkLmRhdGUpOwogICAgICAgICAgbW9udGhzID0gKG5vdy5nZXRGdWxsWWVhcigpIC0gZGF0ZS5nZXRGdWxsWWVhcigpKSAqIDEyOwogICAgICAgICAgbW9udGhzICs9IG5vdy5nZXRNb250aCgpOwogICAgICAgICAgbW9udGhzIC09IGRhdGUuZ2V0TW9udGgoKTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGREYXRlQWRkZWRUaW1lbGluZScsIG1vbnRocyk7CiAgICAgICAgICBrZXlzID0gT2JqZWN0LmtleXMoY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzKTsKCiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnYWRkQXVkaW9GZWF0dXJlVGltZWxpbmUnLCB7CiAgICAgICAgICAgICAga2V5OiBrZXlzW2ldLAogICAgICAgICAgICAgIG1vbnRoOiBtb250aHMsCiAgICAgICAgICAgICAgdmFsdWU6IHBheWxvYWQuZmVhdHVyZXNba2V5c1tpXV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgODoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCnZhciBwcm9jZXNzQXVkaW9GZWF0dXJlcyA9IGZ1bmN0aW9uIHByb2Nlc3NBdWRpb0ZlYXR1cmVzKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIga2V5cywgaSwgaW5kZXg7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBwcm9jZXNzQXVkaW9GZWF0dXJlcyQoX2NvbnRleHQ2KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBrZXlzID0gT2JqZWN0LmtleXMoY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzKTsKICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnYmFuZ2VyQ2FsYycsIHsKICAgICAgICAgICAgdGVtcG86IHBheWxvYWQudGVtcG8sCiAgICAgICAgICAgIGVuZXJneTogcGF5bG9hZC5lbmVyZ3ksCiAgICAgICAgICAgIGRhbmNlYWJpbGl0eTogcGF5bG9hZC5kYW5jZWFiaWxpdHkKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcGF5bG9hZC5iYW5nZXIgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgIGkgPSAwOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgICBpZiAoIShpIDwga2V5cy5sZW5ndGgpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjM7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGluZGV4ID0gY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzW2tleXNbaV1dLm1pbmNoYXJ0Lmxlbmd0aCAtIDE7CiAgICAgICAgICBpZiAoaW5kZXggPCAwKSBpbmRleCA9IDA7CgogICAgICAgICAgaWYgKCEoY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzW2tleXNbaV1dLm1pbmNoYXJ0Lmxlbmd0aCA8IDI1IHx8IHBheWxvYWRba2V5c1tpXV0gPCBjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXNba2V5c1tpXV0ubWluY2hhcnRbaW5kZXhdLnZhbHVlKSkgewogICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICB3aGlsZSAoaW5kZXggPiAwICYmIHBheWxvYWRba2V5c1tpXV0gPCBjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXNba2V5c1tpXV0ubWluY2hhcnRbaW5kZXhdLnZhbHVlKSB7CiAgICAgICAgICAgIGluZGV4IC09IDE7CiAgICAgICAgICB9CgogICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxMjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5jb21taXQoJ3NwbGljZUF1ZGlvRmVhdHVyZUV4dHJlbWVzJywgewogICAgICAgICAgICBrZXk6IGtleXNbaV0sCiAgICAgICAgICAgIGNoYXJ0OiAnbWluY2hhcnQnLAogICAgICAgICAgICBpbmRleDogaW5kZXgsCiAgICAgICAgICAgIHZhbHVlOiB7CiAgICAgICAgICAgICAgaWQ6IHBheWxvYWQuaWQsCiAgICAgICAgICAgICAgdmFsdWU6IHBheWxvYWRba2V5c1tpXV0KICAgICAgICAgICAgfQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDEyOgogICAgICAgICAgaW5kZXggPSBjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXNba2V5c1tpXV0ubWF4Y2hhcnQubGVuZ3RoIC0gMTsKICAgICAgICAgIGlmIChpbmRleCA8IDApIGluZGV4ID0gMDsKCiAgICAgICAgICBpZiAoIShjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXNba2V5c1tpXV0ubWF4Y2hhcnQubGVuZ3RoIDwgMjUgfHwgcGF5bG9hZFtrZXlzW2ldXSA+IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlc1trZXlzW2ldXS5tYXhjaGFydFtpbmRleF0udmFsdWUpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTg7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHdoaWxlIChpbmRleCA+IDAgJiYgcGF5bG9hZFtrZXlzW2ldXSA+IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlc1trZXlzW2ldXS5tYXhjaGFydFtpbmRleF0udmFsdWUpIHsKICAgICAgICAgICAgaW5kZXggLT0gMTsKICAgICAgICAgIH0KCiAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE4OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmNvbW1pdCgnc3BsaWNlQXVkaW9GZWF0dXJlRXh0cmVtZXMnLCB7CiAgICAgICAgICAgIGtleToga2V5c1tpXSwKICAgICAgICAgICAgY2hhcnQ6ICdtYXhjaGFydCcsCiAgICAgICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICBpZDogcGF5bG9hZC5pZCwKICAgICAgICAgICAgICB2YWx1ZTogcGF5bG9hZFtrZXlzW2ldXQogICAgICAgICAgICB9CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMTg6CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnYWRkQXVkaW9GZWF0dXJlVmFsdWUnLCB7CiAgICAgICAgICAgIGtleToga2V5c1tpXSwKICAgICAgICAgICAgdmFsdWU6IHBheWxvYWRba2V5c1tpXV0KICAgICAgICAgIH0pOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ3Bsb3RBdWRpb0ZlYXR1cmVWYWx1ZScsIHsKICAgICAgICAgICAga2V5OiBrZXlzW2ldLAogICAgICAgICAgICB2YWx1ZTogcGF5bG9hZFtrZXlzW2ldXQogICAgICAgICAgfSk7CgogICAgICAgIGNhc2UgMjA6CiAgICAgICAgICBpKys7CiAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDU7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyMzoKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRNb2RlJywgcGF5bG9hZC5tb2RlKTsKCiAgICAgICAgY2FzZSAyNDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCnZhciByZXRyaWV2ZVRvcENoYXJ0cyA9IGZ1bmN0aW9uIHJldHJpZXZlVG9wQ2hhcnRzKGNvbnRleHQpIHsKICB2YXIgZ2VucmVUdXBsZXMsIHRvcEdlbnJlcywgdG9wR2VucmVJZHMsIGFydGlzdFR1cGxlcywgdG9wQXJ0aXN0cywgdG9wQXJ0aXN0SWRzLCB0ZXJtcywgdG9wUGxheWVkLCBpLCB0b3BUcmFja3MsIGosIF90b3BBcnRpc3RzLCBfajsKCiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiByZXRyaWV2ZVRvcENoYXJ0cyQoX2NvbnRleHQ3KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBnZW5yZVR1cGxlcyA9IE9iamVjdC5lbnRyaWVzKGNvbnRleHQuc3RhdGUuZ2VucmVzKTsKICAgICAgICAgIHRvcEdlbnJlcyA9IGdlbnJlVHVwbGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgaWYgKCEoInRyYWNrTnVtIiBpbiBhWzFdKSAmJiAhKCJ0cmFja051bSIgaW4gYlsxXSkpIHJldHVybiAwOwogICAgICAgICAgICBpZiAoISgidHJhY2tOdW0iIGluIGJbMV0pKSByZXR1cm4gMCAtIGFbMV0udHJhY2tOdW07CiAgICAgICAgICAgIGlmICghKCJ0cmFja051bSIgaW4gYVsxXSkpIHJldHVybiBiWzFdLnRyYWNrTnVtOwogICAgICAgICAgICByZXR1cm4gYlsxXS50cmFja051bSAtIGFbMV0udHJhY2tOdW07CiAgICAgICAgICB9KS5zbGljZSgwLCA1MCk7CiAgICAgICAgICB0b3BHZW5yZUlkcyA9IHRvcEdlbnJlcy5tYXAoZnVuY3Rpb24gKGdlbnJlKSB7CiAgICAgICAgICAgIHJldHVybiBnZW5yZVswXTsKICAgICAgICAgIH0pOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFRvcFNhdmVkR2VucmVzJywgdG9wR2VucmVJZHMpOwogICAgICAgICAgYXJ0aXN0VHVwbGVzID0gT2JqZWN0LmVudHJpZXMoY29udGV4dC5zdGF0ZS5hcnRpc3RzKTsKICAgICAgICAgIHRvcEFydGlzdHMgPSBhcnRpc3RUdXBsZXMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICBpZiAoISgidHJhY2tzIiBpbiBhWzFdKSAmJiAhKCJ0cmFja3MiIGluIGJbMV0pKSByZXR1cm4gMDsKICAgICAgICAgICAgaWYgKCEoInRyYWNrcyIgaW4gYlsxXSkpIHJldHVybiAwIC0gYVsxXS50cmFja3MubGVuZ3RoOwogICAgICAgICAgICBpZiAoISgidHJhY2tzIiBpbiBhWzFdKSkgcmV0dXJuIGJbMV0udHJhY2tzLmxlbmd0aDsKICAgICAgICAgICAgcmV0dXJuIGJbMV0udHJhY2tzLmxlbmd0aCAtIGFbMV0udHJhY2tzLmxlbmd0aDsKICAgICAgICAgIH0pLnNsaWNlKDAsIDUwKTsKICAgICAgICAgIHRvcEFydGlzdElkcyA9IHRvcEFydGlzdHMubWFwKGZ1bmN0aW9uIChhcnRpc3QpIHsKICAgICAgICAgICAgcmV0dXJuIGFydGlzdFswXTsKICAgICAgICAgIH0pOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFRvcFNhdmVkQXJ0aXN0cycsIHRvcEFydGlzdElkcyk7CiAgICAgICAgICB0ZXJtcyA9IFsnc2hvcnRfdGVybScsICdtZWRpdW1fdGVybScsICdsb25nX3Rlcm0nXTsKICAgICAgICAgIHRvcFBsYXllZCA9IHsKICAgICAgICAgICAgdHJhY2tzOiBbW10sIFtdLCBbXV0sCiAgICAgICAgICAgIGFydGlzdHM6IFtbXSwgW10sIFtdXQogICAgICAgICAgfTsKICAgICAgICAgIGkgPSAwOwoKICAgICAgICBjYXNlIDExOgogICAgICAgICAgaWYgKCEoaSA8IHRlcm1zLmxlbmd0aCkpIHsKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA0OTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxNDsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnZ2V0VG9wVHJhY2tzJywgewogICAgICAgICAgICBsaW1pdDogNTAsCiAgICAgICAgICAgIHRpbWVfcmFuZ2U6IHRlcm1zW2ldCiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICB0b3BUcmFja3MgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgIGogPSAwOwoKICAgICAgICBjYXNlIDE2OgogICAgICAgICAgaWYgKCEoaiA8IHRvcFRyYWNrcy5sZW5ndGgpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghKHRvcFRyYWNrc1tqXS5pZCBpbiBjb250ZXh0LnN0YXRlLnRyYWNrcykpIHsKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgdG9wUGxheWVkLnRyYWNrc1tpXS5wdXNoKHRvcFRyYWNrc1tqXS5pZCk7CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI2OwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjE6CiAgICAgICAgICBfY29udGV4dDcudDAgPSB0b3BQbGF5ZWQudHJhY2tzW2ldOwogICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyNDsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnY29udmVydFRyYWNrT2JqZWN0JywgewogICAgICAgICAgICB0cmFjazogdG9wVHJhY2tzW2pdCiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICBfY29udGV4dDcudDEgPSBfY29udGV4dDcuc2VudDsKCiAgICAgICAgICBfY29udGV4dDcudDAucHVzaC5jYWxsKF9jb250ZXh0Ny50MCwgX2NvbnRleHQ3LnQxKTsKCiAgICAgICAgY2FzZSAyNjoKICAgICAgICAgIGorKzsKICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTY7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOToKICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzE7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuZGlzcGF0Y2goJ2dldFRvcEFydGlzdHMnLCB7CiAgICAgICAgICAgIGxpbWl0OiA1MCwKICAgICAgICAgICAgdGltZV9yYW5nZTogdGVybXNbaV0KICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzMToKICAgICAgICAgIF90b3BBcnRpc3RzID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICBfaiA9IDA7CgogICAgICAgIGNhc2UgMzM6CiAgICAgICAgICBpZiAoIShfaiA8IF90b3BBcnRpc3RzLmxlbmd0aCkpIHsKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA0NjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCEoX3RvcEFydGlzdHNbX2pdLmlkIGluIGNvbnRleHQuc3RhdGUuYXJ0aXN0cykpIHsKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzODsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgdG9wUGxheWVkLmFydGlzdHNbaV0ucHVzaChfdG9wQXJ0aXN0c1tfal0uaWQpOwogICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA0MzsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM4OgogICAgICAgICAgX2NvbnRleHQ3LnQyID0gdG9wUGxheWVkLmFydGlzdHNbaV07CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQxOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdjb252ZXJ0QXJ0aXN0T2JqZWN0JywgX3RvcEFydGlzdHNbX2pdKSk7CgogICAgICAgIGNhc2UgNDE6CiAgICAgICAgICBfY29udGV4dDcudDMgPSBfY29udGV4dDcuc2VudDsKCiAgICAgICAgICBfY29udGV4dDcudDIucHVzaC5jYWxsKF9jb250ZXh0Ny50MiwgX2NvbnRleHQ3LnQzKTsKCiAgICAgICAgY2FzZSA0MzoKICAgICAgICAgIF9qKys7CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDMzOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDY6CiAgICAgICAgICBpKys7CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDExOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDk6CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG9wUGxheWVkVHJhY2tzJywgdG9wUGxheWVkLnRyYWNrcyk7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG9wUGxheWVkQXJ0aXN0cycsIHRvcFBsYXllZC5hcnRpc3RzKTsKCiAgICAgICAgY2FzZSA1MToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKLyoNCnsNCiAgICBpZDogU3RyaW5nLCANCiAgICBuYW1lOiBTdHJpbmcsDQogICAgaW1hZ2U6IFN0cmluZywNCiAgICBhcnRpc3RzOiBBcnJheSwNCn0NCiovCgoKdmFyIGNvbnZlcnRUcmFja09iamVjdCA9IGZ1bmN0aW9uIGNvbnZlcnRUcmFja09iamVjdChjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIHRyYWNrT2JqZWN0OwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gY29udmVydFRyYWNrT2JqZWN0JChfY29udGV4dDgpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHRyYWNrT2JqZWN0ID0ge307CiAgICAgICAgICB0cmFja09iamVjdC5pZCA9IHBheWxvYWQudHJhY2suaWQ7CiAgICAgICAgICB0cmFja09iamVjdC5uYW1lID0gcGF5bG9hZC50cmFjay5uYW1lOwogICAgICAgICAgaWYgKCdhbGJ1bScgaW4gcGF5bG9hZC50cmFjaykgaWYgKCdpbWFnZXMnIGluIHBheWxvYWQudHJhY2suYWxidW0pIGlmIChwYXlsb2FkLnRyYWNrLmFsYnVtLmltYWdlcy5sZW5ndGggPiAwKSB0cmFja09iamVjdC5pbWFnZSA9IHBheWxvYWQudHJhY2suYWxidW0uaW1hZ2VzWzBdLnVybDsKICAgICAgICAgIGlmIChfdHlwZW9mKHBheWxvYWQudHJhY2suYXJ0aXN0c1swXSkgPT0gJ29iamVjdCcpIHRyYWNrT2JqZWN0LmFydGlzdHMgPSBwYXlsb2FkLnRyYWNrLmFydGlzdHMubWFwKGZ1bmN0aW9uIChhcnRpc3QpIHsKICAgICAgICAgICAgcmV0dXJuIGFydGlzdC5pZDsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKCdkYXRlJyBpbiBwYXlsb2FkKSB0cmFja09iamVjdC5kYXRlID0gcGF5bG9hZC5kYXRlOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIHRyYWNrT2JqZWN0KTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKdmFyIGNvbnZlcnRBcnRpc3RPYmplY3QgPSBmdW5jdGlvbiBjb252ZXJ0QXJ0aXN0T2JqZWN0KGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgYXJ0aXN0T2JqZWN0OwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gY29udmVydEFydGlzdE9iamVjdCQoX2NvbnRleHQ5KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBhcnRpc3RPYmplY3QgPSB7fTsKICAgICAgICAgIGFydGlzdE9iamVjdC5pZCA9IHBheWxvYWQuaWQ7CiAgICAgICAgICBhcnRpc3RPYmplY3QubmFtZSA9IHBheWxvYWQubmFtZTsKICAgICAgICAgIGlmICgnaW1hZ2VzJyBpbiBwYXlsb2FkKSBpZiAocGF5bG9hZC5pbWFnZXMubGVuZ3RoID4gMCkgYXJ0aXN0T2JqZWN0LmltYWdlID0gcGF5bG9hZC5pbWFnZXNbMF0udXJsOwogICAgICAgICAgaWYgKCdnZW5yZXMnIGluIHBheWxvYWQpIGFydGlzdE9iamVjdC5nZW5yZXMgPSBwYXlsb2FkLmdlbnJlczsKICAgICAgICAgIGlmICgndHJhY2tzJyBpbiBwYXlsb2FkKSBhcnRpc3RPYmplY3QudHJhY2tzID0gcGF5bG9hZC50cmFja3M7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgYXJ0aXN0T2JqZWN0KTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKdmFyIGdlbmVyYXRlR2VucmUgPSBmdW5jdGlvbiBnZW5lcmF0ZUdlbnJlKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgZ2VucmVPYmplY3Q7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZW5lcmF0ZUdlbnJlJChfY29udGV4dDEwKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGdlbnJlT2JqZWN0ID0ge307CiAgICAgICAgICBnZW5yZU9iamVjdC5uYW1lID0gcGF5bG9hZC5uYW1lOwogICAgICAgICAgZ2VucmVPYmplY3QuYXJ0aXN0cyA9IHBheWxvYWQuYXJ0aXN0czsKICAgICAgICAgIGdlbnJlT2JqZWN0LnRyYWNrTnVtID0gMTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgZ2VucmVPYmplY3QpOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKdmFyIGJhbmdlckNhbGMgPSBmdW5jdGlvbiBiYW5nZXJDYWxjKGNvbnRleHQsIHBheWxvYWQpIHsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGJhbmdlckNhbGMkKF9jb250ZXh0MTEpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCAocGF5bG9hZC50ZW1wbyAtIDk2ICsgcGF5bG9hZC5lbmVyZ3kgKiAxMDAgKyBwYXlsb2FkLmRhbmNlYWJpbGl0eSAqIDUwKSAvIDIxMCk7CgogICAgICAgIGNhc2UgMToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07IC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8gQVBJIENBTExTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vIFN0cmluZwoKCnZhciBnZXRUcmFjayA9IGZ1bmN0aW9uIGdldFRyYWNrKGNvbnRleHQsIHRyYWNrX2lkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0VHJhY2skKF9jb250ZXh0MTIpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQxMi5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRUcmFjayh0cmFja19pZCkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDEyLnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQxMi50MCA9IF9jb250ZXh0MTJbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIEFycmF5IG9mIFN0cmluZ3MKCgp2YXIgZ2V0VHJhY2tzID0gZnVuY3Rpb24gZ2V0VHJhY2tzKGNvbnRleHQsIHRyYWNrX2lkcykgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldFRyYWNrcyQoX2NvbnRleHQxMykgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldFRyYWNrcyh0cmFja19pZHMpKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDEzLnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MTMudDAgPSBfY29udGV4dDEzWyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyBTdHJpbmcKCgp2YXIgZ2V0QXJ0aXN0ID0gZnVuY3Rpb24gZ2V0QXJ0aXN0KGNvbnRleHQsIGlkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0QXJ0aXN0JChfY29udGV4dDE0KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTQucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXJ0aXN0KGlkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxNC5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MTQucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDE0LnQwID0gX2NvbnRleHQxNFsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8gU3RyaW5nCgoKdmFyIGdldEFsYnVtID0gZnVuY3Rpb24gZ2V0QWxidW0oY29udGV4dCwgaWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRBbGJ1bSQoX2NvbnRleHQxNSkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDE1LnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldEFsYnVtKGlkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxNS5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MTUucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDE1LnQwID0gX2NvbnRleHQxNVsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8gQXJyYXkgb2YgU3RyaW5ncwoKCnZhciBnZXRBcnRpc3RzID0gZnVuY3Rpb24gZ2V0QXJ0aXN0cyhjb250ZXh0LCBpZHMpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRBcnRpc3RzJChfY29udGV4dDE2KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTYucHJldiA9IF9jb250ZXh0MTYubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTYucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXJ0aXN0cyhpZHMpKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDE2LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmFydGlzdHMpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDE2LnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQxNi50MCA9IF9jb250ZXh0MTZbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vCgoKdmFyIGdldEFydGlzdFJlbGF0ZWRBcnRpc3RzID0gZnVuY3Rpb24gZ2V0QXJ0aXN0UmVsYXRlZEFydGlzdHMoY29udGV4dCwgaWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRBcnRpc3RSZWxhdGVkQXJ0aXN0cyQoX2NvbnRleHQxNykgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDE3LnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldEFydGlzdFJlbGF0ZWRBcnRpc3RzKGlkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxNy5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5hcnRpc3RzKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQxNy5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MTcudDAgPSBfY29udGV4dDE3WyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyB7bGltaXQ6IE51bWJlciwgb2Zmc2V0OiAwfQoKCnZhciBnZXRQbGF5bGlzdHMgPSBmdW5jdGlvbiBnZXRQbGF5bGlzdHMoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldFBsYXlsaXN0cyQoX2NvbnRleHQxOCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDE4LnByZXYgPSBfY29udGV4dDE4Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDE4LnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldFVzZXJQbGF5bGlzdHMoY29udGV4dC5zdGF0ZS51c2VyLmlkLCBwYXlsb2FkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxOC5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5pdGVtcyk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MTgucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDE4LnQwID0gX2NvbnRleHQxOFsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8gU3RyaW5nCgoKdmFyIGdldFBsYXlsaXN0ID0gZnVuY3Rpb24gZ2V0UGxheWxpc3QoY29udGV4dCwgcGxheWxpc3RJZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldFBsYXlsaXN0JChfY29udGV4dDE5KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTkucHJldiA9IF9jb250ZXh0MTkubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTkucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0UGxheWxpc3QocGxheWxpc3RJZCkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTkuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDE5LnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQxOS50MCA9IF9jb250ZXh0MTlbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOS5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIHtsaW1pdDogTnVtYmVyIDEtNTAsIHRpbWVfcmFuZ2U6ICJsb25nX3Rlcm0iIFNldmVyYWwgeWVhcnMsICJtZWRpdW1fdGVybSIgNiBNb250aHMsICJzaG9ydF90ZXJtIiA0IFdlZWtzLCBvZmZzZXQ6IEluZGV4IG9mIGZpcnN0IGVudHJ5IHRvIHJldHVybn0KCgp2YXIgZ2V0VG9wVHJhY2tzID0gZnVuY3Rpb24gZ2V0VG9wVHJhY2tzKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRUb3BUcmFja3MkKF9jb250ZXh0MjApIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyMC5wcmV2ID0gX2NvbnRleHQyMC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyMC5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjAubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRNeVRvcFRyYWNrcyh7CiAgICAgICAgICAgIGxpbWl0OiBwYXlsb2FkLmxpbWl0LAogICAgICAgICAgICB0aW1lX3JhbmdlOiBwYXlsb2FkLnRpbWVfcmFuZ2UKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIwLnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLml0ZW1zKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQyMC5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MjAudDAgPSBfY29udGV4dDIwWyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjAuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjAuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyB7bGltaXQ6IE51bWJlciAxLTUwLCB0aW1lX3JhbmdlOiAibG9uZ190ZXJtIiBTZXZlcmFsIHllYXJzLCAibWVkaXVtX3Rlcm0iIDYgTW9udGhzLCAic2hvcnRfdGVybSIgNCBXZWVrcywgb2Zmc2V0OiBJbmRleCBvZiBmaXJzdCBlbnRyeSB0byByZXR1cm59CgoKdmFyIGdldFRvcEFydGlzdHMgPSBmdW5jdGlvbiBnZXRUb3BBcnRpc3RzKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRUb3BBcnRpc3RzJChfY29udGV4dDIxKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MjEucHJldiA9IF9jb250ZXh0MjEubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MjEucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDIxLm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0TXlUb3BBcnRpc3RzKHsKICAgICAgICAgICAgbGltaXQ6IHBheWxvYWQubGltaXQsCiAgICAgICAgICAgIHRpbWVfcmFuZ2U6IHBheWxvYWQudGltZV9yYW5nZQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MjEuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuaXRlbXMpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDIxLnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQyMS50MCA9IF9jb250ZXh0MjFbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMS5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIHtsaW1pdDogTnVtYmVyIDEtNTAsIGFmdGVyOiBVbml4IHRpbWVzdGFtcCBNaWxsaXNlY29uZHMsIGJlZm9yZTogVW5peCB0aW1lc3RhbXAgTWlsbGlzZWNvbmRzCgoKdmFyIGdldFJlY2VudGx5UGxheWVkID0gZnVuY3Rpb24gZ2V0UmVjZW50bHlQbGF5ZWQoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldFJlY2VudGx5UGxheWVkJChfY29udGV4dDIyKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MjIucHJldiA9IF9jb250ZXh0MjIubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MjIucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDIyLm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0TXlSZWNlbnRseVBsYXllZFRyYWNrcyh7CiAgICAgICAgICAgIGxpbWl0OiBwYXlsb2FkLmxpbWl0CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyMi5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MjIucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDIyLnQwID0gX2NvbnRleHQyMlsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIyLnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8gQXJyYXkgb2YgU3RyaW5ncwoKCnZhciBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzID0gZnVuY3Rpb24gZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrcyhjb250ZXh0LCB0cmFja19pZHMpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzJChfY29udGV4dDIzKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MjMucHJldiA9IF9jb250ZXh0MjMubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MjMucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDIzLm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrcyh0cmFja19pZHMpKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIzLnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmF1ZGlvX2ZlYXR1cmVzKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQyMy5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MjMudDAgPSBfY29udGV4dDIzWyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjMuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyBTdHJpbmcKCgp2YXIgZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrID0gZnVuY3Rpb24gZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrKGNvbnRleHQsIHRyYWNrX2lkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrJChfY29udGV4dDI0KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MjQucHJldiA9IF9jb250ZXh0MjQubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MjQucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDI0Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrcyhbdHJhY2tfaWRdKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyNC5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjQuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5hdWRpb19mZWF0dXJlc1swXSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MjQucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDI0LnQwID0gX2NvbnRleHQyNFsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDI0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDI0LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8gU3RyaW5nCgoKdmFyIGdldEF1ZGlvQW5hbHlzaXNGb3JUcmFjayA9IGZ1bmN0aW9uIGdldEF1ZGlvQW5hbHlzaXNGb3JUcmFjayhjb250ZXh0LCB0cmFja19pZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEF1ZGlvQW5hbHlzaXNGb3JUcmFjayQoX2NvbnRleHQyNSkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDI1LnByZXYgPSBfY29udGV4dDI1Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDI1LnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldEF1ZGlvQW5hbHlzaXNGb3JUcmFjayh0cmFja19pZCkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MjUuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDI1LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDI1LnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQyNS50MCA9IF9jb250ZXh0MjVbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNS5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIHtzZWVkX3RyYWNrczogW3RyYWNrX2lkXSwgdGFyZ2V0X2RhbmNlYmlsaXR5OiBOVU0sIGxpbWl0OiA2LCBtYXhfKiBtaW5fKn0KCgp2YXIgZ2V0UmVjb21lbmRhdGlvbnMgPSBmdW5jdGlvbiBnZXRSZWNvbWVuZGF0aW9ucyhjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0UmVjb21lbmRhdGlvbnMkKF9jb250ZXh0MjYpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyNi5wcmV2ID0gX2NvbnRleHQyNi5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyNi5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjYubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRSZWNvbW1lbmRhdGlvbnMocGF5bG9hZCkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MjYuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDI2LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDI2LnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQyNi50MCA9IF9jb250ZXh0MjZbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNi5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIHtsaW1pdDogMS01MCwgb2Zmc2V0OiBmaXJzdCBpbmRleH0KCgp2YXIgZ2V0U2F2ZWRUcmFja3MgPSBmdW5jdGlvbiBnZXRTYXZlZFRyYWNrcyhjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0U2F2ZWRUcmFja3MkKF9jb250ZXh0MjcpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyNy5wcmV2ID0gX2NvbnRleHQyNy5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyNy5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjcubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRNeVNhdmVkVHJhY2tzKHsKICAgICAgICAgICAgbGltaXQ6IHBheWxvYWQubGltaXQsCiAgICAgICAgICAgIG9mZnNldDogcGF5bG9hZC5vZmZzZXQKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDI3LnNlbnQ7CgogICAgICAgICAgaWYgKHBheWxvYWQub2Zmc2V0ID09IDApIHsKICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFRvdGFsJywgcmVzcG9uc2UudG90YWwpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfY29udGV4dDI3LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuaXRlbXMpOwoKICAgICAgICBjYXNlIDg6CiAgICAgICAgICBfY29udGV4dDI3LnByZXYgPSA4OwogICAgICAgICAgX2NvbnRleHQyNy50MCA9IF9jb250ZXh0MjdbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNy5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDExOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNy5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDhdXSk7Cn07IC8vIE5vbmUKCgp2YXIgZ2V0VXNlciA9IGZ1bmN0aW9uIGdldFVzZXIoY29udGV4dCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldFVzZXIkKF9jb250ZXh0MjgpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyOC5wcmV2ID0gX2NvbnRleHQyOC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyOC5wcmV2ID0gMDsKCiAgICAgICAgICBpZiAoIWNvbnRleHQuc3RhdGUuaW5pY2lhbGl6ZWQpIHsKICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gNzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gNDsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldE1lKCkpOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mjguc2VudDsKICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDc7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuY29tbWl0KCdzZXRVc2VyRGF0YScsIHJlc3BvbnNlKSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDEyOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgOToKICAgICAgICAgIF9jb250ZXh0MjgucHJldiA9IDk7CiAgICAgICAgICBfY29udGV4dDI4LnQwID0gX2NvbnRleHQyOFsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTI6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgOV1dKTsKfTsgLy8gQXJyYXkgSURzCgoKdmFyIHNlYXJjaFNwb3RpZnkgPSBmdW5jdGlvbiBzZWFyY2hTcG90aWZ5KGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBzZWFyY2hTcG90aWZ5JChfY29udGV4dDI5KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MjkucHJldiA9IF9jb250ZXh0MjkubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MjkucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDI5Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuc2VhcmNoKHBheWxvYWQucXVlcnksIFsndHJhY2snXSwgewogICAgICAgICAgICBsaW1pdDogMjUKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDI5LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOS5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQyOS5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MjkudDAgPSBfY29udGV4dDI5WyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjkuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mjkuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OwoKdmFyIGdldEFydGlzdFRvcFRyYWNrcyA9IGZ1bmN0aW9uIGdldEFydGlzdFRvcFRyYWNrcyhjb250ZXh0LCBpZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEFydGlzdFRvcFRyYWNrcyQoX2NvbnRleHQzMCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDMwLnByZXYgPSBfY29udGV4dDMwLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDMwLnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQzMC5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldEFydGlzdFRvcFRyYWNrcyhpZCwgIlVTIiwge30pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMwLnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLnRyYWNrcyk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MzAucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDMwLnQwID0gX2NvbnRleHQzMFsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBpbmljaWFsaXplR2V0VG9rZW46IGluaWNpYWxpemVHZXRUb2tlbiwKICBpbmljaWFsaXplUGFyc2VUb2tlbjogaW5pY2lhbGl6ZVBhcnNlVG9rZW4sCiAgaW5pY2lhbGl6ZVNldFRva2VuOiBpbmljaWFsaXplU2V0VG9rZW4sCiAgbG9hZExpYnJhcnk6IGxvYWRMaWJyYXJ5LAogIHJldHJpZXZlU2F2ZWRUcmFja3M6IHJldHJpZXZlU2F2ZWRUcmFja3MsCiAgcmV0cmlldmVTYXZlZEFydGlzdHM6IHJldHJpZXZlU2F2ZWRBcnRpc3RzLAogIHVwZGF0ZVRpbWVsaW5lczogdXBkYXRlVGltZWxpbmVzLAogIHByb2Nlc3NBdWRpb0ZlYXR1cmVzOiBwcm9jZXNzQXVkaW9GZWF0dXJlcywKICByZXRyaWV2ZVRvcENoYXJ0czogcmV0cmlldmVUb3BDaGFydHMsCiAgY29udmVydFRyYWNrT2JqZWN0OiBjb252ZXJ0VHJhY2tPYmplY3QsCiAgY29udmVydEFydGlzdE9iamVjdDogY29udmVydEFydGlzdE9iamVjdCwKICBnZW5lcmF0ZUdlbnJlOiBnZW5lcmF0ZUdlbnJlLAogIGJhbmdlckNhbGM6IGJhbmdlckNhbGMsCiAgZ2V0VHJhY2s6IGdldFRyYWNrLAogIGdldFRyYWNrczogZ2V0VHJhY2tzLAogIGdldEFydGlzdDogZ2V0QXJ0aXN0LAogIGdldEFsYnVtOiBnZXRBbGJ1bSwKICBnZXRBcnRpc3RzOiBnZXRBcnRpc3RzLAogIGdldEFydGlzdFJlbGF0ZWRBcnRpc3RzOiBnZXRBcnRpc3RSZWxhdGVkQXJ0aXN0cywKICBnZXRQbGF5bGlzdHM6IGdldFBsYXlsaXN0cywKICBnZXRQbGF5bGlzdDogZ2V0UGxheWxpc3QsCiAgZ2V0VG9wVHJhY2tzOiBnZXRUb3BUcmFja3MsCiAgZ2V0VG9wQXJ0aXN0czogZ2V0VG9wQXJ0aXN0cywKICBnZXRSZWNlbnRseVBsYXllZDogZ2V0UmVjZW50bHlQbGF5ZWQsCiAgZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrczogZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrcywKICBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2s6IGdldEF1ZGlvRmVhdHVyZXNGb3JUcmFjaywKICBnZXRBdWRpb0FuYWx5c2lzRm9yVHJhY2s6IGdldEF1ZGlvQW5hbHlzaXNGb3JUcmFjaywKICBnZXRSZWNvbWVuZGF0aW9uczogZ2V0UmVjb21lbmRhdGlvbnMsCiAgZ2V0U2F2ZWRUcmFja3M6IGdldFNhdmVkVHJhY2tzLAogIGdldFVzZXI6IGdldFVzZXIsCiAgc2VhcmNoU3BvdGlmeTogc2VhcmNoU3BvdGlmeSwKICBnZXRBcnRpc3RUb3BUcmFja3M6IGdldEFydGlzdFRvcFRyYWNrcwp9Ow=="},{"version":3,"sources":["C:/Users/andre/Documents/GitHub/Spotify-Features/front-end4/src/store/actions.js"],"names":["inicializeGetToken","context","authEndpoint","clientId","redirectUri","state","dev","scopes","access_token","window","location","join","inicializeParseToken","token","hash","substring","split","reduce","initial","item","parts","decodeURIComponent","dispatch","inicializeSetToken","spotifyApi","setAccessToken","commit","loadLibrary","limit","offset","console","log","retrieveSavedTracks","payload","tracks","ids","map","track","id","audioFeatures","artistIds","i","length","date","added_at","features","j","artists","push","progress","processed","retrieveSavedArtists","Object","keys","values","sectionIds","splice","newArtists","concat","artistObject","genres","includes","artist","key","value","name","updateTimelines","now","Date","months","getFullYear","getMonth","month","processAudioFeatures","tempo","energy","danceability","banger","index","minchart","chart","maxchart","mode","retrieveTopCharts","genreTuples","entries","topGenres","sort","a","b","trackNum","slice","topGenreIds","genre","artistTuples","topArtists","topArtistIds","terms","topPlayed","time_range","topTracks","convertTrackObject","trackObject","album","images","image","url","convertArtistObject","generateGenre","genreObject","bangerCalc","getTrack","track_id","response","getTracks","track_ids","getArtist","getAlbum","getArtists","getArtistRelatedArtists","getPlaylists","getUserPlaylists","user","items","getPlaylist","playlistId","getTopTracks","getMyTopTracks","getTopArtists","getMyTopArtists","getRecentlyPlayed","getMyRecentlyPlayedTracks","getAudioFeaturesForTracks","audio_features","getAudioFeaturesForTrack","getAudioAnalysisForTrack","getRecomendations","getRecommendations","getSavedTracks","getMySavedTracks","total","getUser","inicialized","getMe","searchSpotify","search","query","getArtistTopTracks"],"mappings":"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","sourcesContent":["////////////////////////////////////////////////////////////////\r\n// INICIALIZATION //////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\n// None\r\nconst inicializeGetToken = (context) => {\r\n    const authEndpoint = 'https://accounts.spotify.com/authorize';\r\n    const clientId = '42903eeb2bf943c4bd4903370f7a93f5';\r\n    let redirectUri = 'http://mymusictaste.org/redirect/';\r\n    if (context.state.dev)\r\n        redirectUri = 'http://localhost:8080/redirect/';\r\n    const scopes = [\r\n        'user-read-recently-played',\r\n        'user-top-read',\r\n        'user-library-read',\r\n        'user-read-email',\r\n        'playlist-read-private',\r\n    ];\r\n    if (!context.state.access_token) {\r\n        window.location = `${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join('%20')}&response_type=token&show_dialog=true`;\r\n    }\r\n};\r\n// None\r\nconst inicializeParseToken = (context) => {\r\n    let token = window.location.hash.substring(1).split('&').reduce(function (initial, item) {\r\n        if (item) {\r\n            let parts = item.split('=');\r\n            initial[parts[0]] = decodeURIComponent(parts[1]);\r\n        }\r\n        return initial;\r\n    }, {});\r\n    context.dispatch('inicializeSetToken', token.access_token);\r\n};\r\n// Token\r\nconst inicializeSetToken = async (context, token) => {\r\n    await context.state.spotifyApi.setAccessToken(token);\r\n    await context.commit('setInicialized', true);\r\n    context.dispatch('getUser');\r\n};\r\n////////////////////////////////////////////////////////////////\r\n// LOAD LIBRARY ////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\nconst loadLibrary = async (context) => {\r\n    await context.dispatch('retrieveSavedTracks', {limit: 50, offset: 0});\r\n    context.commit('averageAudioFeatureValues');\r\n    context.commit('averageMode');\r\n    await context.dispatch('retrieveTopCharts');\r\n    context.commit('setProgressTracks');\r\n    context.commit('setProgressArtists');\r\n    context.commit('setProgressGenres');\r\n    context.commit('setProgressCharts');\r\n    context.commit('setProgressTimelines');\r\n    console.log(context.state);\r\n};\r\nconst retrieveSavedTracks = async (context, payload) => {\r\n    let tracks = await context.dispatch('getSavedTracks', {limit: payload.limit, offset: payload.offset});\r\n    let ids = tracks.map(track => track.track.id);\r\n    let audioFeatures = await context.dispatch('getAudioFeaturesForTracks', ids);\r\n    let artistIds = {};\r\n    for (let i = 0; i < tracks.length; i++) {\r\n        if (tracks[i].track.id in context.state.tracks)\r\n            continue;\r\n        context.dispatch('updateTimelines', {date: tracks[i].added_at, features: audioFeatures[i]});\r\n        context.commit('pushTrack', await context.dispatch('convertTrackObject', {track: tracks[i].track, date: tracks[i].added_at}));\r\n        context.dispatch('processAudioFeatures', audioFeatures[i]);\r\n        for (let j = 0; j < tracks[i].track.artists.length; j++) {\r\n            if (tracks[i].track.artists[j].id in context.state.artists) {\r\n                context.commit('addTrackToArtist', {id: tracks[i].track.artists[j].id, track: tracks[i].track.id});\r\n            }\r\n            else {\r\n                if (!(tracks[i].track.artists[j].id in artistIds)) \r\n                    artistIds[tracks[i].track.artists[j].id] = [tracks[i].track.id];\r\n                else \r\n                    artistIds[tracks[i].track.artists[j].id].push(tracks[i].track.id);\r\n            }\r\n        }\r\n        context.commit('addProcessed');\r\n        console.log(context.state.progress.processed);\r\n    }\r\n    await context.dispatch('retrieveSavedArtists', artistIds);\r\n    if (tracks.length == payload.limit) {\r\n        await context.dispatch('retrieveSavedTracks', {limit: 50, offset: payload.offset + payload.limit});\r\n    }\r\n    return;\r\n};\r\nconst retrieveSavedArtists = async (context, payload) => {\r\n    let ids = Object.keys(payload);\r\n    let tracks = Object.values(payload);\r\n    let artists = [];\r\n    while (ids.length > 0) {\r\n        let sectionIds = ids.splice(0, 50);\r\n        let newArtists = await context.dispatch('getArtists', sectionIds);\r\n        artists = artists.concat(newArtists);\r\n    }\r\n    for (let i = 0; i < artists.length; i++) {\r\n        artists[i].tracks = tracks[i];\r\n        let artistObject = await context.dispatch('convertArtistObject', artists[i]);\r\n        context.commit('pushArtist', artistObject);\r\n        for (let j = 0; j < artists[i].genres.length; j++) {\r\n            if (artists[i].genres[j] in context.state.genres) {\r\n                if (!(context.state.genres[artists[i].genres[j]].artists.includes(artists[i].id)))\r\n                    context.commit('addArtistToGenre', {id: artists[i].genres[j], artist: artists[i].id});\r\n                context.commit('addGenreTrackNum', {key: artists[i].genres[j], value: tracks[i].length});\r\n                continue;\r\n            }\r\n            context.commit('pushGenre', await context.dispatch('generateGenre', {name: artists[i].genres[j], artists: [artists[i].id]}));\r\n        }\r\n    }\r\n};\r\nconst updateTimelines = async (context, payload) => {\r\n    let now = new Date();\r\n    let date = new Date(payload.date);\r\n    let months = (now.getFullYear() - date.getFullYear()) * 12;\r\n    months += now.getMonth();\r\n    months -= date.getMonth();\r\n    context.commit('addDateAddedTimeline', months);\r\n    let keys = Object.keys(context.state.audioFeatures);\r\n    for (let i = 0; i < keys.length; i++) {\r\n        context.commit('addAudioFeatureTimeline', {key: keys[i], month: months, value: payload.features[keys[i]]});\r\n    }\r\n};\r\nconst processAudioFeatures = async (context, payload) => {\r\n    let keys = Object.keys(context.state.audioFeatures);\r\n    payload.banger = await context.dispatch('bangerCalc', {tempo: payload.tempo, energy: payload.energy, danceability: payload.danceability});\r\n    for (let i = 0; i < keys.length; i++) {\r\n        let index = context.state.audioFeatures[keys[i]].minchart.length - 1;\r\n        if (index < 0) \r\n            index = 0;\r\n        if (context.state.audioFeatures[keys[i]].minchart.length < 25 || payload[keys[i]] < context.state.audioFeatures[keys[i]].minchart[index].value) {                \r\n            while (index > 0 && payload[keys[i]] < context.state.audioFeatures[keys[i]].minchart[index].value) {\r\n                index -= 1;\r\n            }\r\n            await context.commit('spliceAudioFeatureExtremes', {key: keys[i], chart: 'minchart', index: index, value: {id: payload.id, value: payload[keys[i]]}});\r\n        }\r\n        index = context.state.audioFeatures[keys[i]].maxchart.length - 1;\r\n        if (index < 0) \r\n            index = 0;\r\n        if (context.state.audioFeatures[keys[i]].maxchart.length < 25 || payload[keys[i]] > context.state.audioFeatures[keys[i]].maxchart[index].value) {\r\n            while (index > 0 && payload[keys[i]] > context.state.audioFeatures[keys[i]].maxchart[index].value)\r\n                index -= 1;\r\n            await context.commit('spliceAudioFeatureExtremes', {key: keys[i], chart: 'maxchart', index: index, value: {id: payload.id, value: payload[keys[i]]}});\r\n        }\r\n        context.commit('addAudioFeatureValue', {key: keys[i], value: payload[keys[i]]});\r\n        context.commit('plotAudioFeatureValue', {key: keys[i], value: payload[keys[i]]});\r\n    }\r\n    context.commit('addMode', payload.mode);\r\n};\r\nconst retrieveTopCharts = async (context) => {\r\n    let genreTuples = Object.entries(context.state.genres);\r\n    let topGenres = genreTuples.sort(function(a,b) {\r\n        if (!(\"trackNum\" in a[1]) && !(\"trackNum\" in b[1]))\r\n            return 0;\r\n        if (!(\"trackNum\" in b[1]))\r\n            return 0 - a[1].trackNum;\r\n        if (!(\"trackNum\" in a[1]))\r\n            return b[1].trackNum;\r\n        return b[1].trackNum - a[1].trackNum;\r\n    }).slice(0,50);\r\n    let topGenreIds = topGenres.map(genre => genre[0]);\r\n    context.commit('setTopSavedGenres', topGenreIds);\r\n    let artistTuples = Object.entries(context.state.artists);\r\n    let topArtists = artistTuples.sort(function(a,b) {\r\n        if (!(\"tracks\" in a[1]) && !(\"tracks\" in b[1]))\r\n            return 0;\r\n        if (!(\"tracks\" in b[1]))\r\n            return 0 - a[1].tracks.length;\r\n        if (!(\"tracks\" in a[1]))\r\n            return b[1].tracks.length;\r\n        return b[1].tracks.length - a[1].tracks.length\r\n    }).slice(0,50);\r\n    let topArtistIds = topArtists.map(artist => artist[0]);\r\n    context.commit('setTopSavedArtists', topArtistIds);\r\n    let terms = ['short_term', 'medium_term', 'long_term'];\r\n    let topPlayed = {\r\n        tracks: [[],[],[]],\r\n        artists: [[],[],[]]\r\n    }\r\n    for (let i = 0; i < terms.length; i++) {\r\n        let topTracks = await context.dispatch('getTopTracks', {limit: 50, time_range: terms[i]});\r\n        for (let j = 0; j < topTracks.length; j++) {\r\n            if (topTracks[j].id in context.state.tracks) \r\n                topPlayed.tracks[i].push(topTracks[j].id);\r\n            else\r\n                topPlayed.tracks[i].push(await context.dispatch('convertTrackObject', {track: topTracks[j]}));\r\n        }\r\n        let topArtists = await context.dispatch('getTopArtists', {limit: 50, time_range: terms[i]});\r\n        for (let j = 0; j < topArtists.length; j++) {\r\n            if (topArtists[j].id in context.state.artists) \r\n                topPlayed.artists[i].push(topArtists[j].id);\r\n            else\r\n                topPlayed.artists[i].push(await context.dispatch('convertArtistObject', topArtists[j]));\r\n        }\r\n    }\r\n    context.commit('setTopPlayedTracks', topPlayed.tracks);\r\n    context.commit('setTopPlayedArtists', topPlayed.artists);\r\n};\r\n/*\r\n{\r\n    id: String, \r\n    name: String,\r\n    image: String,\r\n    artists: Array,\r\n}\r\n*/\r\nconst convertTrackObject = async (context, payload) => {\r\n    let trackObject = {};\r\n    trackObject.id = payload.track.id;\r\n    trackObject.name = payload.track.name;\r\n    if ('album' in payload.track) \r\n        if ('images' in payload.track.album)\r\n            if (payload.track.album.images.length > 0)\r\n                trackObject.image = payload.track.album.images[0].url;\r\n    if (typeof(payload.track.artists[0]) == 'object')\r\n        trackObject.artists = payload.track.artists.map(artist => artist.id);\r\n    if ('date' in payload)\r\n        trackObject.date = payload.date;\r\n    return trackObject;\r\n};\r\nconst convertArtistObject = async (context, payload) => {\r\n    let artistObject = {};\r\n    artistObject.id = payload.id;\r\n    artistObject.name = payload.name;\r\n    if ('images' in payload)\r\n        if (payload.images.length > 0)\r\n            artistObject.image = payload.images[0].url;\r\n    if ('genres' in payload)\r\n        artistObject.genres = payload.genres;\r\n    if ('tracks' in payload)\r\n        artistObject.tracks = payload.tracks;\r\n    return artistObject;\r\n};\r\nconst generateGenre = async (context, payload) => {\r\n    let genreObject = {};\r\n    genreObject.name = payload.name;\r\n    genreObject.artists = payload.artists;\r\n    genreObject.trackNum = 1;\r\n    return genreObject;\r\n};\r\nconst bangerCalc = async (context, payload) => {\r\n    return ((payload.tempo - 96 + (payload.energy * 100) + (payload.danceability*50)) / 210);\r\n};\r\n////////////////////////////////////////////////////////////////\r\n// API CALLS ///////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\n// String\r\nconst getTrack = async (context, track_id) => {\r\n  try {\r\n      let response = await context.state.spotifyApi.getTrack(track_id);\r\n      return response;\r\n  } catch (error) {\r\n      return;\r\n  }\r\n};\r\n// Array of Strings\r\nconst getTracks = async (context, track_ids) => {\r\n  try {\r\n      let response = await context.state.spotifyApi.getTracks(track_ids);\r\n      return response;\r\n  } catch (error) {\r\n      return;\r\n  }\r\n};\r\n// String\r\nconst getArtist = async (context, id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getArtist(id);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n}; \r\n// String\r\nconst getAlbum = async (context, id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getAlbum(id);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n}; \r\n// Array of Strings\r\nconst getArtists = async (context, ids) => {\r\n  try {\r\n      let response = await context.state.spotifyApi.getArtists(ids);\r\n      return response.artists;\r\n  } catch (error) {\r\n      return;\r\n  }\r\n};\r\n//\r\nconst getArtistRelatedArtists = async (context, id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getArtistRelatedArtists(id);\r\n        return response.artists;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n  };\r\n// {limit: Number, offset: 0}\r\nconst getPlaylists = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getUserPlaylists(context.state.user.id, payload);\r\n        return response.items;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// String\r\nconst getPlaylist = async (context, playlistId) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getPlaylist(playlistId);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// {limit: Number 1-50, time_range: \"long_term\" Several years, \"medium_term\" 6 Months, \"short_term\" 4 Weeks, offset: Index of first entry to return}\r\nconst getTopTracks = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getMyTopTracks({limit: payload.limit, time_range: payload.time_range});\r\n        return response.items;\r\n    } catch (error) {\r\n        return;\r\n    }  \r\n};\r\n// {limit: Number 1-50, time_range: \"long_term\" Several years, \"medium_term\" 6 Months, \"short_term\" 4 Weeks, offset: Index of first entry to return}\r\nconst getTopArtists = async (context, payload) => {\r\n    try { \r\n        let response = await context.state.spotifyApi.getMyTopArtists({limit: payload.limit, time_range: payload.time_range});\r\n        return response.items;\r\n    } catch (error) {\r\n        return;\r\n    } \r\n};\r\n// {limit: Number 1-50, after: Unix timestamp Milliseconds, before: Unix timestamp Milliseconds\r\nconst getRecentlyPlayed = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getMyRecentlyPlayedTracks({limit: payload.limit});\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// Array of Strings\r\nconst getAudioFeaturesForTracks = async (context, track_ids) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getAudioFeaturesForTracks(track_ids);\r\n        return response.audio_features;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// String\r\nconst getAudioFeaturesForTrack = async (context, track_id) => {\r\n  try {\r\n      let response = await context.state.spotifyApi.getAudioFeaturesForTracks([track_id]);\r\n      return response.audio_features[0];\r\n  } catch (error) {\r\n      return;\r\n  }\r\n};\r\n// String\r\nconst getAudioAnalysisForTrack = async (context, track_id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getAudioAnalysisForTrack(track_id);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// {seed_tracks: [track_id], target_dancebility: NUM, limit: 6, max_* min_*}\r\nconst getRecomendations = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getRecommendations(payload);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// {limit: 1-50, offset: first index}\r\nconst getSavedTracks = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getMySavedTracks({limit: payload.limit, offset: payload.offset});\r\n        if (payload.offset == 0) {\r\n            context.commit('setTotal', response.total);\r\n        }\r\n        return response.items;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// None\r\nconst getUser = async (context) => {\r\n    try {\r\n      if (context.state.inicialized)\r\n      {\r\n        let response = await context.state.spotifyApi.getMe();\r\n        await context.commit('setUserData', response);\r\n      }\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// Array IDs\r\nconst searchSpotify = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.search(payload.query, ['track'], {limit: 25});\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n\r\nconst getArtistTopTracks = async (context, id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getArtistTopTracks(id, \"US\", {});\r\n        return response.tracks;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n\r\n\r\n\r\nexport default {\r\n    inicializeGetToken,\r\n    inicializeParseToken,\r\n    inicializeSetToken,\r\n\r\n    loadLibrary,\r\n    retrieveSavedTracks,\r\n    retrieveSavedArtists,\r\n    updateTimelines,\r\n    processAudioFeatures,\r\n    retrieveTopCharts,\r\n\r\n    convertTrackObject,\r\n    convertArtistObject,\r\n    generateGenre,\r\n\r\n    bangerCalc,\r\n\r\n    getTrack,\r\n    getTracks,\r\n    getArtist,\r\n    getAlbum,\r\n    getArtists,\r\n    getArtistRelatedArtists,\r\n    getPlaylists,\r\n    getPlaylist,\r\n    getTopTracks,\r\n    getTopArtists,\r\n    getRecentlyPlayed,\r\n    getAudioFeaturesForTracks,\r\n    getAudioFeaturesForTrack,\r\n    getAudioAnalysisForTrack,\r\n    getRecomendations,\r\n    getSavedTracks,\r\n    getUser,\r\n    searchSpotify,\r\n    getArtistTopTracks\r\n};"]}]}