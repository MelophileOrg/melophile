{"remainingRequest":"/Users/andrew/Documents/Github/My-Music-Taste/front-end/node_modules/babel-loader/lib/index.js!/Users/andrew/Documents/Github/My-Music-Taste/front-end/node_modules/eslint-loader/index.js??ref--13-0!/Users/andrew/Documents/Github/My-Music-Taste/front-end/src/store/actions.js","dependencies":[{"path":"/Users/andrew/Documents/Github/My-Music-Taste/front-end/src/store/actions.js","mtime":1576995731821},{"path":"/Users/andrew/Documents/Github/My-Music-Taste/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andrew/Documents/Github/My-Music-Taste/front-end/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/andrew/Documents/Github/My-Music-Taste/front-end/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL2FuZHJldy9Eb2N1bWVudHMvR2l0aHViL015LU11c2ljLVRhc3RlL2Zyb250LWVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vIElOSUNJQUxJWkFUSU9OIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwp2YXIgaW5pY2lhbGl6ZUdldFRva2VuID0gZnVuY3Rpb24gaW5pY2lhbGl6ZUdldFRva2VuKGNvbnRleHQpIHsKICB2YXIgYXV0aEVuZHBvaW50ID0gJ2h0dHBzOi8vYWNjb3VudHMuc3BvdGlmeS5jb20vYXV0aG9yaXplJzsKICB2YXIgY2xpZW50SWQgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0NMSUVOVElEOwogIHZhciByZWRpcmVjdFVyaSA9ICdodHRwOi8vbXltdXNpY3Rhc3RlLm9yZy9yZWRpcmVjdC8nOwogIGlmIChjb250ZXh0LnN0YXRlLmRldikgcmVkaXJlY3RVcmkgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlZGlyZWN0Lyc7CiAgdmFyIHNjb3BlcyA9IFsndXNlci1yZWFkLXJlY2VudGx5LXBsYXllZCcsICd1c2VyLXRvcC1yZWFkJywgJ3VzZXItbGlicmFyeS1yZWFkJywgJ3VzZXItcmVhZC1lbWFpbCcsICdwbGF5bGlzdC1yZWFkLXByaXZhdGUnXTsKCiAgaWYgKCFjb250ZXh0LnN0YXRlLmFjY2Vzc190b2tlbikgewogICAgd2luZG93LmxvY2F0aW9uID0gIiIuY29uY2F0KGF1dGhFbmRwb2ludCwgIj9jbGllbnRfaWQ9IikuY29uY2F0KGNsaWVudElkLCAiJnJlZGlyZWN0X3VyaT0iKS5jb25jYXQocmVkaXJlY3RVcmksICImc2NvcGU9IikuY29uY2F0KHNjb3Blcy5qb2luKCclMjAnKSwgIiZyZXNwb25zZV90eXBlPXRva2VuJnNob3dfZGlhbG9nPXRydWUiKTsKICB9Cn07IC8vIE5vbmUKCgp2YXIgaW5pY2lhbGl6ZVBhcnNlVG9rZW4gPSBmdW5jdGlvbiBpbmljaWFsaXplUGFyc2VUb2tlbihjb250ZXh0KSB7CiAgdmFyIHRva2VuID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpLnNwbGl0KCcmJykucmVkdWNlKGZ1bmN0aW9uIChpbml0aWFsLCBpdGVtKSB7CiAgICBpZiAoaXRlbSkgewogICAgICB2YXIgcGFydHMgPSBpdGVtLnNwbGl0KCc9Jyk7CiAgICAgIGluaXRpYWxbcGFydHNbMF1dID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzFdKTsKICAgIH0KCiAgICByZXR1cm4gaW5pdGlhbDsKICB9LCB7fSk7CiAgY29uc29sZS5sb2codG9rZW4pOwogIGNvbnNvbGUubG9nKHRva2VuLmFjY2Vzc190b2tlbik7CiAgY29udGV4dC5kaXNwYXRjaCgnaW5pY2lhbGl6ZVNldFRva2VuJywgdG9rZW4uYWNjZXNzX3Rva2VuKTsKfTsgLy8gVG9rZW4KCgp2YXIgaW5pY2lhbGl6ZVNldFRva2VuID0gZnVuY3Rpb24gaW5pY2lhbGl6ZVNldFRva2VuKGNvbnRleHQsIHRva2VuKSB7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBpbmljaWFsaXplU2V0VG9rZW4kKF9jb250ZXh0KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5zZXRBY2Nlc3NUb2tlbih0b2tlbikpOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5jb21taXQoJ3NldEluaWNpYWxpemVkJywgdHJ1ZSkpOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoKCdnZXRVc2VyJyk7CgogICAgICAgIGNhc2UgNToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0pOwp9OyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vIExPQUQgTElCUkFSWSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKCnZhciBsb2FkTGlicmFyeSA9IGZ1bmN0aW9uIGxvYWRMaWJyYXJ5KGNvbnRleHQpIHsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGxvYWRMaWJyYXJ5JChfY29udGV4dDIpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGNvbnNvbGUubG9nKCJTRExLRkoiKTsKICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgncmV0cmlldmVTYXZlZFRyYWNrcycsIHsKICAgICAgICAgICAgbGltaXQ6IDUwLAogICAgICAgICAgICBvZmZzZXQ6IDAKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgY29udGV4dC5jb21taXQoJ2F2ZXJhZ2VBdWRpb0ZlYXR1cmVWYWx1ZXMnKTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhdmVyYWdlTW9kZScpOwogICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdyZXRyaWV2ZVRvcENoYXJ0cycpKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFByb2dyZXNzVHJhY2tzJyk7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0UHJvZ3Jlc3NBcnRpc3RzJyk7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0UHJvZ3Jlc3NHZW5yZXMnKTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRQcm9ncmVzc0NoYXJ0cycpOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFByb2dyZXNzVGltZWxpbmVzJyk7CiAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZXh0LnN0YXRlKTsKCiAgICAgICAgY2FzZSAxMzoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCnZhciByZXRyaWV2ZVNhdmVkVHJhY2tzID0gZnVuY3Rpb24gcmV0cmlldmVTYXZlZFRyYWNrcyhjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIHRyYWNrcywgaWRzLCBhdWRpb0ZlYXR1cmVzLCBhcnRpc3RJZHMsIGksIGo7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiByZXRyaWV2ZVNhdmVkVHJhY2tzJChfY29udGV4dDMpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnZ2V0U2F2ZWRUcmFja3MnLCB7CiAgICAgICAgICAgIGxpbWl0OiBwYXlsb2FkLmxpbWl0LAogICAgICAgICAgICBvZmZzZXQ6IHBheWxvYWQub2Zmc2V0CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHRyYWNrcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgaWRzID0gdHJhY2tzLm1hcChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgICAgcmV0dXJuIHRyYWNrLnRyYWNrLmlkOwogICAgICAgICAgfSk7CiAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuZGlzcGF0Y2goJ2dldEF1ZGlvRmVhdHVyZXNGb3JUcmFja3MnLCBpZHMpKTsKCiAgICAgICAgY2FzZSA2OgogICAgICAgICAgYXVkaW9GZWF0dXJlcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgYXJ0aXN0SWRzID0ge307CiAgICAgICAgICBpID0gMDsKCiAgICAgICAgY2FzZSA5OgogICAgICAgICAgaWYgKCEoaSA8IHRyYWNrcy5sZW5ndGgpKSB7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghKHRyYWNrc1tpXS50cmFjay5pZCBpbiBjb250ZXh0LnN0YXRlLnRyYWNrcykpIHsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoImNvbnRpbnVlIiwgMjIpOwoKICAgICAgICBjYXNlIDEyOgogICAgICAgICAgY29udGV4dC5kaXNwYXRjaCgndXBkYXRlVGltZWxpbmVzJywgewogICAgICAgICAgICBkYXRlOiB0cmFja3NbaV0uYWRkZWRfYXQsCiAgICAgICAgICAgIGZlYXR1cmVzOiBhdWRpb0ZlYXR1cmVzW2ldCiAgICAgICAgICB9KTsKICAgICAgICAgIF9jb250ZXh0My50MCA9IGNvbnRleHQ7CiAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE2OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdjb252ZXJ0VHJhY2tPYmplY3QnLCB7CiAgICAgICAgICAgIHRyYWNrOiB0cmFja3NbaV0udHJhY2ssCiAgICAgICAgICAgIGRhdGU6IHRyYWNrc1tpXS5hZGRlZF9hdAogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDE2OgogICAgICAgICAgX2NvbnRleHQzLnQxID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgX2NvbnRleHQzLnQwLmNvbW1pdC5jYWxsKF9jb250ZXh0My50MCwgJ3B1c2hUcmFjaycsIF9jb250ZXh0My50MSk7CgogICAgICAgICAgY29udGV4dC5kaXNwYXRjaCgncHJvY2Vzc0F1ZGlvRmVhdHVyZXMnLCBhdWRpb0ZlYXR1cmVzW2ldKTsKCiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdHJhY2tzW2ldLnRyYWNrLmFydGlzdHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgaWYgKHRyYWNrc1tpXS50cmFjay5hcnRpc3RzW2pdLmlkIGluIGNvbnRleHQuc3RhdGUuYXJ0aXN0cykgewogICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRUcmFja1RvQXJ0aXN0JywgewogICAgICAgICAgICAgICAgaWQ6IHRyYWNrc1tpXS50cmFjay5hcnRpc3RzW2pdLmlkLAogICAgICAgICAgICAgICAgdHJhY2s6IHRyYWNrc1tpXS50cmFjay5pZAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICghKHRyYWNrc1tpXS50cmFjay5hcnRpc3RzW2pdLmlkIGluIGFydGlzdElkcykpIGFydGlzdElkc1t0cmFja3NbaV0udHJhY2suYXJ0aXN0c1tqXS5pZF0gPSBbdHJhY2tzW2ldLnRyYWNrLmlkXTtlbHNlIGFydGlzdElkc1t0cmFja3NbaV0udHJhY2suYXJ0aXN0c1tqXS5pZF0ucHVzaCh0cmFja3NbaV0udHJhY2suaWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgY29udGV4dC5jb21taXQoJ2FkZFByb2Nlc3NlZCcpOwogICAgICAgICAgY29uc29sZS5sb2coY29udGV4dC5zdGF0ZS5wcm9ncmVzcy5wcm9jZXNzZWQpOwoKICAgICAgICBjYXNlIDIyOgogICAgICAgICAgaSsrOwogICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjU6CiAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI3OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdyZXRyaWV2ZVNhdmVkQXJ0aXN0cycsIGFydGlzdElkcykpOwoKICAgICAgICBjYXNlIDI3OgogICAgICAgICAgaWYgKCEodHJhY2tzLmxlbmd0aCA9PSBwYXlsb2FkLmxpbWl0KSkgewogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDMwOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDMwOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdyZXRyaWV2ZVNhdmVkVHJhY2tzJywgewogICAgICAgICAgICBsaW1pdDogNTAsCiAgICAgICAgICAgIG9mZnNldDogcGF5bG9hZC5vZmZzZXQgKyBwYXlsb2FkLmxpbWl0CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMzA6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMzE6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07Cgp2YXIgcmV0cmlldmVTYXZlZEFydGlzdHMgPSBmdW5jdGlvbiByZXRyaWV2ZVNhdmVkQXJ0aXN0cyhjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIGlkcywgdHJhY2tzLCBhcnRpc3RzLCBzZWN0aW9uSWRzLCBuZXdBcnRpc3RzLCBpLCBhcnRpc3RPYmplY3QsIGo7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiByZXRyaWV2ZVNhdmVkQXJ0aXN0cyQoX2NvbnRleHQ0KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBpZHMgPSBPYmplY3Qua2V5cyhwYXlsb2FkKTsKICAgICAgICAgIHRyYWNrcyA9IE9iamVjdC52YWx1ZXMocGF5bG9hZCk7CiAgICAgICAgICBhcnRpc3RzID0gW107CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIGlmICghKGlkcy5sZW5ndGggPiAwKSkgewogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDExOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBzZWN0aW9uSWRzID0gaWRzLnNwbGljZSgwLCA1MCk7CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuZGlzcGF0Y2goJ2dldEFydGlzdHMnLCBzZWN0aW9uSWRzKSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIG5ld0FydGlzdHMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgIGFydGlzdHMgPSBhcnRpc3RzLmNvbmNhdChuZXdBcnRpc3RzKTsKICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDExOgogICAgICAgICAgaSA9IDA7CgogICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBpZiAoIShpIDwgYXJ0aXN0cy5sZW5ndGgpKSB7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFydGlzdHNbaV0udHJhY2tzID0gdHJhY2tzW2ldOwogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnY29udmVydEFydGlzdE9iamVjdCcsIGFydGlzdHNbaV0pKTsKCiAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIGFydGlzdE9iamVjdCA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgY29udGV4dC5jb21taXQoJ3B1c2hBcnRpc3QnLCBhcnRpc3RPYmplY3QpOwogICAgICAgICAgaiA9IDA7CgogICAgICAgIGNhc2UgMTk6CiAgICAgICAgICBpZiAoIShqIDwgYXJ0aXN0c1tpXS5nZW5yZXMubGVuZ3RoKSkgewogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDMyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIShhcnRpc3RzW2ldLmdlbnJlc1tqXSBpbiBjb250ZXh0LnN0YXRlLmdlbnJlcykpIHsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyNDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFjb250ZXh0LnN0YXRlLmdlbnJlc1thcnRpc3RzW2ldLmdlbnJlc1tqXV0uYXJ0aXN0cy5pbmNsdWRlcyhhcnRpc3RzW2ldLmlkKSkgY29udGV4dC5jb21taXQoJ2FkZEFydGlzdFRvR2VucmUnLCB7CiAgICAgICAgICAgIGlkOiBhcnRpc3RzW2ldLmdlbnJlc1tqXSwKICAgICAgICAgICAgYXJ0aXN0OiBhcnRpc3RzW2ldLmlkCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRHZW5yZVRyYWNrTnVtJywgewogICAgICAgICAgICBrZXk6IGFydGlzdHNbaV0uZ2VucmVzW2pdLAogICAgICAgICAgICB2YWx1ZTogdHJhY2tzW2ldLmxlbmd0aAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgiY29udGludWUiLCAyOSk7CgogICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICBfY29udGV4dDQudDAgPSBjb250ZXh0OwogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyNzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnZ2VuZXJhdGVHZW5yZScsIHsKICAgICAgICAgICAgbmFtZTogYXJ0aXN0c1tpXS5nZW5yZXNbal0sCiAgICAgICAgICAgIGFydGlzdHM6IFthcnRpc3RzW2ldLmlkXQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDI3OgogICAgICAgICAgX2NvbnRleHQ0LnQxID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgX2NvbnRleHQ0LnQwLmNvbW1pdC5jYWxsKF9jb250ZXh0NC50MCwgJ3B1c2hHZW5yZScsIF9jb250ZXh0NC50MSk7CgogICAgICAgIGNhc2UgMjk6CiAgICAgICAgICBqKys7CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE5OwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzI6CiAgICAgICAgICBpKys7CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEyOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMzU6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07Cgp2YXIgdXBkYXRlVGltZWxpbmVzID0gZnVuY3Rpb24gdXBkYXRlVGltZWxpbmVzKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgbm93LCBkYXRlLCBtb250aHMsIGtleXMsIGk7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiB1cGRhdGVUaW1lbGluZXMkKF9jb250ZXh0NSkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShwYXlsb2FkLmRhdGUpOwogICAgICAgICAgbW9udGhzID0gKG5vdy5nZXRGdWxsWWVhcigpIC0gZGF0ZS5nZXRGdWxsWWVhcigpKSAqIDEyOwogICAgICAgICAgbW9udGhzICs9IG5vdy5nZXRNb250aCgpOwogICAgICAgICAgbW9udGhzIC09IGRhdGUuZ2V0TW9udGgoKTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGREYXRlQWRkZWRUaW1lbGluZScsIG1vbnRocyk7CiAgICAgICAgICBrZXlzID0gT2JqZWN0LmtleXMoY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzKTsKCiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnYWRkQXVkaW9GZWF0dXJlVGltZWxpbmUnLCB7CiAgICAgICAgICAgICAga2V5OiBrZXlzW2ldLAogICAgICAgICAgICAgIG1vbnRoOiBtb250aHMsCiAgICAgICAgICAgICAgdmFsdWU6IHBheWxvYWQuZmVhdHVyZXNba2V5c1tpXV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgODoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCnZhciBwcm9jZXNzQXVkaW9GZWF0dXJlcyA9IGZ1bmN0aW9uIHByb2Nlc3NBdWRpb0ZlYXR1cmVzKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIga2V5cywgaSwgaW5kZXg7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBwcm9jZXNzQXVkaW9GZWF0dXJlcyQoX2NvbnRleHQ2KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBrZXlzID0gT2JqZWN0LmtleXMoY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzKTsKICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnYmFuZ2VyQ2FsYycsIHsKICAgICAgICAgICAgdGVtcG86IHBheWxvYWQudGVtcG8sCiAgICAgICAgICAgIGVuZXJneTogcGF5bG9hZC5lbmVyZ3ksCiAgICAgICAgICAgIGRhbmNlYWJpbGl0eTogcGF5bG9hZC5kYW5jZWFiaWxpdHkKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcGF5bG9hZC5iYW5nZXIgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgIGkgPSAwOwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgICBpZiAoIShpIDwga2V5cy5sZW5ndGgpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjM7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGluZGV4ID0gY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzW2tleXNbaV1dLm1pbmNoYXJ0Lmxlbmd0aCAtIDE7CiAgICAgICAgICBpZiAoaW5kZXggPCAwKSBpbmRleCA9IDA7CgogICAgICAgICAgaWYgKCEoY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzW2tleXNbaV1dLm1pbmNoYXJ0Lmxlbmd0aCA8IDI1IHx8IHBheWxvYWRba2V5c1tpXV0gPCBjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXNba2V5c1tpXV0ubWluY2hhcnRbaW5kZXhdLnZhbHVlKSkgewogICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICB3aGlsZSAoaW5kZXggPiAwICYmIHBheWxvYWRba2V5c1tpXV0gPCBjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXNba2V5c1tpXV0ubWluY2hhcnRbaW5kZXhdLnZhbHVlKSB7CiAgICAgICAgICAgIGluZGV4IC09IDE7CiAgICAgICAgICB9CgogICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxMjsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5jb21taXQoJ3NwbGljZUF1ZGlvRmVhdHVyZUV4dHJlbWVzJywgewogICAgICAgICAgICBrZXk6IGtleXNbaV0sCiAgICAgICAgICAgIGNoYXJ0OiAnbWluY2hhcnQnLAogICAgICAgICAgICBpbmRleDogaW5kZXgsCiAgICAgICAgICAgIHZhbHVlOiB7CiAgICAgICAgICAgICAgaWQ6IHBheWxvYWQuaWQsCiAgICAgICAgICAgICAgdmFsdWU6IHBheWxvYWRba2V5c1tpXV0KICAgICAgICAgICAgfQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDEyOgogICAgICAgICAgaW5kZXggPSBjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXNba2V5c1tpXV0ubWF4Y2hhcnQubGVuZ3RoIC0gMTsKICAgICAgICAgIGlmIChpbmRleCA8IDApIGluZGV4ID0gMDsKCiAgICAgICAgICBpZiAoIShjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXNba2V5c1tpXV0ubWF4Y2hhcnQubGVuZ3RoIDwgMjUgfHwgcGF5bG9hZFtrZXlzW2ldXSA+IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlc1trZXlzW2ldXS5tYXhjaGFydFtpbmRleF0udmFsdWUpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTg7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHdoaWxlIChpbmRleCA+IDAgJiYgcGF5bG9hZFtrZXlzW2ldXSA+IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlc1trZXlzW2ldXS5tYXhjaGFydFtpbmRleF0udmFsdWUpIHsKICAgICAgICAgICAgaW5kZXggLT0gMTsKICAgICAgICAgIH0KCiAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE4OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmNvbW1pdCgnc3BsaWNlQXVkaW9GZWF0dXJlRXh0cmVtZXMnLCB7CiAgICAgICAgICAgIGtleToga2V5c1tpXSwKICAgICAgICAgICAgY2hhcnQ6ICdtYXhjaGFydCcsCiAgICAgICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICBpZDogcGF5bG9hZC5pZCwKICAgICAgICAgICAgICB2YWx1ZTogcGF5bG9hZFtrZXlzW2ldXQogICAgICAgICAgICB9CiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMTg6CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnYWRkQXVkaW9GZWF0dXJlVmFsdWUnLCB7CiAgICAgICAgICAgIGtleToga2V5c1tpXSwKICAgICAgICAgICAgdmFsdWU6IHBheWxvYWRba2V5c1tpXV0KICAgICAgICAgIH0pOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ3Bsb3RBdWRpb0ZlYXR1cmVWYWx1ZScsIHsKICAgICAgICAgICAga2V5OiBrZXlzW2ldLAogICAgICAgICAgICB2YWx1ZTogcGF5bG9hZFtrZXlzW2ldXQogICAgICAgICAgfSk7CgogICAgICAgIGNhc2UgMjA6CiAgICAgICAgICBpKys7CiAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDU7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyMzoKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRNb2RlJywgcGF5bG9hZC5tb2RlKTsKCiAgICAgICAgY2FzZSAyNDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCnZhciByZXRyaWV2ZVRvcENoYXJ0cyA9IGZ1bmN0aW9uIHJldHJpZXZlVG9wQ2hhcnRzKGNvbnRleHQpIHsKICB2YXIgZ2VucmVUdXBsZXMsIHRvcEdlbnJlcywgdG9wR2VucmVJZHMsIGFydGlzdFR1cGxlcywgdG9wQXJ0aXN0cywgdG9wQXJ0aXN0SWRzLCB0ZXJtcywgdG9wUGxheWVkLCBpLCB0b3BUcmFja3MsIGosIF90b3BBcnRpc3RzLCBfajsKCiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiByZXRyaWV2ZVRvcENoYXJ0cyQoX2NvbnRleHQ3KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBnZW5yZVR1cGxlcyA9IE9iamVjdC5lbnRyaWVzKGNvbnRleHQuc3RhdGUuZ2VucmVzKTsKICAgICAgICAgIHRvcEdlbnJlcyA9IGdlbnJlVHVwbGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgaWYgKCEoInRyYWNrTnVtIiBpbiBhWzFdKSAmJiAhKCJ0cmFja051bSIgaW4gYlsxXSkpIHJldHVybiAwOwogICAgICAgICAgICBpZiAoISgidHJhY2tOdW0iIGluIGJbMV0pKSByZXR1cm4gMCAtIGFbMV0udHJhY2tOdW07CiAgICAgICAgICAgIGlmICghKCJ0cmFja051bSIgaW4gYVsxXSkpIHJldHVybiBiWzFdLnRyYWNrTnVtOwogICAgICAgICAgICByZXR1cm4gYlsxXS50cmFja051bSAtIGFbMV0udHJhY2tOdW07CiAgICAgICAgICB9KS5zbGljZSgwLCA1MCk7CiAgICAgICAgICB0b3BHZW5yZUlkcyA9IHRvcEdlbnJlcy5tYXAoZnVuY3Rpb24gKGdlbnJlKSB7CiAgICAgICAgICAgIHJldHVybiBnZW5yZVswXTsKICAgICAgICAgIH0pOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFRvcFNhdmVkR2VucmVzJywgdG9wR2VucmVJZHMpOwogICAgICAgICAgYXJ0aXN0VHVwbGVzID0gT2JqZWN0LmVudHJpZXMoY29udGV4dC5zdGF0ZS5hcnRpc3RzKTsKICAgICAgICAgIHRvcEFydGlzdHMgPSBhcnRpc3RUdXBsZXMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICBpZiAoISgidHJhY2tzIiBpbiBhWzFdKSAmJiAhKCJ0cmFja3MiIGluIGJbMV0pKSByZXR1cm4gMDsKICAgICAgICAgICAgaWYgKCEoInRyYWNrcyIgaW4gYlsxXSkpIHJldHVybiAwIC0gYVsxXS50cmFja3MubGVuZ3RoOwogICAgICAgICAgICBpZiAoISgidHJhY2tzIiBpbiBhWzFdKSkgcmV0dXJuIGJbMV0udHJhY2tzLmxlbmd0aDsKICAgICAgICAgICAgcmV0dXJuIGJbMV0udHJhY2tzLmxlbmd0aCAtIGFbMV0udHJhY2tzLmxlbmd0aDsKICAgICAgICAgIH0pLnNsaWNlKDAsIDUwKTsKICAgICAgICAgIHRvcEFydGlzdElkcyA9IHRvcEFydGlzdHMubWFwKGZ1bmN0aW9uIChhcnRpc3QpIHsKICAgICAgICAgICAgcmV0dXJuIGFydGlzdFswXTsKICAgICAgICAgIH0pOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFRvcFNhdmVkQXJ0aXN0cycsIHRvcEFydGlzdElkcyk7CiAgICAgICAgICB0ZXJtcyA9IFsnc2hvcnRfdGVybScsICdtZWRpdW1fdGVybScsICdsb25nX3Rlcm0nXTsKICAgICAgICAgIHRvcFBsYXllZCA9IHsKICAgICAgICAgICAgdHJhY2tzOiBbW10sIFtdLCBbXV0sCiAgICAgICAgICAgIGFydGlzdHM6IFtbXSwgW10sIFtdXQogICAgICAgICAgfTsKICAgICAgICAgIGkgPSAwOwoKICAgICAgICBjYXNlIDExOgogICAgICAgICAgaWYgKCEoaSA8IHRlcm1zLmxlbmd0aCkpIHsKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA0OTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxNDsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnZ2V0VG9wVHJhY2tzJywgewogICAgICAgICAgICBsaW1pdDogNTAsCiAgICAgICAgICAgIHRpbWVfcmFuZ2U6IHRlcm1zW2ldCiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICB0b3BUcmFja3MgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgIGogPSAwOwoKICAgICAgICBjYXNlIDE2OgogICAgICAgICAgaWYgKCEoaiA8IHRvcFRyYWNrcy5sZW5ndGgpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghKHRvcFRyYWNrc1tqXS5pZCBpbiBjb250ZXh0LnN0YXRlLnRyYWNrcykpIHsKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgdG9wUGxheWVkLnRyYWNrc1tpXS5wdXNoKHRvcFRyYWNrc1tqXS5pZCk7CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI2OwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjE6CiAgICAgICAgICBfY29udGV4dDcudDAgPSB0b3BQbGF5ZWQudHJhY2tzW2ldOwogICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyNDsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5kaXNwYXRjaCgnY29udmVydFRyYWNrT2JqZWN0JywgewogICAgICAgICAgICB0cmFjazogdG9wVHJhY2tzW2pdCiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICBfY29udGV4dDcudDEgPSBfY29udGV4dDcuc2VudDsKCiAgICAgICAgICBfY29udGV4dDcudDAucHVzaC5jYWxsKF9jb250ZXh0Ny50MCwgX2NvbnRleHQ3LnQxKTsKCiAgICAgICAgY2FzZSAyNjoKICAgICAgICAgIGorKzsKICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTY7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAyOToKICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzE7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuZGlzcGF0Y2goJ2dldFRvcEFydGlzdHMnLCB7CiAgICAgICAgICAgIGxpbWl0OiA1MCwKICAgICAgICAgICAgdGltZV9yYW5nZTogdGVybXNbaV0KICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzMToKICAgICAgICAgIF90b3BBcnRpc3RzID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICBfaiA9IDA7CgogICAgICAgIGNhc2UgMzM6CiAgICAgICAgICBpZiAoIShfaiA8IF90b3BBcnRpc3RzLmxlbmd0aCkpIHsKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA0NjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCEoX3RvcEFydGlzdHNbX2pdLmlkIGluIGNvbnRleHQuc3RhdGUuYXJ0aXN0cykpIHsKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzODsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgdG9wUGxheWVkLmFydGlzdHNbaV0ucHVzaChfdG9wQXJ0aXN0c1tfal0uaWQpOwogICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA0MzsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDM4OgogICAgICAgICAgX2NvbnRleHQ3LnQyID0gdG9wUGxheWVkLmFydGlzdHNbaV07CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQxOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LmRpc3BhdGNoKCdjb252ZXJ0QXJ0aXN0T2JqZWN0JywgX3RvcEFydGlzdHNbX2pdKSk7CgogICAgICAgIGNhc2UgNDE6CiAgICAgICAgICBfY29udGV4dDcudDMgPSBfY29udGV4dDcuc2VudDsKCiAgICAgICAgICBfY29udGV4dDcudDIucHVzaC5jYWxsKF9jb250ZXh0Ny50MiwgX2NvbnRleHQ3LnQzKTsKCiAgICAgICAgY2FzZSA0MzoKICAgICAgICAgIF9qKys7CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDMzOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDY6CiAgICAgICAgICBpKys7CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDExOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgNDk6CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG9wUGxheWVkVHJhY2tzJywgdG9wUGxheWVkLnRyYWNrcyk7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG9wUGxheWVkQXJ0aXN0cycsIHRvcFBsYXllZC5hcnRpc3RzKTsKCiAgICAgICAgY2FzZSA1MToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKLyoKewogICAgaWQ6IFN0cmluZywgCiAgICBuYW1lOiBTdHJpbmcsCiAgICBpbWFnZTogU3RyaW5nLAogICAgYXJ0aXN0czogQXJyYXksCn0KKi8KCgp2YXIgY29udmVydFRyYWNrT2JqZWN0ID0gZnVuY3Rpb24gY29udmVydFRyYWNrT2JqZWN0KGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgdHJhY2tPYmplY3Q7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjb252ZXJ0VHJhY2tPYmplY3QkKF9jb250ZXh0OCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgdHJhY2tPYmplY3QgPSB7fTsKICAgICAgICAgIHRyYWNrT2JqZWN0LmlkID0gcGF5bG9hZC50cmFjay5pZDsKICAgICAgICAgIHRyYWNrT2JqZWN0Lm5hbWUgPSBwYXlsb2FkLnRyYWNrLm5hbWU7CiAgICAgICAgICBpZiAoJ2FsYnVtJyBpbiBwYXlsb2FkLnRyYWNrKSBpZiAoJ2ltYWdlcycgaW4gcGF5bG9hZC50cmFjay5hbGJ1bSkgaWYgKHBheWxvYWQudHJhY2suYWxidW0uaW1hZ2VzLmxlbmd0aCA+IDApIHRyYWNrT2JqZWN0LmltYWdlID0gcGF5bG9hZC50cmFjay5hbGJ1bS5pbWFnZXNbMF0udXJsOwogICAgICAgICAgaWYgKF90eXBlb2YocGF5bG9hZC50cmFjay5hcnRpc3RzWzBdKSA9PSAnb2JqZWN0JykgdHJhY2tPYmplY3QuYXJ0aXN0cyA9IHBheWxvYWQudHJhY2suYXJ0aXN0cy5tYXAoZnVuY3Rpb24gKGFydGlzdCkgewogICAgICAgICAgICByZXR1cm4gYXJ0aXN0LmlkOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoJ2RhdGUnIGluIHBheWxvYWQpIHRyYWNrT2JqZWN0LmRhdGUgPSBwYXlsb2FkLmRhdGU7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgdHJhY2tPYmplY3QpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07Cgp2YXIgY29udmVydEFydGlzdE9iamVjdCA9IGZ1bmN0aW9uIGNvbnZlcnRBcnRpc3RPYmplY3QoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciBhcnRpc3RPYmplY3Q7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjb252ZXJ0QXJ0aXN0T2JqZWN0JChfY29udGV4dDkpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIGFydGlzdE9iamVjdCA9IHt9OwogICAgICAgICAgYXJ0aXN0T2JqZWN0LmlkID0gcGF5bG9hZC5pZDsKICAgICAgICAgIGFydGlzdE9iamVjdC5uYW1lID0gcGF5bG9hZC5uYW1lOwogICAgICAgICAgaWYgKCdpbWFnZXMnIGluIHBheWxvYWQpIGlmIChwYXlsb2FkLmltYWdlcy5sZW5ndGggPiAwKSBhcnRpc3RPYmplY3QuaW1hZ2UgPSBwYXlsb2FkLmltYWdlc1swXS51cmw7CiAgICAgICAgICBpZiAoJ2dlbnJlcycgaW4gcGF5bG9hZCkgYXJ0aXN0T2JqZWN0LmdlbnJlcyA9IHBheWxvYWQuZ2VucmVzOwogICAgICAgICAgaWYgKCd0cmFja3MnIGluIHBheWxvYWQpIGFydGlzdE9iamVjdC50cmFja3MgPSBwYXlsb2FkLnRyYWNrczsKICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBhcnRpc3RPYmplY3QpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07Cgp2YXIgZ2VuZXJhdGVHZW5yZSA9IGZ1bmN0aW9uIGdlbmVyYXRlR2VucmUoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciBnZW5yZU9iamVjdDsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdlbmVyYXRlR2VucmUkKF9jb250ZXh0MTApIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgZ2VucmVPYmplY3QgPSB7fTsKICAgICAgICAgIGdlbnJlT2JqZWN0Lm5hbWUgPSBwYXlsb2FkLm5hbWU7CiAgICAgICAgICBnZW5yZU9iamVjdC5hcnRpc3RzID0gcGF5bG9hZC5hcnRpc3RzOwogICAgICAgICAgZ2VucmVPYmplY3QudHJhY2tOdW0gPSAxOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBnZW5yZU9iamVjdCk7CgogICAgICAgIGNhc2UgNToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSk7Cn07Cgp2YXIgYmFuZ2VyQ2FsYyA9IGZ1bmN0aW9uIGJhbmdlckNhbGMoY29udGV4dCwgcGF5bG9hZCkgewogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gYmFuZ2VyQ2FsYyQoX2NvbnRleHQxMSkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIsIChwYXlsb2FkLnRlbXBvIC0gOTYgKyBwYXlsb2FkLmVuZXJneSAqIDEwMCArIHBheWxvYWQuZGFuY2VhYmlsaXR5ICogNTApIC8gMjEwKTsKCiAgICAgICAgY2FzZSAxOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBBUEkgQ0FMTFMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8gU3RyaW5nCgoKdmFyIGdldFRyYWNrID0gZnVuY3Rpb24gZ2V0VHJhY2soY29udGV4dCwgdHJhY2tfaWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRUcmFjayQoX2NvbnRleHQxMikgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDEyLnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldFRyYWNrKHRyYWNrX2lkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxMi5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MTIucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDEyLnQwID0gX2NvbnRleHQxMlsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8gQXJyYXkgb2YgU3RyaW5ncwoKCnZhciBnZXRUcmFja3MgPSBmdW5jdGlvbiBnZXRUcmFja3MoY29udGV4dCwgdHJhY2tfaWRzKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0VHJhY2tzJChfY29udGV4dDEzKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0VHJhY2tzKHRyYWNrX2lkcykpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTMuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQxMy50MCA9IF9jb250ZXh0MTNbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIFN0cmluZwoKCnZhciBnZXRBcnRpc3QgPSBmdW5jdGlvbiBnZXRBcnRpc3QoY29udGV4dCwgaWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRBcnRpc3QkKF9jb250ZXh0MTQpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQxNC5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRBcnRpc3QoaWQpKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDE0LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQxNC5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MTQudDAgPSBfY29udGV4dDE0WyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyBTdHJpbmcKCgp2YXIgZ2V0QWxidW0gPSBmdW5jdGlvbiBnZXRBbGJ1bShjb250ZXh0LCBpZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEFsYnVtJChfY29udGV4dDE1KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTUucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QWxidW0oaWQpKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDE1LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQxNS5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MTUudDAgPSBfY29udGV4dDE1WyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyBBcnJheSBvZiBTdHJpbmdzCgoKdmFyIGdldEFydGlzdHMgPSBmdW5jdGlvbiBnZXRBcnRpc3RzKGNvbnRleHQsIGlkcykgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEFydGlzdHMkKF9jb250ZXh0MTYpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxNi5wcmV2ID0gX2NvbnRleHQxNi5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQxNi5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRBcnRpc3RzKGlkcykpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTYuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuYXJ0aXN0cyk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MTYucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDE2LnQwID0gX2NvbnRleHQxNlsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8KCgp2YXIgZ2V0QXJ0aXN0UmVsYXRlZEFydGlzdHMgPSBmdW5jdGlvbiBnZXRBcnRpc3RSZWxhdGVkQXJ0aXN0cyhjb250ZXh0LCBpZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEFydGlzdFJlbGF0ZWRBcnRpc3RzJChfY29udGV4dDE3KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTcucHJldiA9IF9jb250ZXh0MTcubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTcucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXJ0aXN0UmVsYXRlZEFydGlzdHMoaWQpKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDE3LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmFydGlzdHMpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDE3LnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQxNy50MCA9IF9jb250ZXh0MTdbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIHtsaW1pdDogTnVtYmVyLCBvZmZzZXQ6IDB9CgoKdmFyIGdldFBsYXlsaXN0cyA9IGZ1bmN0aW9uIGdldFBsYXlsaXN0cyhjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0UGxheWxpc3RzJChfY29udGV4dDE4KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MTgucHJldiA9IF9jb250ZXh0MTgubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MTgucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0VXNlclBsYXlsaXN0cyhjb250ZXh0LnN0YXRlLnVzZXIuaWQsIHBheWxvYWQpKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDE4LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLml0ZW1zKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQxOC5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MTgudDAgPSBfY29udGV4dDE4WyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyBTdHJpbmcKCgp2YXIgZ2V0UGxheWxpc3QgPSBmdW5jdGlvbiBnZXRQbGF5bGlzdChjb250ZXh0LCBwbGF5bGlzdElkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0UGxheWxpc3QkKF9jb250ZXh0MTkpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQxOS5wcmV2ID0gX2NvbnRleHQxOS5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQxOS5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MTkubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRQbGF5bGlzdChwbGF5bGlzdElkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxOS5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTkuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MTkucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDE5LnQwID0gX2NvbnRleHQxOVsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8ge2xpbWl0OiBOdW1iZXIgMS01MCwgdGltZV9yYW5nZTogImxvbmdfdGVybSIgU2V2ZXJhbCB5ZWFycywgIm1lZGl1bV90ZXJtIiA2IE1vbnRocywgInNob3J0X3Rlcm0iIDQgV2Vla3MsIG9mZnNldDogSW5kZXggb2YgZmlyc3QgZW50cnkgdG8gcmV0dXJufQoKCnZhciBnZXRUb3BUcmFja3MgPSBmdW5jdGlvbiBnZXRUb3BUcmFja3MoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldFRvcFRyYWNrcyQoX2NvbnRleHQyMCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDIwLnByZXYgPSBfY29udGV4dDIwLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDIwLnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQyMC5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldE15VG9wVHJhY2tzKHsKICAgICAgICAgICAgbGltaXQ6IHBheWxvYWQubGltaXQsCiAgICAgICAgICAgIHRpbWVfcmFuZ2U6IHBheWxvYWQudGltZV9yYW5nZQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MjAuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIwLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuaXRlbXMpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDIwLnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQyMC50MCA9IF9jb250ZXh0MjBbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIHtsaW1pdDogTnVtYmVyIDEtNTAsIHRpbWVfcmFuZ2U6ICJsb25nX3Rlcm0iIFNldmVyYWwgeWVhcnMsICJtZWRpdW1fdGVybSIgNiBNb250aHMsICJzaG9ydF90ZXJtIiA0IFdlZWtzLCBvZmZzZXQ6IEluZGV4IG9mIGZpcnN0IGVudHJ5IHRvIHJldHVybn0KCgp2YXIgZ2V0VG9wQXJ0aXN0cyA9IGZ1bmN0aW9uIGdldFRvcEFydGlzdHMoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldFRvcEFydGlzdHMkKF9jb250ZXh0MjEpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyMS5wcmV2ID0gX2NvbnRleHQyMS5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyMS5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjEubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRNeVRvcEFydGlzdHMoewogICAgICAgICAgICBsaW1pdDogcGF5bG9hZC5saW1pdCwKICAgICAgICAgICAgdGltZV9yYW5nZTogcGF5bG9hZC50aW1lX3JhbmdlCiAgICAgICAgICB9KSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyMS5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjEuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5pdGVtcyk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MjEucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDIxLnQwID0gX2NvbnRleHQyMVsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8ge2xpbWl0OiBOdW1iZXIgMS01MCwgYWZ0ZXI6IFVuaXggdGltZXN0YW1wIE1pbGxpc2Vjb25kcywgYmVmb3JlOiBVbml4IHRpbWVzdGFtcCBNaWxsaXNlY29uZHMKCgp2YXIgZ2V0UmVjZW50bHlQbGF5ZWQgPSBmdW5jdGlvbiBnZXRSZWNlbnRseVBsYXllZChjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0UmVjZW50bHlQbGF5ZWQkKF9jb250ZXh0MjIpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyMi5wcmV2ID0gX2NvbnRleHQyMi5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyMi5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjIubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRNeVJlY2VudGx5UGxheWVkVHJhY2tzKHsKICAgICAgICAgICAgbGltaXQ6IHBheWxvYWQubGltaXQKICAgICAgICAgIH0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIyLnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQyMi5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MjIudDAgPSBfY29udGV4dDIyWyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyBBcnJheSBvZiBTdHJpbmdzCgoKdmFyIGdldEF1ZGlvRmVhdHVyZXNGb3JUcmFja3MgPSBmdW5jdGlvbiBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzKGNvbnRleHQsIHRyYWNrX2lkcykgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIGdldEF1ZGlvRmVhdHVyZXNGb3JUcmFja3MkKF9jb250ZXh0MjMpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyMy5wcmV2ID0gX2NvbnRleHQyMy5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyMy5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjMubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzKHRyYWNrX2lkcykpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MjMuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDIzLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuYXVkaW9fZmVhdHVyZXMpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDIzLnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQyMy50MCA9IF9jb250ZXh0MjNbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07IC8vIFN0cmluZwoKCnZhciBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2sgPSBmdW5jdGlvbiBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2soY29udGV4dCwgdHJhY2tfaWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2skKF9jb250ZXh0MjQpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyNC5wcmV2ID0gX2NvbnRleHQyNC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyNC5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjQubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzKFt0cmFja19pZF0pKTsKCiAgICAgICAgY2FzZSAzOgogICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDI0LnNlbnQ7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmF1ZGlvX2ZlYXR1cmVzWzBdKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQyNC5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MjQudDAgPSBfY29udGV4dDI0WyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjQuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OyAvLyBTdHJpbmcKCgp2YXIgZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrID0gZnVuY3Rpb24gZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrKGNvbnRleHQsIHRyYWNrX2lkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrJChfY29udGV4dDI1KSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MjUucHJldiA9IF9jb250ZXh0MjUubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MjUucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDI1Lm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrKHRyYWNrX2lkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyNS5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjUuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MjUucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDI1LnQwID0gX2NvbnRleHQyNVsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDI1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDI1LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8ge3NlZWRfdHJhY2tzOiBbdHJhY2tfaWRdLCB0YXJnZXRfZGFuY2ViaWxpdHk6IE5VTSwgbGltaXQ6IDYsIG1heF8qIG1pbl8qfQoKCnZhciBnZXRSZWNvbWVuZGF0aW9ucyA9IGZ1bmN0aW9uIGdldFJlY29tZW5kYXRpb25zKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRSZWNvbWVuZGF0aW9ucyQoX2NvbnRleHQyNikgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDI2LnByZXYgPSBfY29udGV4dDI2Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDI2LnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQyNi5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldFJlY29tbWVuZGF0aW9ucyhwYXlsb2FkKSk7CgogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyNi5zZW50OwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjYuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgIGNhc2UgNzoKICAgICAgICAgIF9jb250ZXh0MjYucHJldiA9IDc7CiAgICAgICAgICBfY29udGV4dDI2LnQwID0gX2NvbnRleHQyNlsiY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDI2LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTA6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDI2LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgN11dKTsKfTsgLy8ge2xpbWl0OiAxLTUwLCBvZmZzZXQ6IGZpcnN0IGluZGV4fQoKCnZhciBnZXRTYXZlZFRyYWNrcyA9IGZ1bmN0aW9uIGdldFNhdmVkVHJhY2tzKGNvbnRleHQsIHBheWxvYWQpIHsKICB2YXIgcmVzcG9uc2U7CiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBnZXRTYXZlZFRyYWNrcyQoX2NvbnRleHQyNykgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDI3LnByZXYgPSBfY29udGV4dDI3Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDI3LnByZXYgPSAwOwogICAgICAgICAgX2NvbnRleHQyNy5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldE15U2F2ZWRUcmFja3MoewogICAgICAgICAgICBsaW1pdDogcGF5bG9hZC5saW1pdCwKICAgICAgICAgICAgb2Zmc2V0OiBwYXlsb2FkLm9mZnNldAogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mjcuc2VudDsKCiAgICAgICAgICBpZiAocGF5bG9hZC5vZmZzZXQgPT0gMCkgewogICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG90YWwnLCByZXNwb25zZS50b3RhbCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjcuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5pdGVtcyk7CgogICAgICAgIGNhc2UgODoKICAgICAgICAgIF9jb250ZXh0MjcucHJldiA9IDg7CiAgICAgICAgICBfY29udGV4dDI3LnQwID0gX2NvbnRleHQyN1siY2F0Y2giXSgwKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDI3LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgIGNhc2UgMTE6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDI3LnN0b3AoKTsKICAgICAgfQogICAgfQogIH0sIG51bGwsIG51bGwsIFtbMCwgOF1dKTsKfTsgLy8gTm9uZQoKCnZhciBnZXRVc2VyID0gZnVuY3Rpb24gZ2V0VXNlcihjb250ZXh0KSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0VXNlciQoX2NvbnRleHQyOCkgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDI4LnByZXYgPSBfY29udGV4dDI4Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBfY29udGV4dDI4LnByZXYgPSAwOwoKICAgICAgICAgIGlmICghY29udGV4dC5zdGF0ZS5pbmljaWFsaXplZCkgewogICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSA3OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSA0OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0TWUoKSk7CgogICAgICAgIGNhc2UgNDoKICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyOC5zZW50OwogICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gNzsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoY29udGV4dC5jb21taXQoJ3NldFVzZXJEYXRhJywgcmVzcG9uc2UpKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gMTI7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA5OgogICAgICAgICAgX2NvbnRleHQyOC5wcmV2ID0gOTsKICAgICAgICAgIF9jb250ZXh0MjgudDAgPSBfY29udGV4dDI4WyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMjoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mjguc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA5XV0pOwp9OyAvLyBBcnJheSBJRHMKCgp2YXIgc2VhcmNoU3BvdGlmeSA9IGZ1bmN0aW9uIHNlYXJjaFNwb3RpZnkoY29udGV4dCwgcGF5bG9hZCkgewogIHZhciByZXNwb25zZTsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmFzeW5jKGZ1bmN0aW9uIHNlYXJjaFNwb3RpZnkkKF9jb250ZXh0MjkpIHsKICAgIHdoaWxlICgxKSB7CiAgICAgIHN3aXRjaCAoX2NvbnRleHQyOS5wcmV2ID0gX2NvbnRleHQyOS5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgX2NvbnRleHQyOS5wcmV2ID0gMDsKICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5zZWFyY2gocGF5bG9hZC5xdWVyeSwgWyd0cmFjayddLCB7CiAgICAgICAgICAgIGxpbWl0OiAyNQogICAgICAgICAgfSkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mjkuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDI5LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBfY29udGV4dDI5LnByZXYgPSA3OwogICAgICAgICAgX2NvbnRleHQyOS50MCA9IF9jb250ZXh0MjlbImNhdGNoIl0oMCk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOS5zdG9wKCk7CiAgICAgIH0KICAgIH0KICB9LCBudWxsLCBudWxsLCBbWzAsIDddXSk7Cn07Cgp2YXIgZ2V0QXJ0aXN0VG9wVHJhY2tzID0gZnVuY3Rpb24gZ2V0QXJ0aXN0VG9wVHJhY2tzKGNvbnRleHQsIGlkKSB7CiAgdmFyIHJlc3BvbnNlOwogIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gZ2V0QXJ0aXN0VG9wVHJhY2tzJChfY29udGV4dDMwKSB7CiAgICB3aGlsZSAoMSkgewogICAgICBzd2l0Y2ggKF9jb250ZXh0MzAucHJldiA9IF9jb250ZXh0MzAubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIF9jb250ZXh0MzAucHJldiA9IDA7CiAgICAgICAgICBfY29udGV4dDMwLm5leHQgPSAzOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcChjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXJ0aXN0VG9wVHJhY2tzKGlkLCAiVVMiLCB7fSkpOwoKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MzAuc2VudDsKICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UudHJhY2tzKTsKCiAgICAgICAgY2FzZSA3OgogICAgICAgICAgX2NvbnRleHQzMC5wcmV2ID0gNzsKICAgICAgICAgIF9jb250ZXh0MzAudDAgPSBfY29udGV4dDMwWyJjYXRjaCJdKDApOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzAuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgY2FzZSAxMDoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzAuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgbnVsbCwgbnVsbCwgW1swLCA3XV0pOwp9OwoKZXhwb3J0IGRlZmF1bHQgewogIGluaWNpYWxpemVHZXRUb2tlbjogaW5pY2lhbGl6ZUdldFRva2VuLAogIGluaWNpYWxpemVQYXJzZVRva2VuOiBpbmljaWFsaXplUGFyc2VUb2tlbiwKICBpbmljaWFsaXplU2V0VG9rZW46IGluaWNpYWxpemVTZXRUb2tlbiwKICBsb2FkTGlicmFyeTogbG9hZExpYnJhcnksCiAgcmV0cmlldmVTYXZlZFRyYWNrczogcmV0cmlldmVTYXZlZFRyYWNrcywKICByZXRyaWV2ZVNhdmVkQXJ0aXN0czogcmV0cmlldmVTYXZlZEFydGlzdHMsCiAgdXBkYXRlVGltZWxpbmVzOiB1cGRhdGVUaW1lbGluZXMsCiAgcHJvY2Vzc0F1ZGlvRmVhdHVyZXM6IHByb2Nlc3NBdWRpb0ZlYXR1cmVzLAogIHJldHJpZXZlVG9wQ2hhcnRzOiByZXRyaWV2ZVRvcENoYXJ0cywKICBjb252ZXJ0VHJhY2tPYmplY3Q6IGNvbnZlcnRUcmFja09iamVjdCwKICBjb252ZXJ0QXJ0aXN0T2JqZWN0OiBjb252ZXJ0QXJ0aXN0T2JqZWN0LAogIGdlbmVyYXRlR2VucmU6IGdlbmVyYXRlR2VucmUsCiAgYmFuZ2VyQ2FsYzogYmFuZ2VyQ2FsYywKICBnZXRUcmFjazogZ2V0VHJhY2ssCiAgZ2V0VHJhY2tzOiBnZXRUcmFja3MsCiAgZ2V0QXJ0aXN0OiBnZXRBcnRpc3QsCiAgZ2V0QWxidW06IGdldEFsYnVtLAogIGdldEFydGlzdHM6IGdldEFydGlzdHMsCiAgZ2V0QXJ0aXN0UmVsYXRlZEFydGlzdHM6IGdldEFydGlzdFJlbGF0ZWRBcnRpc3RzLAogIGdldFBsYXlsaXN0czogZ2V0UGxheWxpc3RzLAogIGdldFBsYXlsaXN0OiBnZXRQbGF5bGlzdCwKICBnZXRUb3BUcmFja3M6IGdldFRvcFRyYWNrcywKICBnZXRUb3BBcnRpc3RzOiBnZXRUb3BBcnRpc3RzLAogIGdldFJlY2VudGx5UGxheWVkOiBnZXRSZWNlbnRseVBsYXllZCwKICBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzOiBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzLAogIGdldEF1ZGlvRmVhdHVyZXNGb3JUcmFjazogZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrLAogIGdldEF1ZGlvQW5hbHlzaXNGb3JUcmFjazogZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrLAogIGdldFJlY29tZW5kYXRpb25zOiBnZXRSZWNvbWVuZGF0aW9ucywKICBnZXRTYXZlZFRyYWNrczogZ2V0U2F2ZWRUcmFja3MsCiAgZ2V0VXNlcjogZ2V0VXNlciwKICBzZWFyY2hTcG90aWZ5OiBzZWFyY2hTcG90aWZ5LAogIGdldEFydGlzdFRvcFRyYWNrczogZ2V0QXJ0aXN0VG9wVHJhY2tzCn07"},{"version":3,"sources":["/Users/andrew/Documents/Github/My-Music-Taste/front-end/src/store/actions.js"],"names":["inicializeGetToken","context","authEndpoint","clientId","process","env","VUE_APP_CLIENTID","redirectUri","state","dev","scopes","access_token","window","location","join","inicializeParseToken","token","hash","substring","split","reduce","initial","item","parts","decodeURIComponent","console","log","dispatch","inicializeSetToken","spotifyApi","setAccessToken","commit","loadLibrary","limit","offset","retrieveSavedTracks","payload","tracks","ids","map","track","id","audioFeatures","artistIds","i","length","date","added_at","features","j","artists","push","progress","processed","retrieveSavedArtists","Object","keys","values","sectionIds","splice","newArtists","concat","artistObject","genres","includes","artist","key","value","name","updateTimelines","now","Date","months","getFullYear","getMonth","month","processAudioFeatures","tempo","energy","danceability","banger","index","minchart","chart","maxchart","mode","retrieveTopCharts","genreTuples","entries","topGenres","sort","a","b","trackNum","slice","topGenreIds","genre","artistTuples","topArtists","topArtistIds","terms","topPlayed","time_range","topTracks","convertTrackObject","trackObject","album","images","image","url","convertArtistObject","generateGenre","genreObject","bangerCalc","getTrack","track_id","response","getTracks","track_ids","getArtist","getAlbum","getArtists","getArtistRelatedArtists","getPlaylists","getUserPlaylists","user","items","getPlaylist","playlistId","getTopTracks","getMyTopTracks","getTopArtists","getMyTopArtists","getRecentlyPlayed","getMyRecentlyPlayedTracks","getAudioFeaturesForTracks","audio_features","getAudioFeaturesForTrack","getAudioAnalysisForTrack","getRecomendations","getRecommendations","getSavedTracks","getMySavedTracks","total","getUser","inicialized","getMe","searchSpotify","search","query","getArtistTopTracks"],"mappings":"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","sourcesContent":["////////////////////////////////////////////////////////////////\n// INICIALIZATION //////////////////////////////////////////////\n////////////////////////////////////////////////////////////////\n\n\nconst inicializeGetToken = (context) => {\n    const authEndpoint = 'https://accounts.spotify.com/authorize';\n    const clientId = process.env.VUE_APP_CLIENTID;\n    let redirectUri = 'http://mymusictaste.org/redirect/';\n    if (context.state.dev)\n        redirectUri = 'http://localhost:8080/redirect/';\n    const scopes = [\n        'user-read-recently-played',\n        'user-top-read',\n        'user-library-read',\n        'user-read-email',\n        'playlist-read-private',\n    ];\n    if (!context.state.access_token) {\n        window.location = `${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join('%20')}&response_type=token&show_dialog=true`;\n    }\n};\n// None\nconst inicializeParseToken = (context) => {\n    let token = window.location.hash.substring(1).split('&').reduce(function (initial, item) {\n        if (item) {\n            let parts = item.split('=');\n            initial[parts[0]] = decodeURIComponent(parts[1]);\n        }\n        return initial;\n    }, {});\n    console.log(token);\n    console.log(token.access_token);\n    context.dispatch('inicializeSetToken', token.access_token);\n};\n// Token\nconst inicializeSetToken = async (context, token) => {\n    await context.state.spotifyApi.setAccessToken(token);\n    await context.commit('setInicialized', true);\n    context.dispatch('getUser');\n};\n////////////////////////////////////////////////////////////////\n// LOAD LIBRARY ////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////\nconst loadLibrary = async (context) => {\n    console.log(\"SDLKFJ\");\n    await context.dispatch('retrieveSavedTracks', {limit: 50, offset: 0});\n    context.commit('averageAudioFeatureValues');\n    context.commit('averageMode');\n    await context.dispatch('retrieveTopCharts');\n    context.commit('setProgressTracks');\n    context.commit('setProgressArtists');\n    context.commit('setProgressGenres');\n    context.commit('setProgressCharts');\n    context.commit('setProgressTimelines');\n    console.log(context.state);\n};\nconst retrieveSavedTracks = async (context, payload) => {\n    let tracks = await context.dispatch('getSavedTracks', {limit: payload.limit, offset: payload.offset});\n    let ids = tracks.map(track => track.track.id);\n    let audioFeatures = await context.dispatch('getAudioFeaturesForTracks', ids);\n    let artistIds = {};\n    for (let i = 0; i < tracks.length; i++) {\n        if (tracks[i].track.id in context.state.tracks)\n            continue;\n        context.dispatch('updateTimelines', {date: tracks[i].added_at, features: audioFeatures[i]});\n        context.commit('pushTrack', await context.dispatch('convertTrackObject', {track: tracks[i].track, date: tracks[i].added_at}));\n        context.dispatch('processAudioFeatures', audioFeatures[i]);\n        for (let j = 0; j < tracks[i].track.artists.length; j++) {\n            if (tracks[i].track.artists[j].id in context.state.artists) {\n                context.commit('addTrackToArtist', {id: tracks[i].track.artists[j].id, track: tracks[i].track.id});\n            }\n            else {\n                if (!(tracks[i].track.artists[j].id in artistIds)) \n                    artistIds[tracks[i].track.artists[j].id] = [tracks[i].track.id];\n                else \n                    artistIds[tracks[i].track.artists[j].id].push(tracks[i].track.id);\n            }\n        }\n        context.commit('addProcessed');\n        console.log(context.state.progress.processed);\n    }\n    await context.dispatch('retrieveSavedArtists', artistIds);\n    if (tracks.length == payload.limit) {\n        await context.dispatch('retrieveSavedTracks', {limit: 50, offset: payload.offset + payload.limit});\n    }\n    return;\n};\nconst retrieveSavedArtists = async (context, payload) => {\n    let ids = Object.keys(payload);\n    let tracks = Object.values(payload);\n    let artists = [];\n    while (ids.length > 0) {\n        let sectionIds = ids.splice(0, 50);\n        let newArtists = await context.dispatch('getArtists', sectionIds);\n        artists = artists.concat(newArtists);\n    }\n    for (let i = 0; i < artists.length; i++) {\n        artists[i].tracks = tracks[i];\n        let artistObject = await context.dispatch('convertArtistObject', artists[i]);\n        context.commit('pushArtist', artistObject);\n        for (let j = 0; j < artists[i].genres.length; j++) {\n            if (artists[i].genres[j] in context.state.genres) {\n                if (!(context.state.genres[artists[i].genres[j]].artists.includes(artists[i].id)))\n                    context.commit('addArtistToGenre', {id: artists[i].genres[j], artist: artists[i].id});\n                context.commit('addGenreTrackNum', {key: artists[i].genres[j], value: tracks[i].length});\n                continue;\n            }\n            context.commit('pushGenre', await context.dispatch('generateGenre', {name: artists[i].genres[j], artists: [artists[i].id]}));\n        }\n    }\n};\nconst updateTimelines = async (context, payload) => {\n    let now = new Date();\n    let date = new Date(payload.date);\n    let months = (now.getFullYear() - date.getFullYear()) * 12;\n    months += now.getMonth();\n    months -= date.getMonth();\n    context.commit('addDateAddedTimeline', months);\n    let keys = Object.keys(context.state.audioFeatures);\n    for (let i = 0; i < keys.length; i++) {\n        context.commit('addAudioFeatureTimeline', {key: keys[i], month: months, value: payload.features[keys[i]]});\n    }\n};\nconst processAudioFeatures = async (context, payload) => {\n    let keys = Object.keys(context.state.audioFeatures);\n    payload.banger = await context.dispatch('bangerCalc', {tempo: payload.tempo, energy: payload.energy, danceability: payload.danceability});\n    for (let i = 0; i < keys.length; i++) {\n        let index = context.state.audioFeatures[keys[i]].minchart.length - 1;\n        if (index < 0) \n            index = 0;\n        if (context.state.audioFeatures[keys[i]].minchart.length < 25 || payload[keys[i]] < context.state.audioFeatures[keys[i]].minchart[index].value) {                \n            while (index > 0 && payload[keys[i]] < context.state.audioFeatures[keys[i]].minchart[index].value) {\n                index -= 1;\n            }\n            await context.commit('spliceAudioFeatureExtremes', {key: keys[i], chart: 'minchart', index: index, value: {id: payload.id, value: payload[keys[i]]}});\n        }\n        index = context.state.audioFeatures[keys[i]].maxchart.length - 1;\n        if (index < 0) \n            index = 0;\n        if (context.state.audioFeatures[keys[i]].maxchart.length < 25 || payload[keys[i]] > context.state.audioFeatures[keys[i]].maxchart[index].value) {\n            while (index > 0 && payload[keys[i]] > context.state.audioFeatures[keys[i]].maxchart[index].value)\n                index -= 1;\n            await context.commit('spliceAudioFeatureExtremes', {key: keys[i], chart: 'maxchart', index: index, value: {id: payload.id, value: payload[keys[i]]}});\n        }\n        context.commit('addAudioFeatureValue', {key: keys[i], value: payload[keys[i]]});\n        context.commit('plotAudioFeatureValue', {key: keys[i], value: payload[keys[i]]});\n    }\n    context.commit('addMode', payload.mode);\n};\nconst retrieveTopCharts = async (context) => {\n    let genreTuples = Object.entries(context.state.genres);\n    let topGenres = genreTuples.sort(function(a,b) {\n        if (!(\"trackNum\" in a[1]) && !(\"trackNum\" in b[1]))\n            return 0;\n        if (!(\"trackNum\" in b[1]))\n            return 0 - a[1].trackNum;\n        if (!(\"trackNum\" in a[1]))\n            return b[1].trackNum;\n        return b[1].trackNum - a[1].trackNum;\n    }).slice(0,50);\n    let topGenreIds = topGenres.map(genre => genre[0]);\n    context.commit('setTopSavedGenres', topGenreIds);\n    let artistTuples = Object.entries(context.state.artists);\n    let topArtists = artistTuples.sort(function(a,b) {\n        if (!(\"tracks\" in a[1]) && !(\"tracks\" in b[1]))\n            return 0;\n        if (!(\"tracks\" in b[1]))\n            return 0 - a[1].tracks.length;\n        if (!(\"tracks\" in a[1]))\n            return b[1].tracks.length;\n        return b[1].tracks.length - a[1].tracks.length\n    }).slice(0,50);\n    let topArtistIds = topArtists.map(artist => artist[0]);\n    context.commit('setTopSavedArtists', topArtistIds);\n    let terms = ['short_term', 'medium_term', 'long_term'];\n    let topPlayed = {\n        tracks: [[],[],[]],\n        artists: [[],[],[]]\n    }\n    for (let i = 0; i < terms.length; i++) {\n        let topTracks = await context.dispatch('getTopTracks', {limit: 50, time_range: terms[i]});\n        for (let j = 0; j < topTracks.length; j++) {\n            if (topTracks[j].id in context.state.tracks) \n                topPlayed.tracks[i].push(topTracks[j].id);\n            else\n                topPlayed.tracks[i].push(await context.dispatch('convertTrackObject', {track: topTracks[j]}));\n        }\n        let topArtists = await context.dispatch('getTopArtists', {limit: 50, time_range: terms[i]});\n        for (let j = 0; j < topArtists.length; j++) {\n            if (topArtists[j].id in context.state.artists) \n                topPlayed.artists[i].push(topArtists[j].id);\n            else\n                topPlayed.artists[i].push(await context.dispatch('convertArtistObject', topArtists[j]));\n        }\n    }\n    context.commit('setTopPlayedTracks', topPlayed.tracks);\n    context.commit('setTopPlayedArtists', topPlayed.artists);\n};\n/*\n{\n    id: String, \n    name: String,\n    image: String,\n    artists: Array,\n}\n*/\nconst convertTrackObject = async (context, payload) => {\n    let trackObject = {};\n    trackObject.id = payload.track.id;\n    trackObject.name = payload.track.name;\n    if ('album' in payload.track) \n        if ('images' in payload.track.album)\n            if (payload.track.album.images.length > 0)\n                trackObject.image = payload.track.album.images[0].url;\n    if (typeof(payload.track.artists[0]) == 'object')\n        trackObject.artists = payload.track.artists.map(artist => artist.id);\n    if ('date' in payload)\n        trackObject.date = payload.date;\n    return trackObject;\n};\nconst convertArtistObject = async (context, payload) => {\n    let artistObject = {};\n    artistObject.id = payload.id;\n    artistObject.name = payload.name;\n    if ('images' in payload)\n        if (payload.images.length > 0)\n            artistObject.image = payload.images[0].url;\n    if ('genres' in payload)\n        artistObject.genres = payload.genres;\n    if ('tracks' in payload)\n        artistObject.tracks = payload.tracks;\n    return artistObject;\n};\nconst generateGenre = async (context, payload) => {\n    let genreObject = {};\n    genreObject.name = payload.name;\n    genreObject.artists = payload.artists;\n    genreObject.trackNum = 1;\n    return genreObject;\n};\nconst bangerCalc = async (context, payload) => {\n    return ((payload.tempo - 96 + (payload.energy * 100) + (payload.danceability*50)) / 210);\n};\n////////////////////////////////////////////////////////////////\n// API CALLS ///////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////\n// String\nconst getTrack = async (context, track_id) => {\n  try {\n      let response = await context.state.spotifyApi.getTrack(track_id);\n      return response;\n  } catch (error) {\n      return;\n  }\n};\n// Array of Strings\nconst getTracks = async (context, track_ids) => {\n  try {\n      let response = await context.state.spotifyApi.getTracks(track_ids);\n      return response;\n  } catch (error) {\n      return;\n  }\n};\n// String\nconst getArtist = async (context, id) => {\n    try {\n        let response = await context.state.spotifyApi.getArtist(id);\n        return response;\n    } catch (error) {\n        return;\n    }\n}; \n// String\nconst getAlbum = async (context, id) => {\n    try {\n        let response = await context.state.spotifyApi.getAlbum(id);\n        return response;\n    } catch (error) {\n        return;\n    }\n}; \n// Array of Strings\nconst getArtists = async (context, ids) => {\n  try {\n      let response = await context.state.spotifyApi.getArtists(ids);\n      return response.artists;\n  } catch (error) {\n      return;\n  }\n};\n//\nconst getArtistRelatedArtists = async (context, id) => {\n    try {\n        let response = await context.state.spotifyApi.getArtistRelatedArtists(id);\n        return response.artists;\n    } catch (error) {\n        return;\n    }\n  };\n// {limit: Number, offset: 0}\nconst getPlaylists = async (context, payload) => {\n    try {\n        let response = await context.state.spotifyApi.getUserPlaylists(context.state.user.id, payload);\n        return response.items;\n    } catch (error) {\n        return;\n    }\n};\n// String\nconst getPlaylist = async (context, playlistId) => {\n    try {\n        let response = await context.state.spotifyApi.getPlaylist(playlistId);\n        return response;\n    } catch (error) {\n        return;\n    }\n};\n// {limit: Number 1-50, time_range: \"long_term\" Several years, \"medium_term\" 6 Months, \"short_term\" 4 Weeks, offset: Index of first entry to return}\nconst getTopTracks = async (context, payload) => {\n    try {\n        let response = await context.state.spotifyApi.getMyTopTracks({limit: payload.limit, time_range: payload.time_range});\n        return response.items;\n    } catch (error) {\n        return;\n    }  \n};\n// {limit: Number 1-50, time_range: \"long_term\" Several years, \"medium_term\" 6 Months, \"short_term\" 4 Weeks, offset: Index of first entry to return}\nconst getTopArtists = async (context, payload) => {\n    try { \n        let response = await context.state.spotifyApi.getMyTopArtists({limit: payload.limit, time_range: payload.time_range});\n        return response.items;\n    } catch (error) {\n        return;\n    } \n};\n// {limit: Number 1-50, after: Unix timestamp Milliseconds, before: Unix timestamp Milliseconds\nconst getRecentlyPlayed = async (context, payload) => {\n    try {\n        let response = await context.state.spotifyApi.getMyRecentlyPlayedTracks({limit: payload.limit});\n        return response;\n    } catch (error) {\n        return;\n    }\n};\n// Array of Strings\nconst getAudioFeaturesForTracks = async (context, track_ids) => {\n    try {\n        let response = await context.state.spotifyApi.getAudioFeaturesForTracks(track_ids);\n        return response.audio_features;\n    } catch (error) {\n        return;\n    }\n};\n// String\nconst getAudioFeaturesForTrack = async (context, track_id) => {\n  try {\n      let response = await context.state.spotifyApi.getAudioFeaturesForTracks([track_id]);\n      return response.audio_features[0];\n  } catch (error) {\n      return;\n  }\n};\n// String\nconst getAudioAnalysisForTrack = async (context, track_id) => {\n    try {\n        let response = await context.state.spotifyApi.getAudioAnalysisForTrack(track_id);\n        return response;\n    } catch (error) {\n        return;\n    }\n};\n// {seed_tracks: [track_id], target_dancebility: NUM, limit: 6, max_* min_*}\nconst getRecomendations = async (context, payload) => {\n    try {\n        let response = await context.state.spotifyApi.getRecommendations(payload);\n        return response;\n    } catch (error) {\n        return;\n    }\n};\n// {limit: 1-50, offset: first index}\nconst getSavedTracks = async (context, payload) => {\n    try {\n        let response = await context.state.spotifyApi.getMySavedTracks({limit: payload.limit, offset: payload.offset});\n        if (payload.offset == 0) {\n            context.commit('setTotal', response.total);\n        }\n        return response.items;\n    } catch (error) {\n        return;\n    }\n};\n// None\nconst getUser = async (context) => {\n    try {\n      if (context.state.inicialized)\n      {\n        let response = await context.state.spotifyApi.getMe();\n        await context.commit('setUserData', response);\n      }\n    } catch (error) {\n        return;\n    }\n};\n// Array IDs\nconst searchSpotify = async (context, payload) => {\n    try {\n        let response = await context.state.spotifyApi.search(payload.query, ['track'], {limit: 25});\n        return response;\n    } catch (error) {\n        return;\n    }\n};\n\nconst getArtistTopTracks = async (context, id) => {\n    try {\n        let response = await context.state.spotifyApi.getArtistTopTracks(id, \"US\", {});\n        return response.tracks;\n    } catch (error) {\n        return;\n    }\n};\n\n\n\nexport default {\n    inicializeGetToken,\n    inicializeParseToken,\n    inicializeSetToken,\n\n    loadLibrary,\n    retrieveSavedTracks,\n    retrieveSavedArtists,\n    updateTimelines,\n    processAudioFeatures,\n    retrieveTopCharts,\n\n    convertTrackObject,\n    convertArtistObject,\n    generateGenre,\n\n    bangerCalc,\n\n    getTrack,\n    getTracks,\n    getArtist,\n    getAlbum,\n    getArtists,\n    getArtistRelatedArtists,\n    getPlaylists,\n    getPlaylist,\n    getTopTracks,\n    getTopArtists,\n    getRecentlyPlayed,\n    getAudioFeaturesForTracks,\n    getAudioFeaturesForTrack,\n    getAudioAnalysisForTrack,\n    getRecomendations,\n    getSavedTracks,\n    getUser,\n    searchSpotify,\n    getArtistTopTracks\n};"]}]}