{"remainingRequest":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end3\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end3\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end3\\src\\store\\actions.js","dependencies":[{"path":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end3\\src\\store\\actions.js","mtime":1573365772992},{"path":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end3\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\andre\\Documents\\GitHub\\Spotify-Features\\front-end3\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgX3R5cGVvZiBmcm9tICJDOlxcVXNlcnNcXGFuZHJlXFxEb2N1bWVudHNcXEdpdEh1YlxcU3BvdGlmeS1GZWF0dXJlc1xcZnJvbnQtZW5kM1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOlxcVXNlcnNcXGFuZHJlXFxEb2N1bWVudHNcXEdpdEh1YlxcU3BvdGlmeS1GZWF0dXJlc1xcZnJvbnQtZW5kM1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8gSU5JQ0lBTElaQVRJT04gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vIE5vbmUKdmFyIGluaWNpYWxpemVHZXRUb2tlbiA9IGZ1bmN0aW9uIGluaWNpYWxpemVHZXRUb2tlbihjb250ZXh0KSB7CiAgdmFyIGF1dGhFbmRwb2ludCA9ICdodHRwczovL2FjY291bnRzLnNwb3RpZnkuY29tL2F1dGhvcml6ZSc7CiAgdmFyIGNsaWVudElkID0gJzQyOTAzZWViMmJmOTQzYzRiZDQ5MDMzNzBmN2E5M2Y1JzsKICB2YXIgcmVkaXJlY3RVcmkgPSAnaHR0cDovL215bXVzaWN0YXN0ZS5vcmcvcmVkaXJlY3QvJzsKICBpZiAoY29udGV4dC5zdGF0ZS5kZXYpIHJlZGlyZWN0VXJpID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWRpcmVjdC8nOwogIHZhciBzY29wZXMgPSBbJ3VzZXItcmVhZC1yZWNlbnRseS1wbGF5ZWQnLCAndXNlci10b3AtcmVhZCcsICd1c2VyLWxpYnJhcnktcmVhZCcsICd1c2VyLXJlYWQtZW1haWwnXTsKCiAgaWYgKCFjb250ZXh0LnN0YXRlLmFjY2Vzc190b2tlbikgewogICAgd2luZG93LmxvY2F0aW9uID0gIiIuY29uY2F0KGF1dGhFbmRwb2ludCwgIj9jbGllbnRfaWQ9IikuY29uY2F0KGNsaWVudElkLCAiJnJlZGlyZWN0X3VyaT0iKS5jb25jYXQocmVkaXJlY3RVcmksICImc2NvcGU9IikuY29uY2F0KHNjb3Blcy5qb2luKCclMjAnKSwgIiZyZXNwb25zZV90eXBlPXRva2VuJnNob3dfZGlhbG9nPXRydWUiKTsKICB9Cn07IC8vIE5vbmUKCgp2YXIgaW5pY2lhbGl6ZVBhcnNlVG9rZW4gPSBmdW5jdGlvbiBpbmljaWFsaXplUGFyc2VUb2tlbihjb250ZXh0KSB7CiAgdmFyIHRva2VuID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpLnNwbGl0KCcmJykucmVkdWNlKGZ1bmN0aW9uIChpbml0aWFsLCBpdGVtKSB7CiAgICBpZiAoaXRlbSkgewogICAgICB2YXIgcGFydHMgPSBpdGVtLnNwbGl0KCc9Jyk7CiAgICAgIGluaXRpYWxbcGFydHNbMF1dID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzFdKTsKICAgIH0KCiAgICByZXR1cm4gaW5pdGlhbDsKICB9LCB7fSk7CiAgY29udGV4dC5kaXNwYXRjaCgnaW5pY2lhbGl6ZVNldFRva2VuJywgdG9rZW4uYWNjZXNzX3Rva2VuKTsKfTsgLy8gVG9rZW4KCgp2YXIgaW5pY2lhbGl6ZVNldFRva2VuID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShjb250ZXh0LCB0b2tlbikgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5zZXRBY2Nlc3NUb2tlbih0b2tlbik7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuY29tbWl0KCdzZXRJbmljaWFsaXplZCcsIHRydWUpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY29udGV4dC5kaXNwYXRjaCgnZ2V0VXNlcicpOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBpbmljaWFsaXplU2V0VG9rZW4oX3gsIF94MikgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8gTE9BRCBQUk9HUkVTUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vIE5vbmUKCgp2YXIgbG9hZExpYnJhcnkgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoY29udGV4dCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3Jlc2V0UHJvZ3Jlc3MnKTsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgncmV0cmlldmVTYXZlZFRyYWNrcycsIHsKICAgICAgICAgICAgICBsaW1pdDogNTAsCiAgICAgICAgICAgICAgb2Zmc2V0OiAwCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgncmV0cmlldmVUb3BQbGF5ZWQnKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goJ2NhbGNUcmFja3NQZXJHZW5yZScpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgnY2FsY0V4dHJlbWVzJyk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMik7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gbG9hZExpYnJhcnkoX3gzKSB7CiAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIHtsaW1pdDogTnVtYmVyLCBvZmZzZXQ6IE51bWJlcn0KCgp2YXIgcmV0cmlldmVTYXZlZFRyYWNrcyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhjb250ZXh0LCBwYXlsb2FkKSB7CiAgICB2YXIgcmVzcG9uc2UsIGtleXMsIGk7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCdnZXRTYXZlZFRyYWNrcycsIHsKICAgICAgICAgICAgICBsaW1pdDogcGF5bG9hZC5saW1pdCwKICAgICAgICAgICAgICBvZmZzZXQ6IHBheWxvYWQub2Zmc2V0CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgaWYgKHBheWxvYWQub2Zmc2V0ID09IDApIGNvbnRleHQuY29tbWl0KCdzZXRUb3RhbCcsIHJlc3BvbnNlLnRvdGFsKTsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgncHJvY2Vzc1RyYWNrcycsIHJlc3BvbnNlLml0ZW1zKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGlmICghKHJlc3BvbnNlLml0ZW1zLmxlbmd0aCA9PSBwYXlsb2FkLmxpbWl0KSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gOTsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goJ3JldHJpZXZlU2F2ZWRUcmFja3MnLCB7CiAgICAgICAgICAgICAgbGltaXQ6IDUwLAogICAgICAgICAgICAgIG9mZnNldDogcGF5bG9hZC5vZmZzZXQgKyBwYXlsb2FkLmxpbWl0CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlcyk7CiAgICAgICAgICAgIGkgPSAwOwoKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIGlmICghKGkgPCBrZXlzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE2OwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb21taXQoJ2F2ZXJhZ2VBdWRpb0ZlYXR1cmVWYWx1ZScsIGtleXNbaV0pOwoKICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMTsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuY29tbWl0KCdhdmVyYWdlTW9kZScpOwoKICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjM7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbW1pdCgnYXZlcmFnZVZhbGVuY2VPdmVyVGltZScpOwoKICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRUcmFja3NMb2FkZWQnKTsKCiAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMyk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gcmV0cmlldmVTYXZlZFRyYWNrcyhfeDQsIF94NSkgewogICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyBUcmFjayBBcnJheQoKCnZhciBwcm9jZXNzVHJhY2tzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHZhciBpZHMsIHRyYWNrQXVkaW9GZWF0dXJlcywgbm93LCBub3dUaW1lLCBNT05USCwgaSwgYWRkZWREYXRlLCBhZGRlZERhdGVUaW1lOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgnaW5pY2lhbFNjYW5SZWR1Y2VJZHMnLCBwYXlsb2FkKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGlkcyA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCdnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzJywgaWRzKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHRyYWNrQXVkaW9GZWF0dXJlcyA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBub3dUaW1lID0gbm93LmdldFRpbWUoKTsKICAgICAgICAgICAgTU9OVEggPSAyNjI2NTYwMDAwOwogICAgICAgICAgICBpID0gMDsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBpZiAoIShpIDwgdHJhY2tBdWRpb0ZlYXR1cmVzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDIxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEzOwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgnYmFuZ2VyQ2FsYycsIHsKICAgICAgICAgICAgICB0ZW1wbzogdHJhY2tBdWRpb0ZlYXR1cmVzW2ldLnRlbXBvLAogICAgICAgICAgICAgIGVuZXJneTogdHJhY2tBdWRpb0ZlYXR1cmVzW2ldLmVuZXJneSwKICAgICAgICAgICAgICBkYW5jZWFiaWxpdHk6IHRyYWNrQXVkaW9GZWF0dXJlc1tpXS5kYW5jZWFiaWxpdHkKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgdHJhY2tBdWRpb0ZlYXR1cmVzW2ldLmJhbmdlciA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICBhZGRlZERhdGUgPSBuZXcgRGF0ZShjb250ZXh0LnN0YXRlLnRyYWNrc1t0cmFja0F1ZGlvRmVhdHVyZXNbaV0uaWRdLmRhdGUpOwogICAgICAgICAgICBhZGRlZERhdGVUaW1lID0gYWRkZWREYXRlLmdldFRpbWUoKTsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxODsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuY29tbWl0KCdhZGRWYWxlbmNlT3ZlclRpbWUnLCB7CiAgICAgICAgICAgICAgbW9udGg6IE1hdGguZmxvb3IoKG5vd1RpbWUgLSBhZGRlZERhdGVUaW1lKSAvIE1PTlRIKSwKICAgICAgICAgICAgICB2YWx1ZTogdHJhY2tBdWRpb0ZlYXR1cmVzW2ldLnZhbGVuY2UKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgaSsrOwogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEwOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDIzOwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgnZGlzdHJpYnV0ZVRyYWNrQXVkaW9GZWF0dXJlcycsIHRyYWNrQXVkaW9GZWF0dXJlcyk7CgogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTQpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIHByb2Nlc3NUcmFja3MoX3g2LCBfeDcpIHsKICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8gVHJhY2sgQXJyYXkKCgp2YXIgaW5pY2lhbFNjYW5SZWR1Y2VJZHMgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoY29udGV4dCwgcGF5bG9hZCkgewogICAgdmFyIGlkcywgYXJ0aXN0c1RvRmluZCwgbm93LCBub3dUaW1lLCBNT05USCwgaSwgdHJhY2tPYmplY3QsIGosIGFkZGVkRGF0ZSwgYWRkZWREYXRlVGltZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlkcyA9IFtdOwogICAgICAgICAgICBhcnRpc3RzVG9GaW5kID0ge307CiAgICAgICAgICAgIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIG5vd1RpbWUgPSBub3cuZ2V0VGltZSgpOwogICAgICAgICAgICBNT05USCA9IDI2MjY1NjAwMDA7CgogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGF5bG9hZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHRyYWNrT2JqZWN0ID0gcGF5bG9hZFtpXS50cmFjazsKCiAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRyYWNrT2JqZWN0LmFydGlzdHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgIGlmICghKHRyYWNrT2JqZWN0LmFydGlzdHNbal0uaWQgaW4gY29udGV4dC5zdGF0ZS5hcnRpc3RzKSkgewogICAgICAgICAgICAgICAgICBpZiAoISh0cmFja09iamVjdC5hcnRpc3RzW2pdLmlkIGluIGFydGlzdHNUb0ZpbmQpKSBhcnRpc3RzVG9GaW5kW3RyYWNrT2JqZWN0LmFydGlzdHNbal0uaWRdID0gewogICAgICAgICAgICAgICAgICAgIGlkOiB0cmFja09iamVjdC5hcnRpc3RzW2pdLmlkLAogICAgICAgICAgICAgICAgICAgIHRyYWNrczogW3RyYWNrT2JqZWN0LmlkXQogICAgICAgICAgICAgICAgICB9O2Vsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICghYXJ0aXN0c1RvRmluZFt0cmFja09iamVjdC5hcnRpc3RzW2pdLmlkXS50cmFja3MuaW5jbHVkZXModHJhY2tPYmplY3QuaWQpKSBhcnRpc3RzVG9GaW5kW3RyYWNrT2JqZWN0LmFydGlzdHNbal0uaWRdLnRyYWNrcy5wdXNoKHRyYWNrT2JqZWN0LmlkKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGNvbnRleHQuY29tbWl0KCdhZGRUcmFja1RvQXJ0aXN0JywgewogICAgICAgICAgICAgICAgICBpZDogdHJhY2tPYmplY3QuYXJ0aXN0c1tqXS5pZCwKICAgICAgICAgICAgICAgICAgdHJhY2s6IHRyYWNrT2JqZWN0LmlkCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRyYWNrT2JqZWN0LmFydGlzdHMgPSB0cmFja09iamVjdC5hcnRpc3RzLm1hcChmdW5jdGlvbiAoYXJ0aXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYXJ0aXN0LmlkOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRyYWNrT2JqZWN0LmRhdGUgPSBwYXlsb2FkW2ldLmFkZGVkX2F0OwogICAgICAgICAgICAgIGFkZGVkRGF0ZSA9IG5ldyBEYXRlKHRyYWNrT2JqZWN0LmRhdGUpOwogICAgICAgICAgICAgIGFkZGVkRGF0ZVRpbWUgPSBhZGRlZERhdGUuZ2V0VGltZSgpOwogICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGREYXRlQWRkZWRUcmFjaycsIE1hdGguZmxvb3IoKG5vd1RpbWUgLSBhZGRlZERhdGVUaW1lKSAvIE1PTlRIKSk7CiAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrT2JqZWN0LmFsYnVtLmFsYnVtX3R5cGU7CiAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrT2JqZWN0LmFsYnVtLmFydGlzdHM7CiAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrT2JqZWN0LmFsYnVtLmF2YWlsYWJsZV9tYXJrZXRzOwogICAgICAgICAgICAgIGRlbGV0ZSB0cmFja09iamVjdC5hbGJ1bS5hdmFpbGFibGVfbWFya2V0czsKICAgICAgICAgICAgICB0cmFja09iamVjdC5hbGJ1bS5ocmVmID0gdHJhY2tPYmplY3QuYWxidW0uZXh0ZXJuYWxfdXJscy5zcG90aWZ5OwogICAgICAgICAgICAgIGRlbGV0ZSB0cmFja09iamVjdC5hbGJ1bS50eXBlOwogICAgICAgICAgICAgIGRlbGV0ZSB0cmFja09iamVjdC5hbGJ1bS51cmk7CiAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrT2JqZWN0LmF2YWlsYWJsZV9tYXJrZXRzOwogICAgICAgICAgICAgIGRlbGV0ZSB0cmFja09iamVjdC5kaXNjX251bWJlcjsKICAgICAgICAgICAgICBkZWxldGUgdHJhY2tPYmplY3QuZXh0ZXJuYWxfaWRzOwogICAgICAgICAgICAgIHRyYWNrT2JqZWN0LmhyZWYgPSB0cmFja09iamVjdC5leHRlcm5hbF91cmxzLnNwb3RpZnk7CiAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrT2JqZWN0LmV4dGVybmFsX3VybHM7CiAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrT2JqZWN0LnR5cGU7CiAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrT2JqZWN0LnVyaTsKICAgICAgICAgICAgICBpZiAodHJhY2tPYmplY3QuYWxidW0uaW1hZ2VzLmxlbmd0aCA+IDEpIHRyYWNrT2JqZWN0LmltYWdlID0gdHJhY2tPYmplY3QuYWxidW0uaW1hZ2VzWzBdLnVybDsKICAgICAgICAgICAgICBpZHMucHVzaCh0cmFja09iamVjdC5pZCk7CiAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3B1c2hUcmFjaycsIHsKICAgICAgICAgICAgICAgIGlkOiB0cmFja09iamVjdC5pZCwKICAgICAgICAgICAgICAgIHZhbHVlOiB0cmFja09iamVjdAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRQcm9jZXNzZWQnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA4OwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgnZmluZEFuZFN0b3JlQXJ0aXN0cycsIGFydGlzdHNUb0ZpbmQpOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIGlkcyk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gaW5pY2lhbFNjYW5SZWR1Y2VJZHMoX3g4LCBfeDkpIHsKICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8gQXJyYXkge2lkOiBTdHJpbmcsIHRyYWNrczogW1N0cmluZ119CgoKdmFyIGZpbmRBbmRTdG9yZUFydGlzdHMgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoY29udGV4dCwgcGF5bG9hZCkgewogICAgdmFyIGlkcywgdHJhY2tTZXRzLCBhcnRpc3RzLCBzZWN0aW9uSWRzLCBuZXdBcnRpc3RzLCBpLCBhcnRpc3RPYmplY3QsIGosIF9qOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlkcyA9IE9iamVjdC52YWx1ZXMocGF5bG9hZCkubWFwKGZ1bmN0aW9uIChhcnRpc3QpIHsKICAgICAgICAgICAgICByZXR1cm4gYXJ0aXN0LmlkOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdHJhY2tTZXRzID0gT2JqZWN0LnZhbHVlcyhwYXlsb2FkKTsKICAgICAgICAgICAgYXJ0aXN0cyA9IFtdOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgaWYgKCEoaWRzLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxMTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2VjdGlvbklkcyA9IGlkcy5zcGxpY2UoMCwgNTApOwogICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCdnZXRBcnRpc3RzJywgc2VjdGlvbklkcyk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBuZXdBcnRpc3RzID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgIGFydGlzdHMgPSBhcnRpc3RzLmNvbmNhdChuZXdBcnRpc3RzKTsKICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBpID0gMDsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBpZiAoIShpIDwgYXJ0aXN0cy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0NzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXJ0aXN0T2JqZWN0ID0gYXJ0aXN0c1tpXTsKICAgICAgICAgICAgaiA9IDA7CgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgaWYgKCEoaiA8IHRyYWNrU2V0cy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEoYXJ0aXN0T2JqZWN0LmlkID09IHRyYWNrU2V0c1tqXS5pZCkpIHsKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDIwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhcnRpc3RPYmplY3QudHJhY2tzID0gdHJhY2tTZXRzW2pdLnRyYWNrczsKICAgICAgICAgICAgdHJhY2tTZXRzLnNwbGljZShqLCAxKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoImJyZWFrIiwgMjMpOwoKICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgIGorKzsKICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxNTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgYXJ0aXN0T2JqZWN0LmhyZWYgPSBhcnRpc3RPYmplY3QuZXh0ZXJuYWxfdXJscy5zcG90aWZ5OwogICAgICAgICAgICBkZWxldGUgYXJ0aXN0T2JqZWN0LmV4dGVybmFsX3VybHM7CiAgICAgICAgICAgIGFydGlzdE9iamVjdC5mb2xsb3dlcnMgPSBhcnRpc3RPYmplY3QuZm9sbG93ZXJzLnRvdGFsOwogICAgICAgICAgICBfaiA9IDA7CgogICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgaWYgKCEoX2ogPCBhcnRpc3RPYmplY3QuZ2VucmVzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoYXJ0aXN0T2JqZWN0LmdlbnJlc1tfal0gaW4gY29udGV4dC5zdGF0ZS5nZW5yZXMpIHsKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDMzOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDMxOwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb21taXQoJ3B1c2hHZW5yZScsIHsKICAgICAgICAgICAgICBpZDogYXJ0aXN0T2JqZWN0LmdlbnJlc1tfal0sCiAgICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICAgIG5hbWU6IGFydGlzdE9iamVjdC5nZW5yZXNbX2pdLAogICAgICAgICAgICAgICAgYXJ0aXN0czogW2FydGlzdE9iamVjdC5pZF0sCiAgICAgICAgICAgICAgICB0cmFja251bTogMAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzNTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzNTsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuY29tbWl0KCdhZGRBcnRpc3RUb0dlbnJlJywgewogICAgICAgICAgICAgIGlkOiBhcnRpc3RPYmplY3QuZ2VucmVzW19qXSwKICAgICAgICAgICAgICBhcnRpc3Q6IGFydGlzdE9iamVjdC5pZAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM1OgogICAgICAgICAgICBfaisrOwogICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICBkZWxldGUgYXJ0aXN0T2JqZWN0LnR5cGU7CiAgICAgICAgICAgIGRlbGV0ZSBhcnRpc3RPYmplY3QudXJpOwogICAgICAgICAgICBpZiAoYXJ0aXN0T2JqZWN0LmltYWdlcy5sZW5ndGggPiAwKSBhcnRpc3RPYmplY3QuaW1hZ2UgPSBhcnRpc3RPYmplY3QuaW1hZ2VzWzBdLnVybDsKICAgICAgICAgICAgZGVsZXRlIGFydGlzdE9iamVjdC5pbWFnZXM7CiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNDQ7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbW1pdCgncHVzaEFydGlzdCcsIHsKICAgICAgICAgICAgICBpZDogYXJ0aXN0T2JqZWN0LmlkLAogICAgICAgICAgICAgIHZhbHVlOiBhcnRpc3RPYmplY3QKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA0NDoKICAgICAgICAgICAgaSsrOwogICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEyOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNik7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gZmluZEFuZFN0b3JlQXJ0aXN0cyhfeDEwLCBfeDExKSB7CiAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIEF1ZGlvIEZlYXR1cmVzIEFycmF5CgoKdmFyIGRpc3RyaWJ1dGVUcmFja0F1ZGlvRmVhdHVyZXMgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjcgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoY29udGV4dCwgcGF5bG9hZCkgewogICAgdmFyIGtleXMsIHZhbHVlcywgaSwgaiwgX2k7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlcyk7CiAgICAgICAgICAgIHZhbHVlcyA9IHsKICAgICAgICAgICAgICBhY291c3RpY25lc3M6IDAsCiAgICAgICAgICAgICAgZGFuY2VhYmlsaXR5OiAwLAogICAgICAgICAgICAgIGVuZXJneTogMCwKICAgICAgICAgICAgICBpbnN0cnVtZW50YWxuZXNzOiAwLAogICAgICAgICAgICAgIGxpdmVuZXNzOiAwLAogICAgICAgICAgICAgIGxvdWRuZXNzOiAwLAogICAgICAgICAgICAgIHNwZWVjaGluZXNzOiAwLAogICAgICAgICAgICAgIHZhbGVuY2U6IDAsCiAgICAgICAgICAgICAgdGVtcG86IDAsCiAgICAgICAgICAgICAgYmFuZ2VyOiAwCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGkgPSAwOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgaWYgKCEoaSA8IHBheWxvYWQubGVuZ3RoKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBrZXlzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgdmFsdWVzW2tleXNbal1dICs9IHBheWxvYWRbaV1ba2V5c1tqXV07CiAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3Bsb3RBdWRpb0ZlYXR1cmVWYWx1ZScsIHsKICAgICAgICAgICAgICAgIGtleToga2V5c1tqXSwKICAgICAgICAgICAgICAgIHZhbHVlOiBwYXlsb2FkW2ldW2tleXNbal1dCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRNb2RlJywgcGF5bG9hZFtpXS5tb2RlKTsKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA4OwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb21taXQoJ2FkZFRyYWNrUHJvcGVydGllcycsIHsKICAgICAgICAgICAgICBpZDogcGF5bG9hZFtpXS5pZCwKICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgICAgICBkYW5jZWFiaWxpdHk6IHBheWxvYWRbaV0uZGFuY2VhYmlsaXR5LAogICAgICAgICAgICAgICAgZW5lcmd5OiBwYXlsb2FkW2ldLmVuZXJneSwKICAgICAgICAgICAgICAgIGtleTogcGF5bG9hZFtpXS5rZXksCiAgICAgICAgICAgICAgICBsb3VkbmVzczogcGF5bG9hZFtpXS5sb3VkbmVzcywKICAgICAgICAgICAgICAgIG1vZGU6IHBheWxvYWRbaV0ubW9kZSwKICAgICAgICAgICAgICAgIHNwZWVjaGluZXNzOiBwYXlsb2FkW2ldLnNwZWVjaGluZXNzLAogICAgICAgICAgICAgICAgYWNvdXN0aWNuZXNzOiBwYXlsb2FkW2ldLmFjb3VzdGljbmVzcywKICAgICAgICAgICAgICAgIGluc3RydW1lbnRhbG5lc3M6IHBheWxvYWRbaV0uaW5zdHJ1bWVudGFsbmVzcywKICAgICAgICAgICAgICAgIGxpdmVuZXNzOiBwYXlsb2FkW2ldLmxpdmVuZXNzLAogICAgICAgICAgICAgICAgdmFsZW5jZTogcGF5bG9hZFtpXS52YWxlbmNlLAogICAgICAgICAgICAgICAgdGVtcG86IHBheWxvYWRbaV0udGVtcG8sCiAgICAgICAgICAgICAgICBkdXJhdGlvbl9tczogcGF5bG9hZFtpXS5kdXJhdGlvbl9tcywKICAgICAgICAgICAgICAgIHRpbWVfc2lnbmF0dXJlOiBwYXlsb2FkW2ldLnRpbWVfc2lnbmF0dXJlLAogICAgICAgICAgICAgICAgYmFuZ2VyOiBwYXlsb2FkW2ldLmJhbmdlcgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBpKys7CiAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgX2kgPSAwOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGlmICghKF9pIDwga2V5cy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxNTsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuY29tbWl0KCdhZGRBdWRpb0ZlYXR1cmVWYWx1ZScsIHsKICAgICAgICAgICAgICBrZXk6IGtleXNbX2ldLAogICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZXNba2V5c1tfaV1dCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIF9pKys7CiAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTI7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU3KTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBkaXN0cmlidXRlVHJhY2tBdWRpb0ZlYXR1cmVzKF94MTIsIF94MTMpIHsKICAgIHJldHVybiBfcmVmNy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBjYWxjVHJhY2tzUGVyR2VucmUgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjggPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoY29udGV4dCkgewogICAgdmFyIGFydGlzdElkcywgaSwgaiwgZ2VucmVUdXBsZXMsIHRvcEdlbnJlcywgdG9wR2VucmVJZHMsIGFydGlzdFR1cGxlcywgdG9wQXJ0aXN0cywgdG9wQXJ0aXN0SWRzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgYXJ0aXN0SWRzID0gT2JqZWN0LmtleXMoY29udGV4dC5zdGF0ZS5hcnRpc3RzKTsKICAgICAgICAgICAgaSA9IDA7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBpZiAoIShpIDwgYXJ0aXN0SWRzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDE1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBqID0gMDsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGlmICghKGogPCBjb250ZXh0LnN0YXRlLmFydGlzdHNbYXJ0aXN0SWRzW2ldXS5nZW5yZXMubGVuZ3RoKSkgewogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKCJ0cmFja3MiIGluIGNvbnRleHQuc3RhdGUuYXJ0aXN0c1thcnRpc3RJZHNbaV1dKSkgewogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEoY29udGV4dC5zdGF0ZS5hcnRpc3RzW2FydGlzdElkc1tpXV0udHJhY2tzLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDk7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbW1pdCgnYWRkR2VucmVUcmFja051bScsIHsKICAgICAgICAgICAgICBpZDogY29udGV4dC5zdGF0ZS5hcnRpc3RzW2FydGlzdElkc1tpXV0uZ2VucmVzW2pdLAogICAgICAgICAgICAgIHZhbHVlOiBjb250ZXh0LnN0YXRlLmFydGlzdHNbYXJ0aXN0SWRzW2ldXS50cmFja3MubGVuZ3RoCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgaisrOwogICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDQ7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBnZW5yZVR1cGxlcyA9IE9iamVjdC5lbnRyaWVzKGNvbnRleHQuc3RhdGUuZ2VucmVzKTsKICAgICAgICAgICAgdG9wR2VucmVzID0gZ2VucmVUdXBsZXMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgIGlmICghKCJ0cmFja251bSIgaW4gYVsxXSkgJiYgISgidHJhY2tudW0iIGluIGJbMV0pKSByZXR1cm4gMDsKICAgICAgICAgICAgICBpZiAoISgidHJhY2tudW0iIGluIGJbMV0pKSByZXR1cm4gMCAtIGFbMV0udHJhY2tudW07CiAgICAgICAgICAgICAgaWYgKCEoInRyYWNrbnVtIiBpbiBhWzFdKSkgcmV0dXJuIGJbMV0udHJhY2tudW07CiAgICAgICAgICAgICAgcmV0dXJuIGJbMV0udHJhY2tudW0gLSBhWzFdLnRyYWNrbnVtOwogICAgICAgICAgICB9KS5zbGljZSgwLCA1MCk7CiAgICAgICAgICAgIHRvcEdlbnJlSWRzID0gdG9wR2VucmVzLm1hcChmdW5jdGlvbiAoZ2VucmUpIHsKICAgICAgICAgICAgICByZXR1cm4gZ2VucmVbMF07CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG9wU2F2ZWRHZW5yZXMnLCB0b3BHZW5yZUlkcyk7CiAgICAgICAgICAgIGFydGlzdFR1cGxlcyA9IE9iamVjdC5lbnRyaWVzKGNvbnRleHQuc3RhdGUuYXJ0aXN0cyk7CiAgICAgICAgICAgIHRvcEFydGlzdHMgPSBhcnRpc3RUdXBsZXMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgIGlmICghKCJ0cmFja3MiIGluIGFbMV0pICYmICEoInRyYWNrcyIgaW4gYlsxXSkpIHJldHVybiAwOwogICAgICAgICAgICAgIGlmICghKCJ0cmFja3MiIGluIGJbMV0pKSByZXR1cm4gMCAtIGFbMV0udHJhY2tzLmxlbmd0aDsKICAgICAgICAgICAgICBpZiAoISgidHJhY2tzIiBpbiBhWzFdKSkgcmV0dXJuIGJbMV0udHJhY2tzLmxlbmd0aDsKICAgICAgICAgICAgICByZXR1cm4gYlsxXS50cmFja3MubGVuZ3RoIC0gYVsxXS50cmFja3MubGVuZ3RoOwogICAgICAgICAgICB9KS5zbGljZSgwLCA1MCk7CiAgICAgICAgICAgIHRvcEFydGlzdElkcyA9IHRvcEFydGlzdHMubWFwKGZ1bmN0aW9uIChhcnRpc3QpIHsKICAgICAgICAgICAgICByZXR1cm4gYXJ0aXN0WzBdOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFRvcFNhdmVkQXJ0aXN0cycsIHRvcEFydGlzdElkcyk7CiAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRBcnRpc3RzTG9hZGVkJyk7CiAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRHZW5yZXNMb2FkZWQnKTsKCiAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlOCk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gY2FsY1RyYWNrc1BlckdlbnJlKF94MTQpIHsKICAgIHJldHVybiBfcmVmOC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBjYWxjRXh0cmVtZXMgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjkgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoY29udGV4dCkgewogICAgdmFyIGtleXMsIHRyYWNrVHVwbGVzLCBjaGFydHMsIHRvcFRyYWNrcywgX2xvb3AsIGk7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlcyk7CiAgICAgICAgICAgIHRyYWNrVHVwbGVzID0gT2JqZWN0LmVudHJpZXMoY29udGV4dC5zdGF0ZS50cmFja3MpOwogICAgICAgICAgICBjaGFydHMgPSBbIm1pbmNoYXJ0IiwgIm1heGNoYXJ0Il07CgogICAgICAgICAgICBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGkpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoYXJ0cy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgaWYgKGNoYXJ0c1tqXSA9PSAibWluY2hhcnQiKSB0b3BUcmFja3MgPSB0cmFja1R1cGxlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhWzFdW2tleXNbaV1dIC0gYlsxXVtrZXlzW2ldXTsKICAgICAgICAgICAgICAgIH0pLnNsaWNlKDAsIDI1KTtlbHNlIHRvcFRyYWNrcyA9IHRyYWNrVHVwbGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGJbMV1ba2V5c1tpXV0gLSBhWzFdW2tleXNbaV1dOwogICAgICAgICAgICAgICAgfSkuc2xpY2UoMCwgMjUpOwogICAgICAgICAgICAgICAgdmFyIHRvcFRyYWNrc0lkcyA9IHRvcFRyYWNrcy5tYXAoZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFja1swXTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldEF1ZGlvRmVhdHVyZUNoYXJ0JywgewogICAgICAgICAgICAgICAgICBrZXk6IGtleXNbaV0sCiAgICAgICAgICAgICAgICAgIGNoYXJ0OiBbY2hhcnRzW2pdXSwKICAgICAgICAgICAgICAgICAgdmFsdWU6IHRvcFRyYWNrc0lkcwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBfbG9vcChpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldEV4dHJlbWVzTG9hZGVkJyk7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlOSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gY2FsY0V4dHJlbWVzKF94MTUpIHsKICAgIHJldHVybiBfcmVmOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciByZXRyaWV2ZVRvcFBsYXllZCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMTAgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKGNvbnRleHQpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgncmV0cmlldmVUb3BQbGF5ZWRBcnRpc3RzJyk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgncmV0cmlldmVUb3BQbGF5ZWRUcmFja3MnKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMTApOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIHJldHJpZXZlVG9wUGxheWVkKF94MTYpIHsKICAgIHJldHVybiBfcmVmMTAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7Cgp2YXIgcmV0cmlldmVUb3BQbGF5ZWRBcnRpc3RzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYxMSA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoY29udGV4dCkgewogICAgdmFyIHJhbmdlcywgaSwgYXJ0aXN0cywgaWRzLCBqLCBhcnRpc3RPYmplY3Q7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmFuZ2VzID0gWydzaG9ydF90ZXJtJywgJ21lZGl1bV90ZXJtJywgJ2xvbmdfdGVybSddOwogICAgICAgICAgICBpID0gMDsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGlmICghKGkgPCByYW5nZXMubGVuZ3RoKSkgewogICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDEyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgnZ2V0VG9wQXJ0aXN0cycsIHsKICAgICAgICAgICAgICBsaW1pdDogNTAsCiAgICAgICAgICAgICAgdGltZV9yYW5nZTogcmFuZ2VzW2ldLAogICAgICAgICAgICAgIG9mZnNldDogMAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGFydGlzdHMgPSBfY29udGV4dDExLnNlbnQ7CiAgICAgICAgICAgIGlkcyA9IFtdOwoKICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGFydGlzdHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICBpZHMucHVzaChhcnRpc3RzW2pdLmlkKTsKCiAgICAgICAgICAgICAgaWYgKCEoYXJ0aXN0c1tqXS5pZCBpbiBjb250ZXh0LnN0YXRlLmFydGlzdHMpKSB7CiAgICAgICAgICAgICAgICBhcnRpc3RPYmplY3QgPSBhcnRpc3RzW2pdOwogICAgICAgICAgICAgICAgYXJ0aXN0T2JqZWN0LmhyZWYgPSBhcnRpc3RPYmplY3QuZXh0ZXJuYWxfdXJscy5zcG90aWZ5OwogICAgICAgICAgICAgICAgZGVsZXRlIGFydGlzdE9iamVjdC5leHRlcm5hbF91cmxzOwogICAgICAgICAgICAgICAgYXJ0aXN0T2JqZWN0LmZvbGxvd2VycyA9IGFydGlzdE9iamVjdC5mb2xsb3dlcnMudG90YWw7CiAgICAgICAgICAgICAgICBkZWxldGUgYXJ0aXN0T2JqZWN0LnR5cGU7CiAgICAgICAgICAgICAgICBkZWxldGUgYXJ0aXN0T2JqZWN0LnVyaTsKICAgICAgICAgICAgICAgIGFydGlzdE9iamVjdC50cmFja3MgPSBbXTsKICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdwdXNoQXJ0aXN0JywgewogICAgICAgICAgICAgICAgICBpZDogYXJ0aXN0c1tqXS5pZCwKICAgICAgICAgICAgICAgICAgdmFsdWU6IGFydGlzdE9iamVjdAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG9wUGxheWVkQXJ0aXN0cycsIHsKICAgICAgICAgICAgICBpbmRleDogaSwKICAgICAgICAgICAgICB2YWx1ZTogaWRzCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgaSsrOwogICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAyOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTExKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiByZXRyaWV2ZVRvcFBsYXllZEFydGlzdHMoX3gxNykgewogICAgcmV0dXJuIF9yZWYxMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciByZXRyaWV2ZVRvcFBsYXllZFRyYWNrcyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMTIgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKGNvbnRleHQpIHsKICAgIHZhciByYW5nZXMsIGksIHRyYWNrcywgaWRzLCBqLCB0cmFja09iamVjdDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByYW5nZXMgPSBbJ3Nob3J0X3Rlcm0nLCAnbWVkaXVtX3Rlcm0nLCAnbG9uZ190ZXJtJ107CiAgICAgICAgICAgIGkgPSAwOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgaWYgKCEoaSA8IHJhbmdlcy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDU7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCdnZXRUb3BUcmFja3MnLCB7CiAgICAgICAgICAgICAgbGltaXQ6IDUwLAogICAgICAgICAgICAgIHRpbWVfcmFuZ2U6IHJhbmdlc1tpXSwKICAgICAgICAgICAgICBvZmZzZXQ6IDAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICB0cmFja3MgPSBfY29udGV4dDEyLnNlbnQ7CiAgICAgICAgICAgIGlkcyA9IFtdOwoKICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRyYWNrcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIGlkcy5wdXNoKHRyYWNrc1tqXS5pZCk7CgogICAgICAgICAgICAgIGlmICghKHRyYWNrc1tqXS5pZCBpbiBjb250ZXh0LnN0YXRlLnRyYWNrcykpIHsKICAgICAgICAgICAgICAgIHRyYWNrT2JqZWN0ID0gdHJhY2tzW2pdOwogICAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrT2JqZWN0LmFsYnVtLmFsYnVtX3R5cGU7CiAgICAgICAgICAgICAgICBkZWxldGUgdHJhY2tPYmplY3QuYWxidW0uYXJ0aXN0czsKICAgICAgICAgICAgICAgIGRlbGV0ZSB0cmFja09iamVjdC5hbGJ1bS5hdmFpbGFibGVfbWFya2V0czsKICAgICAgICAgICAgICAgIGRlbGV0ZSB0cmFja09iamVjdC5hbGJ1bS5hdmFpbGFibGVfbWFya2V0czsKICAgICAgICAgICAgICAgIHRyYWNrT2JqZWN0LmFsYnVtLmhyZWYgPSB0cmFja09iamVjdC5hbGJ1bS5leHRlcm5hbF91cmxzLnNwb3RpZnk7CiAgICAgICAgICAgICAgICBkZWxldGUgdHJhY2tPYmplY3QuYWxidW0udHlwZTsKICAgICAgICAgICAgICAgIGRlbGV0ZSB0cmFja09iamVjdC5hbGJ1bS51cmk7CiAgICAgICAgICAgICAgICBkZWxldGUgdHJhY2tPYmplY3QuYXZhaWxhYmxlX21hcmtldHM7CiAgICAgICAgICAgICAgICBkZWxldGUgdHJhY2tPYmplY3QuZGlzY19udW1iZXI7CiAgICAgICAgICAgICAgICBkZWxldGUgdHJhY2tPYmplY3QuZXh0ZXJuYWxfaWRzOwogICAgICAgICAgICAgICAgdHJhY2tPYmplY3QuaHJlZiA9IHRyYWNrT2JqZWN0LmV4dGVybmFsX3VybHMuc3BvdGlmeTsKICAgICAgICAgICAgICAgIGRlbGV0ZSB0cmFja09iamVjdC5leHRlcm5hbF91cmxzOwogICAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrT2JqZWN0LnR5cGU7CiAgICAgICAgICAgICAgICBkZWxldGUgdHJhY2tPYmplY3QudXJpOwogICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3B1c2hUcmFjaycsIHsKICAgICAgICAgICAgICAgICAgaWQ6IHRyYWNrc1tqXS5pZCwKICAgICAgICAgICAgICAgICAgdmFsdWU6IHRyYWNrT2JqZWN0CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRUb3BQbGF5ZWRUcmFja3MnLCB7CiAgICAgICAgICAgICAgaW5kZXg6IGksCiAgICAgICAgICAgICAgdmFsdWU6IGlkcwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUxMik7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gcmV0cmlldmVUb3BQbGF5ZWRUcmFja3MoX3gxOCkgewogICAgcmV0dXJuIF9yZWYxMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBBVURJTyBGRUFUVVJFUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8ge3RlbXBvOiBOdW1iZXIsIGVuZXJneTogTnVtYmVyLCBkYW5jZWFiaWxpdHk6IE51bWJlcn0KCgp2YXIgYmFuZ2VyQ2FsYyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMTMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIChwYXlsb2FkLnRlbXBvIC0gOTYgKyBwYXlsb2FkLmVuZXJneSAqIDEwMCArIHBheWxvYWQuZGFuY2VhYmlsaXR5ICogNTApIC8gMjEwKTsKCiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMTMpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGJhbmdlckNhbGMoX3gxOSwgX3gyMCkgewogICAgcmV0dXJuIF9yZWYxMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBTQVZFIExJQlJBUlkgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8ge25hbWU6IFN0cmluZywgcHJpdmFjeTogQm9vbGVhbiwgaW5jbHVkZTogT2JqZWN0fQovLyBJTkNMVURFIElURU0gICAgICAgICAgICAgICBLRVkgICAgICAgICAgICAgICAgICAgICAgICBQVUJMSUMgUkVRCi8vIE51bWVyaWNhbCBEYXRhOiBUcnVlLiAgICAgIG51bWVyaWNhbF9kYXRhICAgICAgICAgICAgIFRydWUKLy8gTW9zdCBTYXZlZCBBcnRpc3RzOiAgICAgICAgbW9zdF9zYXZlZF9hcnRpc3RzICAgICAgICAgCi8vIEF1ZGlvIEZlYXR1cmVzOiBUcnVlLiAgICAgIGF1ZGlvX2ZlYXR1cmVzICAgICAgICAgICAgIFRydWUKLy8gVG9wIFNhdmVkIEdlbnJlczogICAgICAgICAgbW9zdF9zYXZlZF9nZW5yZXMKLy8gTnVtZXJpY2FsIEZlYXR1cmVzOiAgICAgICAgbnVtZXJpY2FsX2ZlYXR1cmVzCi8vIFByb2JhYmlsaXR5IEZlYXR1cmVzOiAgICAgIHByb2JhYmlsaXR5X2ZlYXR1cmVzCi8vIERhdGUgQWRkZWQgVGltZWxpbmU6ICAgICAgIGFkZGVkX3RpbWVsaW5lCi8vIEhhcHBpbmVzcyBEaXN0cmlidXRpb246ICAgIGhhcHBpbmVzc19kaXN0cmlidXRpb24KLy8gRW5lcmd5IERpc3RyaWJ1dGlvbjogICAgICAgZW5lcmd5X2Rpc3RyaWJ1dGlvbgovLyBEYW5jZWFiaWxpdHkgRGlzdHJpYnV0aW9uOiBkYW5jZWFiaWxpdHlfZGlzdHJpYnV0aW9uCi8vIEJhbmdlciBEaXN0cmlidXRpb246ICAgICAgIGJhbmdlcl9kaXN0cmlidXRpb24KLy8gSGFwcGluZXNzIFRpbWVsaW5lICAgICAgICAgaGFwcGluZXNzX3RpbWVsaW5lCi8vIFRvcCAzMCBTb25nczogICAgICAgICAgICAgIG1vc3RfcGxheWVkX3RyYWNrcyAgICAgICAgICBUcnVlCi8vIFRvcCAzMCBBcnRpc3RzOiAgICAgICAgICAgIG1vc3RfcGxheWVkX2FydGlzdHMgICAgICAgICBUcnVlCi8vIEV4dHJlbWVzIFRvcCAxMDogICAgICAgICAgIGV4dHJlbWVzCgoKdmFyIHNhdmVMaWJyYXJ5ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYxNCA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQoY29udGV4dCwgcGF5bG9hZCkgewogICAgdmFyIGRhdGEsIF9rZXlzLCBfY2hhcnRzLCBpLCBqOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoISghcGF5bG9hZC5wcml2YXRlICYmICFwYXlsb2FkLmluY2x1ZGUubnVtZXJpY2FsX2RhdGEgJiYgIXBheWxvYWQuaW5jbHVkZS5hdWRpb19mZWF0dXJlcyAmJiAhcGF5bG9hZC5pbmNsdWRlLm1vc3RfcGxheWVkX3RyYWNrcyAmJiAhcGF5bG9hZC5pbmNsdWRlLm1vc3RfcGxheWVkX2FydGlzdHMpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGRhdGEgPSB7fTsKICAgICAgICAgICAgZGF0YS5pbmNsdWRlID0gcGF5bG9hZC5pbmNsdWRlOwogICAgICAgICAgICBkYXRhLm5hbWUgPSBwYXlsb2FkLm5hbWU7CiAgICAgICAgICAgIGRhdGEucHJpdmF0ZSA9IHBheWxvYWQucHJpdmF0ZTsKICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gODsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goJ2NvbnZlcnRUcmFja3MnLCBwYXlsb2FkLmluY2x1ZGUpOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgZGF0YS50cmFja3MgPSBfY29udGV4dDE0LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDExOwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgnY29udmVydEFydGlzdHMnLCBwYXlsb2FkLmluY2x1ZGUpOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGRhdGEuYXJ0aXN0cyA9IF9jb250ZXh0MTQuc2VudDsKICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gMTQ7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCdjb252ZXJ0R2VucmVzJywgcGF5bG9hZC5pbmNsdWRlKTsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBkYXRhLmdlbnJlcyA9IF9jb250ZXh0MTQuc2VudDsKICAgICAgICAgICAgaWYgKHBheWxvYWQuaW5jbHVkZS5udW1lcmljYWxfZGF0YSkgZGF0YS5udW1lcmljYWxfZGF0YSA9IHsKICAgICAgICAgICAgICB0b3RhbDogY29udGV4dC5zdGF0ZS5wcm9ncmVzcy50b3RhbCwKICAgICAgICAgICAgICBhcnRpc3RzOiBPYmplY3Qua2V5cyhjb250ZXh0LnN0YXRlLmFydGlzdHMpLmxlbmd0aCwKICAgICAgICAgICAgICBnZW5yZXM6IE9iamVjdC5rZXlzKGNvbnRleHQuc3RhdGUuZ2VucmVzKS5sZW5ndGgKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGlmIChwYXlsb2FkLmluY2x1ZGUubW9zdF9zYXZlZF9hcnRpc3RzIHx8IHBheWxvYWQuaW5jbHVkZS5tb3N0X3NhdmVkX2dlbnJlcykgewogICAgICAgICAgICAgIGRhdGEudG9wU2F2ZWQgPSB7fTsKICAgICAgICAgICAgICBpZiAocGF5bG9hZC5pbmNsdWRlLm1vc3Rfc2F2ZWRfYXJ0aXN0cykgZGF0YS50b3BTYXZlZC5hcnRpc3RzID0gY29udGV4dC5zdGF0ZS50b3BTYXZlZC5hcnRpc3RzLnNsaWNlKDAsIDIwKTsKICAgICAgICAgICAgICBpZiAocGF5bG9hZC5pbmNsdWRlLm1vc3Rfc2F2ZWRfZ2VucmVzKSBkYXRhLnRvcFNhdmVkLmdlbnJlcyA9IGNvbnRleHQuc3RhdGUudG9wU2F2ZWQuZ2VucmVzLnNsaWNlKDAsIDIwKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHBheWxvYWQuaW5jbHVkZS5tb3N0X3BsYXllZF90cmFja3MgfHwgcGF5bG9hZC5pbmNsdWRlLm1vc3RfcGxheWVkX2FydGlzdHMpIHsKICAgICAgICAgICAgICBkYXRhLnRvcFBsYXllZCA9IHt9OwogICAgICAgICAgICAgIGlmIChwYXlsb2FkLmluY2x1ZGUubW9zdF9wbGF5ZWRfdHJhY2tzKSBkYXRhLnRvcFBsYXllZC50cmFja3MgPSBbXTsKICAgICAgICAgICAgICBkYXRhLnRvcFBsYXllZC50cmFja3NbMF0gPSBjb250ZXh0LnN0YXRlLnRvcFBsYXllZC50cmFja3NbMF0uc2xpY2UoMCwgMjApOwogICAgICAgICAgICAgIGRhdGEudG9wUGxheWVkLnRyYWNrc1sxXSA9IGNvbnRleHQuc3RhdGUudG9wUGxheWVkLnRyYWNrc1sxXS5zbGljZSgwLCAyMCk7CiAgICAgICAgICAgICAgZGF0YS50b3BQbGF5ZWQudHJhY2tzWzJdID0gY29udGV4dC5zdGF0ZS50b3BQbGF5ZWQudHJhY2tzWzJdLnNsaWNlKDAsIDIwKTsKICAgICAgICAgICAgICBpZiAocGF5bG9hZC5pbmNsdWRlLm1vc3RfcGxheWVkX2FydGlzdHMpIGRhdGEudG9wUGxheWVkLmFydGlzdHMgPSBbXTsKICAgICAgICAgICAgICBkYXRhLnRvcFBsYXllZC5hcnRpc3RzWzBdID0gY29udGV4dC5zdGF0ZS50b3BQbGF5ZWQuYXJ0aXN0c1swXS5zbGljZSgwLCAyMCk7CiAgICAgICAgICAgICAgZGF0YS50b3BQbGF5ZWQuYXJ0aXN0c1sxXSA9IGNvbnRleHQuc3RhdGUudG9wUGxheWVkLmFydGlzdHNbMV0uc2xpY2UoMCwgMjApOwogICAgICAgICAgICAgIGRhdGEudG9wUGxheWVkLmFydGlzdHNbMl0gPSBjb250ZXh0LnN0YXRlLnRvcFBsYXllZC5hcnRpc3RzWzJdLnNsaWNlKDAsIDIwKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHBheWxvYWQuaW5jbHVkZS5hdWRpb19mZWF0dXJlcyB8fCBwYXlsb2FkLmluY2x1ZGUubnVtZXJpY2FsX2ZlYXR1cmVzIHx8IHBheWxvYWQuaW5jbHVkZS5leHRyZW1lcyB8fCBwYXlsb2FkLmluY2x1ZGUucHJvYmFiaWxpdHlfZmVhdHVyZXMpIHsKICAgICAgICAgICAgICBkYXRhLmF1ZGlvRmVhdHVyZXMgPSB7CiAgICAgICAgICAgICAgICBhY291c3RpY25lc3M6IHt9LAogICAgICAgICAgICAgICAgZGFuY2VhYmlsaXR5OiB7fSwKICAgICAgICAgICAgICAgIGVuZXJneToge30sCiAgICAgICAgICAgICAgICBpbnN0cnVtZW50YWxuZXNzOiB7fSwKICAgICAgICAgICAgICAgIGxpdmVuZXNzOiB7fSwKICAgICAgICAgICAgICAgIGxvdWRuZXNzOiB7fSwKICAgICAgICAgICAgICAgIHNwZWVjaGluZXNzOiB7fSwKICAgICAgICAgICAgICAgIHRlbXBvOiB7fSwKICAgICAgICAgICAgICAgIHZhbGVuY2U6IHt9LAogICAgICAgICAgICAgICAgYmFuZ2VyOiB7fQogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIGlmIChwYXlsb2FkLmluY2x1ZGUuYXVkaW9fZmVhdHVyZXMpIHsKICAgICAgICAgICAgICAgIGRhdGEuYXVkaW9GZWF0dXJlcy52YWxlbmNlLnZhbHVlID0gY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzLnZhbGVuY2UudmFsdWU7CiAgICAgICAgICAgICAgICBkYXRhLmF1ZGlvRmVhdHVyZXMuZW5lcmd5LnZhbHVlID0gY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzLmVuZXJneS52YWx1ZTsKICAgICAgICAgICAgICAgIGRhdGEuYXVkaW9GZWF0dXJlcy5kYW5jZWFiaWxpdHkudmFsdWUgPSBjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXMuZGFuY2VhYmlsaXR5LnZhbHVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHBheWxvYWQuaW5jbHVkZS5udW1lcmljYWxfZmVhdHVyZXMpIHsKICAgICAgICAgICAgICAgIGRhdGEuYXVkaW9GZWF0dXJlcy50ZW1wby52YWx1ZSA9IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlcy50ZW1wby52YWx1ZTsKICAgICAgICAgICAgICAgIGRhdGEuYXVkaW9GZWF0dXJlcy5sb3VkbmVzcy52YWx1ZSA9IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlcy5sb3VkbmVzcy52YWx1ZTsKICAgICAgICAgICAgICAgIGRhdGEubW9kZSA9IGNvbnRleHQuc3RhdGUubW9kZS52YWx1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChwYXlsb2FkLmluY2x1ZGUucHJvYmFiaWxpdHlfZmVhdHVyZXMpIHsKICAgICAgICAgICAgICAgIGRhdGEuYXVkaW9GZWF0dXJlcy5hY291c3RpY25lc3MudmFsdWUgPSBjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXMuYWNvdXN0aWNuZXNzLnZhbHVlOwogICAgICAgICAgICAgICAgZGF0YS5hdWRpb0ZlYXR1cmVzLmluc3RydW1lbnRhbG5lc3MudmFsdWUgPSBjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXMuaW5zdHJ1bWVudGFsbmVzcy52YWx1ZTsKICAgICAgICAgICAgICAgIGRhdGEuYXVkaW9GZWF0dXJlcy5saXZlbmVzcy52YWx1ZSA9IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlcy5saXZlbmVzcy52YWx1ZTsKICAgICAgICAgICAgICAgIGRhdGEuYXVkaW9GZWF0dXJlcy5zcGVlY2hpbmVzcy52YWx1ZSA9IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlcy5zcGVlY2hpbmVzcy52YWx1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChwYXlsb2FkLmluY2x1ZGUuZXh0cmVtZXMpIHsKICAgICAgICAgICAgICAgIF9rZXlzID0gT2JqZWN0LmtleXMoZGF0YS5hdWRpb0ZlYXR1cmVzKTsKICAgICAgICAgICAgICAgIF9jaGFydHMgPSBbIm1pbmNoYXJ0IiwgIm1heGNoYXJ0Il07CgogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IF9rZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBfY2hhcnRzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5hdWRpb0ZlYXR1cmVzW19rZXlzW2ldXVtfY2hhcnRzW2pdXSA9IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlc1tfa2V5c1tpXV1bX2NoYXJ0c1tqXV0uc2xpY2UoMCwgMTApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocGF5bG9hZC5pbmNsdWRlLmhhcHBpbmVzc19kaXN0cmlidXRpb24pIHsKICAgICAgICAgICAgICAgIGRhdGEuYXVkaW9GZWF0dXJlcy52YWxlbmNlLnBsb3QgPSBjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXMudmFsZW5jZS5wbG90OwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHBheWxvYWQuaW5jbHVkZS5lbmVyZ3lfZGlzdHJpYnV0aW9uKSB7CiAgICAgICAgICAgICAgICBkYXRhLmF1ZGlvRmVhdHVyZXMuZW5lcmd5LnBsb3QgPSBjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXMuZW5lcmd5LnBsb3Q7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocGF5bG9hZC5pbmNsdWRlLmRhbmNlYWJpbGl0eV9kaXN0cmlidXRpb24pIHsKICAgICAgICAgICAgICAgIGRhdGEuYXVkaW9GZWF0dXJlcy5kYW5jZWFiaWxpdHkucGxvdCA9IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlcy5kYW5jZWFiaWxpdHkucGxvdDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChwYXlsb2FkLmluY2x1ZGUuYmFuZ2VyX2Rpc3RyaWJ1dGlvbikgewogICAgICAgICAgICAgICAgZGF0YS5hdWRpb0ZlYXR1cmVzLmJhbmdlci5wbG90ID0gY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzLmJhbmdlci5wbG90OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHBheWxvYWQuaW5jbHVkZS5hZGRlZF90aW1lbGluZSkgZGF0YS5kYXRlQWRkZWQgPSBjb250ZXh0LnN0YXRlLmRhdGVBZGRlZDsKCiAgICAgICAgICAgIGlmIChwYXlsb2FkLmluY2x1ZGUuaGFwcGluZXNzX3RpbWVsaW5lKSB7CiAgICAgICAgICAgICAgZGF0YS5oYXBwaW5lc3NUaW1lbGluZSA9IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlcy52YWxlbmNlLnRpbWVsaW5lOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIGRhdGEpOwoKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMTQpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIHNhdmVMaWJyYXJ5KF94MjEsIF94MjIpIHsKICAgIHJldHVybiBfcmVmMTQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIEluY2x1ZGUgT2JqZWN0CgoKdmFyIGNvbnZlcnRUcmFja3MgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjE1ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNShjb250ZXh0LCBwYXlsb2FkKSB7CiAgICB2YXIgcmVxVHJhY2tzLCBhZGRUcmFja3MsIG5vblJlcGVhdGVkVHJhY2tzLCBpLCBpZHMsIF9pMjsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmVxVHJhY2tzID0ge307CiAgICAgICAgICAgIGFkZFRyYWNrcyA9IFtdOwoKICAgICAgICAgICAgaWYgKCFwYXlsb2FkLm1vc3RfcGxheWVkX3RyYWNrcykgewogICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0MTUudDAgPSBhZGRUcmFja3M7CiAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCdnYXRoZXJNb3N0UGxheWVkVHJhY2tzJyk7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBfY29udGV4dDE1LnQxID0gX2NvbnRleHQxNS5zZW50OwogICAgICAgICAgICBhZGRUcmFja3MgPSBfY29udGV4dDE1LnQwLmNvbmNhdC5jYWxsKF9jb250ZXh0MTUudDAsIF9jb250ZXh0MTUudDEpOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgaWYgKCFwYXlsb2FkLmV4dHJlbWVzKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0MTUudDIgPSBhZGRUcmFja3M7CiAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDEyOwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgnZ2F0aGVyRXh0cmVtZXMnKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBfY29udGV4dDE1LnQzID0gX2NvbnRleHQxNS5zZW50OwogICAgICAgICAgICBhZGRUcmFja3MgPSBfY29udGV4dDE1LnQyLmNvbmNhdC5jYWxsKF9jb250ZXh0MTUudDIsIF9jb250ZXh0MTUudDMpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIG5vblJlcGVhdGVkVHJhY2tzID0ge307CgogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYWRkVHJhY2tzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgaWYgKCEoYWRkVHJhY2tzW2ldIGluIG5vblJlcGVhdGVkVHJhY2tzKSkgbm9uUmVwZWF0ZWRUcmFja3NbYWRkVHJhY2tzW2ldXSA9IDA7ZWxzZSB7CiAgICAgICAgICAgICAgICBub25SZXBlYXRlZFRyYWNrc1thZGRUcmFja3NbaV1dICs9IDE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZHMgPSBPYmplY3Qua2V5cyhub25SZXBlYXRlZFRyYWNrcyk7CiAgICAgICAgICAgIF9pMiA9IDA7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgaWYgKCEoX2kyIDwgaWRzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAyNTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMjE7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCJjb21wcmVzc1RyYWNrIiwgY29udGV4dC5zdGF0ZS50cmFja3NbaWRzW19pMl1dKTsKCiAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICByZXFUcmFja3NbaWRzW19pMl1dID0gX2NvbnRleHQxNS5zZW50OwoKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIF9pMisrOwogICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAxODsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJyZXR1cm4iLCByZXFUcmFja3MpOwoKICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMTUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGNvbnZlcnRUcmFja3MoX3gyMywgX3gyNCkgewogICAgcmV0dXJuIF9yZWYxNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8gTm90aGluZwoKCnZhciBnYXRoZXJNb3N0UGxheWVkVHJhY2tzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYxNiA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTYoY29udGV4dCkgewogICAgdmFyIGlkcywgaSwgajsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTYkKF9jb250ZXh0MTYpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTYucHJldiA9IF9jb250ZXh0MTYubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZHMgPSBbXTsKCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb250ZXh0LnN0YXRlLnRvcFBsYXllZC50cmFja3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgY29udGV4dC5zdGF0ZS50b3BQbGF5ZWQudHJhY2tzW2ldLmxlbmd0aCAmJiBqIDwgMjA7IGorKykgewogICAgICAgICAgICAgICAgaWRzLnB1c2goY29udGV4dC5zdGF0ZS50b3BQbGF5ZWQudHJhY2tzW2ldW2pdKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIiwgaWRzKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMTYpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGdhdGhlck1vc3RQbGF5ZWRUcmFja3MoX3gyNSkgewogICAgcmV0dXJuIF9yZWYxNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8gTm90aGluZwoKCnZhciBnYXRoZXJFeHRyZW1lcyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMTcgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE3KGNvbnRleHQpIHsKICAgIHZhciBrZXlzLCBjaGFydHMsIGlkcywgaSwgaiwgazsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTckKF9jb250ZXh0MTcpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTcucHJldiA9IF9jb250ZXh0MTcubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBrZXlzID0gT2JqZWN0LmtleXMoY29udGV4dC5zdGF0ZS5hdWRpb0ZlYXR1cmVzKTsKICAgICAgICAgICAgY2hhcnRzID0gWyJtaW5jaGFydCIsICJtYXhjaGFydCJdOwogICAgICAgICAgICBpZHMgPSBbXTsKCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGNoYXJ0cy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IGNvbnRleHQuc3RhdGUuYXVkaW9GZWF0dXJlc1trZXlzW2ldXVtjaGFydHNbal1dLmxlbmd0aCAmJiBrIDwgMTA7IGsrKykgewogICAgICAgICAgICAgICAgICBpZHMucHVzaChjb250ZXh0LnN0YXRlLmF1ZGlvRmVhdHVyZXNba2V5c1tpXV1bY2hhcnRzW2pdXVtrXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5hYnJ1cHQoInJldHVybiIsIGlkcyk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTE3KTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnYXRoZXJFeHRyZW1lcyhfeDI2KSB7CiAgICByZXR1cm4gX3JlZjE3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyBUcmFjayBvYmplY3QKCgp2YXIgY29tcHJlc3NUcmFjayA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMTggPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE4KGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHZhciBuZXdBcnRpc3RzLCBpOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOCQoX2NvbnRleHQxOCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQxOC5wcmV2ID0gX2NvbnRleHQxOC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIG5ld0FydGlzdHMgPSBbXTsKCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBwYXlsb2FkLmFydGlzdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBpZiAoX3R5cGVvZihwYXlsb2FkLmFydGlzdHNbaV0pID09ICdvYmplY3QnKSBuZXdBcnRpc3RzLnB1c2goewogICAgICAgICAgICAgICAgaWQ6IHBheWxvYWQuYXJ0aXN0c1tpXSwKICAgICAgICAgICAgICAgIG5hbWU6IHBheWxvYWQuYXJ0aXN0c1tpXS5uYW1lCiAgICAgICAgICAgICAgfSk7ZWxzZSBuZXdBcnRpc3RzLnB1c2goewogICAgICAgICAgICAgICAgaWQ6IHBheWxvYWQuYXJ0aXN0c1tpXSwKICAgICAgICAgICAgICAgIG5hbWU6IGNvbnRleHQuc3RhdGUuYXJ0aXN0c1twYXlsb2FkLmFydGlzdHNbaV1dLm5hbWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgaWQ6IHBheWxvYWQuaWQsCiAgICAgICAgICAgICAgbmFtZTogcGF5bG9hZC5uYW1lLAogICAgICAgICAgICAgIGltYWdlOiBwYXlsb2FkLmFsYnVtLmltYWdlc1swXS51cmwsCiAgICAgICAgICAgICAgYXJ0aXN0czogbmV3QXJ0aXN0cwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMTgpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGNvbXByZXNzVHJhY2soX3gyNywgX3gyOCkgewogICAgcmV0dXJuIF9yZWYxOC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8gTm9uZQoKCnZhciBjb252ZXJ0QXJ0aXN0cyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMTkgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE5KGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHZhciByZXFBcnRpc3RzLCBhZGRBcnRpc3RzLCBub25SZXBlYXRlZEFydGlzdHMsIGksIGlkcywgX2kzOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTkkKF9jb250ZXh0MTkpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTkucHJldiA9IF9jb250ZXh0MTkubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZXFBcnRpc3RzID0ge307CiAgICAgICAgICAgIGFkZEFydGlzdHMgPSBbXTsKCiAgICAgICAgICAgIGlmICghcGF5bG9hZC5tb3N0X3BsYXllZF9hcnRpc3RzKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQxOS5uZXh0ID0gODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQxOS50MCA9IGFkZEFydGlzdHM7CiAgICAgICAgICAgIF9jb250ZXh0MTkubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCdnYXRoZXJNb3N0UGxheWVkQXJ0aXN0cycpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgX2NvbnRleHQxOS50MSA9IF9jb250ZXh0MTkuc2VudDsKICAgICAgICAgICAgYWRkQXJ0aXN0cyA9IF9jb250ZXh0MTkudDAuY29uY2F0LmNhbGwoX2NvbnRleHQxOS50MCwgX2NvbnRleHQxOS50MSk7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBpZiAoIXBheWxvYWQubW9zdF9zYXZlZF9hcnRpc3RzKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQxOS5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0MTkudDIgPSBhZGRBcnRpc3RzOwogICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSAxMjsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goJ2dhdGhlck1vc3RTYXZlZEFydGlzdHMnKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBfY29udGV4dDE5LnQzID0gX2NvbnRleHQxOS5zZW50OwogICAgICAgICAgICBhZGRBcnRpc3RzID0gX2NvbnRleHQxOS50Mi5jb25jYXQuY2FsbChfY29udGV4dDE5LnQyLCBfY29udGV4dDE5LnQzKTsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBub25SZXBlYXRlZEFydGlzdHMgPSB7fTsKCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhZGRBcnRpc3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgaWYgKCEoYWRkQXJ0aXN0c1tpXSBpbiBub25SZXBlYXRlZEFydGlzdHMpKSBub25SZXBlYXRlZEFydGlzdHNbYWRkQXJ0aXN0c1tpXV0gPSAxO2Vsc2UgewogICAgICAgICAgICAgICAgbm9uUmVwZWF0ZWRBcnRpc3RzW2FkZEFydGlzdHNbaV1dICs9IDE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZHMgPSBPYmplY3Qua2V5cyhub25SZXBlYXRlZEFydGlzdHMpOwogICAgICAgICAgICBfaTMgPSAwOwoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIGlmICghKF9pMyA8IGlkcy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQxOS5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0MTkubmV4dCA9IDIxOwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiY29tcHJlc3NBcnRpc3QiLCBjb250ZXh0LnN0YXRlLmFydGlzdHNbaWRzW19pM11dKTsKCiAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICByZXFBcnRpc3RzW2lkc1tfaTNdXSA9IF9jb250ZXh0MTkuc2VudDsKCiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICBfaTMrKzsKICAgICAgICAgICAgX2NvbnRleHQxOS5uZXh0ID0gMTg7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdCgicmV0dXJuIiwgcmVxQXJ0aXN0cyk7CgogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUxOSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gY29udmVydEFydGlzdHMoX3gyOSwgX3gzMCkgewogICAgcmV0dXJuIF9yZWYxOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8gTm90aGluZwoKCnZhciBnYXRoZXJNb3N0UGxheWVkQXJ0aXN0cyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMjAgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIwKGNvbnRleHQpIHsKICAgIHZhciBpZHMsIGksIGo7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIwJChfY29udGV4dDIwKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIwLnByZXYgPSBfY29udGV4dDIwLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaWRzID0gW107CgogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29udGV4dC5zdGF0ZS50b3BQbGF5ZWQuYXJ0aXN0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBjb250ZXh0LnN0YXRlLnRvcFBsYXllZC5hcnRpc3RzW2ldLmxlbmd0aCAmJiBqIDwgMjA7IGorKykgewogICAgICAgICAgICAgICAgaWRzLnB1c2goY29udGV4dC5zdGF0ZS50b3BQbGF5ZWQuYXJ0aXN0c1tpXVtqXSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5hYnJ1cHQoInJldHVybiIsIGlkcyk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjAuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIwKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnYXRoZXJNb3N0UGxheWVkQXJ0aXN0cyhfeDMxKSB7CiAgICByZXR1cm4gX3JlZjIwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyBOb3RoaW5nCgoKdmFyIGdhdGhlck1vc3RTYXZlZEFydGlzdHMgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjIxID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMShjb250ZXh0KSB7CiAgICB2YXIgaWRzLCBpOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMSQoX2NvbnRleHQyMSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMS5wcmV2ID0gX2NvbnRleHQyMS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlkcyA9IFtdOwoKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvbnRleHQuc3RhdGUudG9wU2F2ZWQuYXJ0aXN0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGlkcy5wdXNoKGNvbnRleHQuc3RhdGUudG9wU2F2ZWQuYXJ0aXN0c1tpXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLmFicnVwdCgicmV0dXJuIiwgaWRzKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMjEpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGdhdGhlck1vc3RTYXZlZEFydGlzdHMoX3gzMikgewogICAgcmV0dXJuIF9yZWYyMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8gVHJhY2sgb2JqZWN0CgoKdmFyIGNvbXByZXNzQXJ0aXN0ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYyMiA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjIoY29udGV4dCwgcGF5bG9hZCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMiQoX2NvbnRleHQyMikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMi5wcmV2ID0gX2NvbnRleHQyMi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIyLmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIGlkOiBwYXlsb2FkLmlkLAogICAgICAgICAgICAgIG5hbWU6IHBheWxvYWQubmFtZSwKICAgICAgICAgICAgICBpbWFnZTogcGF5bG9hZC5pbWFnZSwKICAgICAgICAgICAgICBnZW5yZXM6IHBheWxvYWQuZ2VucmVzLAogICAgICAgICAgICAgIHRyYWNrczogcGF5bG9hZC50cmFja3MKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIyKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBjb21wcmVzc0FydGlzdChfeDMzLCBfeDM0KSB7CiAgICByZXR1cm4gX3JlZjIyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyBJbmNsdWRlIE9iamVjdAoKCnZhciBjb252ZXJ0R2VucmVzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYyMyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjMoY29udGV4dCwgcGF5bG9hZCkgewogICAgdmFyIHJlcUdlbnJlcywgaTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjMkKF9jb250ZXh0MjMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjMucHJldiA9IF9jb250ZXh0MjMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZXFHZW5yZXMgPSB7fTsKCiAgICAgICAgICAgIGlmIChwYXlsb2FkLm1vc3Rfc2F2ZWRfZ2VucmVzKSB7CiAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvbnRleHQuc3RhdGUudG9wU2F2ZWQuZ2VucmVzLmxlbmd0aCAmJiBpIDwgMjA7IGkrKykgewogICAgICAgICAgICAgICAgcmVxR2VucmVzW2NvbnRleHQuc3RhdGUudG9wU2F2ZWQuZ2VucmVzW2ldXSA9IGNvbnRleHQuc3RhdGUuZ2VucmVzW2NvbnRleHQuc3RhdGUudG9wU2F2ZWQuZ2VucmVzW2ldXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIzLmFicnVwdCgicmV0dXJuIiwgcmVxR2VucmVzKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMjMpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGNvbnZlcnRHZW5yZXMoX3gzNSwgX3gzNikgewogICAgcmV0dXJuIF9yZWYyMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBBTkFMWVNJUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCi8qDQogICAgYWxidW06IHthbGJ1bV90eXBlOiAiYWxidW0iLCBhcnRpc3RzOiBBcnJheSgxKSwgYXZhaWxhYmxlX21hcmtldHM6IEFycmF5KDc4KSwgZXh0ZXJuYWxfdXJsczoge+KApn0sIGhyZWY6ICJodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9hbGJ1bXMvNU1tTW9tc3BhdTFWNVlwWGpIWUpSeSIsIOKApn0NCiAgICBhcnRpc3RzOiBbe+KApn1dDQogICAgYXZhaWxhYmxlX21hcmtldHM6ICg3OCkgWyJBRCIsICJBRSIsICJBUiIsICJBVCIsICJBVSIsICJCRSIsICJCRyIsICJCSCIsICJCTyIsICJCUiIsICJDQSIsICJDSCIsICJDTCIsICJDTyIsICJDUiIsICJDWSIsICJDWiIsICJERSIsICJESyIsICJETyIsICJEWiIsICJFQyIsICJFRSIsICJFRyIsICJFUyIsICJGSSIsICJGUiIsICJHQiIsICJHUiIsICJHVCIsICJISyIsICJITiIsICJIVSIsICJJRCIsICJJRSIsICJJTCIsICJJTiIsICJJUyIsICJJVCIsICJKTyIsICJLVyIsICJMQiIsICJMSSIsICJMVCIsICJMVSIsICJMViIsICJNQSIsICJNQyIsICJNVCIsICJNWCIsICJNWSIsICJOSSIsICJOTCIsICJOTyIsICJOWiIsICJPTSIsICJQQSIsICJQRSIsICJQSCIsICJQTCIsICJQUyIsICJQVCIsICJQWSIsICJRQSIsICJSTyIsICJTQSIsICJTRSIsICJTRyIsICJTSyIsICJTViIsICJUSCIsICJUTiIsICJUUiIsICJUVyIsICJVUyIsICJVWSIsICJWTiIsICJaQSJdDQogICAgZGlzY19udW1iZXI6IDENCiAgICBkdXJhdGlvbl9tczogMjk2ODk5DQogICAgZXhwbGljaXQ6IGZhbHNlDQogICAgZXh0ZXJuYWxfaWRzOiB7aXNyYzogIkdCQ0ZCMTIwMDEwNiJ9DQogICAgZXh0ZXJuYWxfdXJsczoge3Nwb3RpZnk6ICJodHRwczovL29wZW4uc3BvdGlmeS5jb20vdHJhY2svNzRDc3E1RE1hT0JTaExVaEk2TlU1QSJ9DQogICAgaHJlZjogImh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL3RyYWNrcy83NENzcTVETWFPQlNoTFVoSTZOVTVBIg0KICAgIGlkOiAiNzRDc3E1RE1hT0JTaExVaEk2TlU1QSINCiAgICBpc19sb2NhbDogZmFsc2UNCiAgICBuYW1lOiAiQ3Vyc2UgTWUgR29vZCINCiAgICBwb3B1bGFyaXR5OiA1MA0KICAgIHByZXZpZXdfdXJsOiAiaHR0cHM6Ly9wLnNjZG4uY28vbXAzLXByZXZpZXcvZWE4YWY5MWVlZmQyOGZhZjJhYjVjNzNiNmRjNWE1OTZiZjBkNWI5Yj9jaWQ9NDI5MDNlZWIyYmY5NDNjNGJkNDkwMzM3MGY3YTkzZjUiDQogICAgdHJhY2tfbnVtYmVyOiAyDQogICAgdHlwZTogInRyYWNrIg0KICAgIHVyaTogInNwb3RpZnk6dHJhY2s6NzQNCg0KDQogICAgYWNvdXN0aWNuZXNzOiAwLjAxMDUNCiAgICBhbGJ1bToge2V4dGVybmFsX3VybHM6IHvigKZ9LCBocmVmOiAiaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL2FsYnVtLzVNbU1vbXNwYXUxVjVZcFhqSFlKUnkiLCBpZDogIjVNbU1vbXNwYXUxVjVZcFhqSFlKUnkiLCBpbWFnZXM6IEFycmF5KDMpLCBuYW1lOiAiVGhlIEdsb3Jpb3VzIERlYWQiLCDigKZ9DQogICAgYXJ0aXN0czogWyIwYlpDYWsydGNSTVkxZHpFSXV3RjQyIl0NCiAgICBiYW5nZXI6IDAuNjg0OTk5OTk5OTk5OTk5OQ0KICAgIGRhbmNlYWJpbGl0eTogMC44MDkNCiAgICBkYXRlOiAiMjAxOC0wOS0yM1QyMzozNDozM1oiDQogICAgZHVyYXRpb25fbXM6IDI5NjkwMA0KICAgIGVuZXJneTogMC44MTQNCiAgICBleHBsaWNpdDogZmFsc2UNCiAgICBocmVmOiAiaHR0cHM6Ly9vcGVuLnNwb3RpZnkuY29tL3RyYWNrLzc0Q3NxNURNYU9CU2hMVWhJNk5VNUEiDQogICAgaWQ6ICI3NENzcTVETWFPQlNoTFVoSTZOVTVBIg0KICAgIGluc3RydW1lbnRhbG5lc3M6IDAuMDAwMDI0OA0KICAgIGlzX2xvY2FsOiBmYWxzZQ0KICAgIGtleTogNg0KICAgIGxpdmVuZXNzOiAwLjA5OQ0KICAgIGxvdWRuZXNzOiAtNi44MjkNCiAgICBtb2RlOiAwDQogICAgbmFtZTogIkN1cnNlIE1lIEdvb2QiDQogICAgcG9wdWxhcml0eTogNTANCiAgICBwcmV2aWV3X3VybDogImh0dHBzOi8vcC5zY2RuLmNvL21wMy1wcmV2aWV3L2VhOGFmOTFlZWZkMjhmYWYyYWI1YzczYjZkYzVhNTk2YmYwZDViOWI/Y2lkPTQyOTAzZWViMmJmOTQzYzRiZDQ5MDMzNzBmN2E5M2Y1Ig0KICAgIHNwZWVjaGluZXNzOiAwLjAzMzgNCiAgICB0ZW1wbzogMTE4DQogICAgdGltZV9zaWduYXR1cmU6IDQNCiAgICB0cmFja19udW1iZXI6IDINCiAgICB2YWxlbmNlOiAwLjgwNA0KKi8KCgp2YXIgc29uZ0FuYWx5c2lzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYyNCA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjQoY29udGV4dCwgaWQpIHsKICAgIHZhciB0cmFja0RhdGE7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI0JChfY29udGV4dDI0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDI0LnByZXYgPSBfY29udGV4dDI0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQyNC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goJ2dldFRyYWNrJywgaWQpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgdHJhY2tEYXRhID0gX2NvbnRleHQyNC5zZW50OwogICAgICAgICAgICBfY29udGV4dDI0Lm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgnc29uZ0FuYWx5c2lzRmVhdHVyZXMnLCB7CiAgICAgICAgICAgICAgdHJhY2tEYXRhOiB0cmFja0RhdGEsCiAgICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgdHJhY2tEYXRhID0gX2NvbnRleHQyNC5zZW50OwogICAgICAgICAgICBfY29udGV4dDI0Lm5leHQgPSA4OwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgnY2xlYW5BdWRpb0FuYWx5c2lzJywgewogICAgICAgICAgICAgIGlkOiBpZAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIHRyYWNrRGF0YS5hdWRpb0FuYWx5c2lzID0gX2NvbnRleHQyNC5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNC5hYnJ1cHQoInJldHVybiIsIHRyYWNrRGF0YSk7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyNCk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gc29uZ0FuYWx5c2lzKF94MzcsIF94MzgpIHsKICAgIHJldHVybiBfcmVmMjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIHtpZDogU3RyaW5nfQoKCnZhciBzb25nQW5hbHlzaXNGZWF0dXJlcyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMjUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI1KGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHZhciBzb25nLCBhdWRpb0ZlYXR1cmVzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNSQoX2NvbnRleHQyNSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyNS5wcmV2ID0gX2NvbnRleHQyNS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHNvbmcgPSBwYXlsb2FkLnRyYWNrRGF0YTsKICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goJ2dldEF1ZGlvRmVhdHVyZXNGb3JUcmFjaycsIHBheWxvYWQuaWQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgYXVkaW9GZWF0dXJlcyA9IF9jb250ZXh0MjUuc2VudDsKICAgICAgICAgICAgc29uZy5hY291c3RpY25lc3MgPSBhdWRpb0ZlYXR1cmVzLmFjb3VzdGljbmVzczsKICAgICAgICAgICAgc29uZy5kYW5jZWFiaWxpdHkgPSBhdWRpb0ZlYXR1cmVzLmRhbmNlYWJpbGl0eTsKICAgICAgICAgICAgc29uZy5lbmVyZ3kgPSBhdWRpb0ZlYXR1cmVzLmVuZXJneTsKICAgICAgICAgICAgc29uZy5pbnN0cnVtZW50YWxuZXNzID0gYXVkaW9GZWF0dXJlcy5pbnN0cnVtZW50YWxuZXNzOwogICAgICAgICAgICBzb25nLmtleSA9IGF1ZGlvRmVhdHVyZXMua2V5OwogICAgICAgICAgICBzb25nLmxpdmVuZXNzID0gYXVkaW9GZWF0dXJlcy5saXZlbmVzczsKICAgICAgICAgICAgc29uZy5sb3VkbmVzcyA9IGF1ZGlvRmVhdHVyZXMubG91ZG5lc3M7CiAgICAgICAgICAgIHNvbmcubW9kZSA9IGF1ZGlvRmVhdHVyZXMubW9kZTsKICAgICAgICAgICAgc29uZy5zcGVlY2hpbmVzcyA9IGF1ZGlvRmVhdHVyZXMuc3BlZWNoaW5lc3M7CiAgICAgICAgICAgIHNvbmcudGVtcG8gPSBhdWRpb0ZlYXR1cmVzLnRlbXBvOwogICAgICAgICAgICBzb25nLnZhbGVuY2UgPSBhdWRpb0ZlYXR1cmVzLnZhbGVuY2U7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI1LmFicnVwdCgicmV0dXJuIiwgc29uZyk7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI1LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyNSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gc29uZ0FuYWx5c2lzRmVhdHVyZXMoX3gzOSwgX3g0MCkgewogICAgcmV0dXJuIF9yZWYyNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBjbGVhbkF1ZGlvQW5hbHlzaXMgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjI2ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNihjb250ZXh0LCBwYXlsb2FkKSB7CiAgICB2YXIgYXVkaW9BbmFseXNpc1NlZ21lbnRzLCBhdWRpb0FuYWx5c2lzLCBuZXdTZWdtZW50cywgd2lkdGgsIGksIGl0ZW1JbmRleCwgc3VtLCBqLCBhdmVyYWdlUGl0Y2gsIGNvbG9yLCBsb3VkbmVzczsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjYkKF9jb250ZXh0MjYpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjYucHJldiA9IF9jb250ZXh0MjYubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBhdWRpb0FuYWx5c2lzU2VnbWVudHMgPSA4MDsKICAgICAgICAgICAgX2NvbnRleHQyNi5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlzcGF0Y2goJ2dldEF1ZGlvQW5hbHlzaXNGb3JUcmFjaycsIHBheWxvYWQuaWQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgYXVkaW9BbmFseXNpcyA9IF9jb250ZXh0MjYuc2VudDsKICAgICAgICAgICAgbmV3U2VnbWVudHMgPSBbXTsKICAgICAgICAgICAgaWYgKGF1ZGlvQW5hbHlzaXMuc2VnbWVudHMubGVuZ3RoIDwgYXVkaW9BbmFseXNpc1NlZ21lbnRzKSBhdWRpb0FuYWx5c2lzU2VnbWVudHMgPSBhdWRpb0FuYWx5c2lzLnNlZ21lbnRzLmxlbmd0aDsKICAgICAgICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKGF1ZGlvQW5hbHlzaXMuc2VnbWVudHMubGVuZ3RoIC8gYXVkaW9BbmFseXNpc1NlZ21lbnRzKTsKICAgICAgICAgICAgaSA9IDA7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBpZiAoIShpIDwgYXVkaW9BbmFseXNpc1NlZ21lbnRzKSkgewogICAgICAgICAgICAgIF9jb250ZXh0MjYubmV4dCA9IDIyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpdGVtSW5kZXggPSBNYXRoLnJvdW5kKHdpZHRoICogaSk7CgogICAgICAgICAgICBpZiAoaXRlbUluZGV4ID4gYXVkaW9BbmFseXNpcy5zZWdtZW50cy5sZW5ndGggLSAxKSB7CiAgICAgICAgICAgICAgaXRlbUluZGV4ID0gYXVkaW9BbmFseXNpcy5zZWdtZW50cy5sZW5ndGggLSAyOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzdW0gPSAwOwoKICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGF1ZGlvQW5hbHlzaXMuc2VnbWVudHNbaXRlbUluZGV4XS5waXRjaGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgc3VtICs9IGF1ZGlvQW5hbHlzaXMuc2VnbWVudHNbaXRlbUluZGV4XS5waXRjaGVzW2pdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhdmVyYWdlUGl0Y2ggPSBzdW0gLyBhdWRpb0FuYWx5c2lzLnNlZ21lbnRzW2l0ZW1JbmRleF0ucGl0Y2hlcy5sZW5ndGg7CiAgICAgICAgICAgIF9jb250ZXh0MjYubmV4dCA9IDE2OwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgnSFNWdG9SR0InLCB7CiAgICAgICAgICAgICAgaHVlOiAoKDEgLSBhdmVyYWdlUGl0Y2gpICogMjI5ICsgLTUwKSAvIDM2MCwKICAgICAgICAgICAgICBzYXR1cmF0aW9uOiAwLjUxLAogICAgICAgICAgICAgIHZhbHVlOiAwLjg5CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIGNvbG9yID0gX2NvbnRleHQyNi5zZW50OwogICAgICAgICAgICBsb3VkbmVzcyA9IE1hdGgucm91bmQoKGF1ZGlvQW5hbHlzaXMuc2VnbWVudHNbaXRlbUluZGV4XS5sb3VkbmVzc19tYXggLyA2MCArIDEpICogMTAwKSAvIDEwMDsKICAgICAgICAgICAgbmV3U2VnbWVudHMucHVzaCh7CiAgICAgICAgICAgICAgc3RhcnQ6IE1hdGgucm91bmQoYXVkaW9BbmFseXNpcy5zZWdtZW50c1tpdGVtSW5kZXhdLnN0YXJ0KSwKICAgICAgICAgICAgICBsb3VkbmVzc19tYXg6IGxvdWRuZXNzLAogICAgICAgICAgICAgIHJlZDogY29sb3IuciwKICAgICAgICAgICAgICBncmVlbjogY29sb3IuZywKICAgICAgICAgICAgICBibHVlOiBjb2xvci5iCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgX2NvbnRleHQyNi5uZXh0ID0gODsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgYXVkaW9BbmFseXNpcy5zZWdtZW50cyA9IG51bGw7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI2LmFicnVwdCgicmV0dXJuIiwgbmV3U2VnbWVudHMpOwoKICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyNi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMjYpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGNsZWFuQXVkaW9BbmFseXNpcyhfeDQxLCBfeDQyKSB7CiAgICByZXR1cm4gX3JlZjI2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwoKdmFyIGdldFBlcmNlbnRpbGVzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYyNyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjcoY29udGV4dCwgcGF5bG9hZCkgewogICAgdmFyIGlkcywga2V5cywgcmVzcG9uc2UsIGksIGxvd2VyLCBqOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNyQoX2NvbnRleHQyNykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyNy5wcmV2ID0gX2NvbnRleHQyNy5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlkcyA9IE9iamVjdC5rZXlzKGNvbnRleHQuc3RhdGUudHJhY2tzKTsKICAgICAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHBheWxvYWQpOwogICAgICAgICAgICByZXNwb25zZSA9IHsKICAgICAgICAgICAgICB2YWxlbmNlOiAwLAogICAgICAgICAgICAgIGRhbmNlYWJpbGl0eTogMCwKICAgICAgICAgICAgICBlbmVyZ3k6IDAsCiAgICAgICAgICAgICAgYmFuZ2VyOiAwCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGxvd2VyID0gMDsKCiAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGlkcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgaWYgKGNvbnRleHQuc3RhdGUudHJhY2tzW2lkc1tqXV1ba2V5c1tpXV0gPD0gcGF5bG9hZFtrZXlzW2ldXSkgewogICAgICAgICAgICAgICAgICBsb3dlciArPSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmVzcG9uc2Vba2V5c1tpXV0gPSBsb3dlciAvIGNvbnRleHQuc3RhdGUucHJvZ3Jlc3MudG90YWw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI3LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI3LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyNyk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gZ2V0UGVyY2VudGlsZXMoX3g0MywgX3g0NCkgewogICAgcmV0dXJuIF9yZWYyNy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy97aCwgcywgdn0KCgp2YXIgSFNWdG9SR0IgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjI4ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyOChjb250ZXh0LCBwYXlsb2FkKSB7CiAgICB2YXIgciwgZywgYiwgaSwgZiwgcCwgcSwgdDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjgkKF9jb250ZXh0MjgpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjgucHJldiA9IF9jb250ZXh0MjgubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpID0gTWF0aC5mbG9vcihwYXlsb2FkLmh1ZSAqIDYpOwogICAgICAgICAgICBmID0gcGF5bG9hZC5odWUgKiA2IC0gaTsKICAgICAgICAgICAgcCA9IHBheWxvYWQudmFsdWUgKiAoMSAtIHBheWxvYWQuc2F0dXJhdGlvbik7CiAgICAgICAgICAgIHEgPSBwYXlsb2FkLnZhbHVlICogKDEgLSBmICogcGF5bG9hZC5zYXR1cmF0aW9uKTsKICAgICAgICAgICAgdCA9IHBheWxvYWQudmFsdWUgKiAoMSAtICgxIC0gZikgKiBwYXlsb2FkLnNhdHVyYXRpb24pOwogICAgICAgICAgICBfY29udGV4dDI4LnQwID0gaSAlIDY7CiAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IF9jb250ZXh0MjgudDAgPT09IDAgPyA4IDogX2NvbnRleHQyOC50MCA9PT0gMSA/IDEwIDogX2NvbnRleHQyOC50MCA9PT0gMiA/IDEyIDogX2NvbnRleHQyOC50MCA9PT0gMyA/IDE0IDogX2NvbnRleHQyOC50MCA9PT0gNCA/IDE2IDogX2NvbnRleHQyOC50MCA9PT0gNSA/IDE4IDogMjA7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgciA9IHBheWxvYWQudmFsdWUsIGcgPSB0LCBiID0gcDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDIwKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICByID0gcSwgZyA9IHBheWxvYWQudmFsdWUsIGIgPSBwOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5hYnJ1cHQoImJyZWFrIiwgMjApOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIHIgPSBwLCBnID0gcGF5bG9hZC52YWx1ZSwgYiA9IHQ7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LmFicnVwdCgiYnJlYWsiLCAyMCk7CgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgciA9IHAsIGcgPSBxLCBiID0gcGF5bG9hZC52YWx1ZTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDIwKTsKCiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICByID0gdCwgZyA9IHAsIGIgPSBwYXlsb2FkLnZhbHVlOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5hYnJ1cHQoImJyZWFrIiwgMjApOwoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIHIgPSBwYXlsb2FkLnZhbHVlLCBnID0gcCwgYiA9IHE7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LmFicnVwdCgiYnJlYWsiLCAyMCk7CgogICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgcjogTWF0aC5yb3VuZChyICogMjU1KSwKICAgICAgICAgICAgICBnOiBNYXRoLnJvdW5kKGcgKiAyNTUpLAogICAgICAgICAgICAgIGI6IE1hdGgucm91bmQoYiAqIDI1NSkKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyOCk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gSFNWdG9SR0IoX3g0NSwgX3g0NikgewogICAgcmV0dXJuIF9yZWYyOC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBhcnRpc3RBbmFseXNpcyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMjkgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI5KGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHZhciBhcnRpc3QsIGFydGlzdE9iamVjdDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjkkKF9jb250ZXh0MjkpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjkucHJldiA9IF9jb250ZXh0MjkubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDI5Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXNwYXRjaCgiZ2V0QXJ0aXN0IiwgcGF5bG9hZCk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBhcnRpc3QgPSBfY29udGV4dDI5LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0MjkubmV4dCA9IDU7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCJwcm9jZXNzQXJ0aXN0IiwgYXJ0aXN0KTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGFydGlzdE9iamVjdCA9IF9jb250ZXh0Mjkuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjkuYWJydXB0KCJyZXR1cm4iLCBhcnRpc3RPYmplY3QpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI5LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyOSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gYXJ0aXN0QW5hbHlzaXMoX3g0NywgX3g0OCkgewogICAgcmV0dXJuIF9yZWYyOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBwcm9jZXNzQXJ0aXN0ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYzMCA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMzAoY29udGV4dCwgcGF5bG9hZCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzMCQoX2NvbnRleHQzMCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzMC5wcmV2ID0gX2NvbnRleHQzMC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHBheWxvYWQuaHJlZiA9IHBheWxvYWQuZXh0ZXJuYWxfdXJscy5zcG90aWZ5OwogICAgICAgICAgICBkZWxldGUgcGF5bG9hZC5leHRlcm5hbF91cmxzOwogICAgICAgICAgICBwYXlsb2FkLmZvbGxvd2VycyA9IHBheWxvYWQuZm9sbG93ZXJzLnRvdGFsOwogICAgICAgICAgICBwYXlsb2FkLmltYWdlID0gcGF5bG9hZC5pbWFnZXNbMF0udXJsOwogICAgICAgICAgICBkZWxldGUgcGF5bG9hZC5pbWFnZXM7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMwLmFicnVwdCgicmV0dXJuIiwgcGF5bG9hZCk7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzAuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMwKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBwcm9jZXNzQXJ0aXN0KF94NDksIF94NTApIHsKICAgIHJldHVybiBfcmVmMzAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7Cgp2YXIgYXJ0aXN0VHJhY2tzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYzMSA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMzEoY29udGV4dCwgcGF5bG9hZCkgewogICAgdmFyIGlkcywgdHJhY2tzLCBpOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzMSQoX2NvbnRleHQzMSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzMS5wcmV2ID0gX2NvbnRleHQzMS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmIChwYXlsb2FkLmlkIGluIGNvbnRleHQuc3RhdGUuYXJ0aXN0cykgewogICAgICAgICAgICAgIF9jb250ZXh0MzEubmV4dCA9IDI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMxLmFicnVwdCgicmV0dXJuIiwgW10pOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgaWRzID0gY29udGV4dC5zdGF0ZS5hcnRpc3RzW3BheWxvYWQuaWRdLnRyYWNrczsKICAgICAgICAgICAgdHJhY2tzID0gW107CgogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdHJhY2tzLnB1c2goY29udGV4dC5zdGF0ZS50cmFja3NbaWRzW2ldXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMxLmFicnVwdCgicmV0dXJuIiwgdHJhY2tzKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMzEpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGFydGlzdFRyYWNrcyhfeDUxLCBfeDUyKSB7CiAgICByZXR1cm4gX3JlZjMxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwoKdmFyIGFydGlzdFRpbWVsaW5lID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYzMiA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMzIoY29udGV4dCwgcGF5bG9hZCkgewogICAgdmFyIGFydGlzdE9iamVjdCwgdGltZWxpbmUsIHRyYWNrcywgbm93LCBub3dUaW1lLCBNT05USCwgYXJ0aXN0U2F2ZWQsIGksIGRhdGUsIGRhdGVUaW1lLCBkaWZmLCBkaWZmTW9udGgsIG9sZGVzdCwgbmV3ZXN0OwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzMiQoX2NvbnRleHQzMikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzMi5wcmV2ID0gX2NvbnRleHQzMi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmIChwYXlsb2FkLmlkIGluIGNvbnRleHQuc3RhdGUuYXJ0aXN0cykgewogICAgICAgICAgICAgIF9jb250ZXh0MzIubmV4dCA9IDI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMyLmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIHRpbWVsaW5lOiBbXSwKICAgICAgICAgICAgICBvbGRlc3Q6IFtdLAogICAgICAgICAgICAgIG5ld2VzdDogW10KICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBhcnRpc3RPYmplY3QgPSBwYXlsb2FkOwogICAgICAgICAgICB0aW1lbGluZSA9IFtdOwogICAgICAgICAgICB0cmFja3MgPSBbXTsKICAgICAgICAgICAgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgbm93VGltZSA9IG5vdy5nZXRUaW1lKCk7CiAgICAgICAgICAgIE1PTlRIID0gMjYyNjU2MDAwMDsKICAgICAgICAgICAgYXJ0aXN0U2F2ZWQgPSBjb250ZXh0LnN0YXRlLmFydGlzdHNbYXJ0aXN0T2JqZWN0LmlkXTsKCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcnRpc3RTYXZlZC50cmFja3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoY29udGV4dC5zdGF0ZS50cmFja3NbYXJ0aXN0U2F2ZWQudHJhY2tzW2ldXS5kYXRlKTsKICAgICAgICAgICAgICBkYXRlVGltZSA9IGRhdGUuZ2V0VGltZSgpOwogICAgICAgICAgICAgIGRpZmYgPSBub3dUaW1lIC0gZGF0ZVRpbWU7CiAgICAgICAgICAgICAgZGlmZk1vbnRoID0gTWF0aC5mbG9vcihkaWZmIC8gTU9OVEgpOwogICAgICAgICAgICAgIHRyYWNrcy5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiBhcnRpc3RTYXZlZC50cmFja3NbaV0sCiAgICAgICAgICAgICAgICB0aW1lOiBkYXRlVGltZSwKICAgICAgICAgICAgICAgIG1vbnRoOiBkaWZmTW9udGgKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgaWYgKGRpZmZNb250aCA+PSB0aW1lbGluZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHdoaWxlIChkaWZmTW9udGggPj0gdGltZWxpbmUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHRpbWVsaW5lLnB1c2goMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aW1lbGluZVtkaWZmTW9udGhdICs9IDE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRyYWNrcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGEudGltZSA+IGIudGltZSA/IDEgOiAtMTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG9sZGVzdCA9IHRyYWNrcy5zbGljZSgwLCAzKTsKICAgICAgICAgICAgbmV3ZXN0ID0gdHJhY2tzLnNsaWNlKHRyYWNrcy5sZW5ndGggLSAzLCB0cmFja3MubGVuZ3RoKTsKCiAgICAgICAgICAgIHdoaWxlICh0aW1lbGluZS5sZW5ndGggPCBjb250ZXh0LnN0YXRlLmRhdGVBZGRlZC5sZW5ndGgpIHsKICAgICAgICAgICAgICB0aW1lbGluZS5wdXNoKDApOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMi5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICB0aW1lbGluZTogdGltZWxpbmUsCiAgICAgICAgICAgICAgb2xkZXN0OiBvbGRlc3QsCiAgICAgICAgICAgICAgbmV3ZXN0OiBuZXdlc3QKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzMik7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gYXJ0aXN0VGltZWxpbmUoX3g1MywgX3g1NCkgewogICAgcmV0dXJuIF9yZWYzMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBhcnRpc3RUb3BUcmFja3MgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjMzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzMyhjb250ZXh0LCBpZCkgewogICAgdmFyIHRyYWNrcywgaWRzLCBpLCBhdWRpb0ZlYXR1cmVzLCBfaTQ7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzMyQoX2NvbnRleHQzMykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzMy5wcmV2ID0gX2NvbnRleHQzMy5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MzMubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCdnZXRBcnRpc3RUb3BUcmFja3MnLCBpZCk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICB0cmFja3MgPSBfY29udGV4dDMzLnNlbnQ7CiAgICAgICAgICAgIGlkcyA9IFtdOwoKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRyYWNrcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGRlbGV0ZSB0cmFja3NbaV0uYWxidW0uYWxidW1fdHlwZTsKICAgICAgICAgICAgICBkZWxldGUgdHJhY2tzW2ldLmFsYnVtLmFydGlzdHM7CiAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrc1tpXS5hbGJ1bS5hdmFpbGFibGVfbWFya2V0czsKICAgICAgICAgICAgICBkZWxldGUgdHJhY2tzW2ldLmFsYnVtLmF2YWlsYWJsZV9tYXJrZXRzOwogICAgICAgICAgICAgIHRyYWNrc1tpXS5hbGJ1bS5ocmVmID0gdHJhY2tzW2ldLmFsYnVtLmV4dGVybmFsX3VybHMuc3BvdGlmeTsKICAgICAgICAgICAgICBkZWxldGUgdHJhY2tzW2ldLmFsYnVtLnR5cGU7CiAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrc1tpXS5hbGJ1bS51cmk7CiAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrc1tpXS5hdmFpbGFibGVfbWFya2V0czsKICAgICAgICAgICAgICBkZWxldGUgdHJhY2tzW2ldLmRpc2NfbnVtYmVyOwogICAgICAgICAgICAgIGRlbGV0ZSB0cmFja3NbaV0uZXh0ZXJuYWxfaWRzOwogICAgICAgICAgICAgIHRyYWNrc1tpXS5ocmVmID0gdHJhY2tzW2ldLmV4dGVybmFsX3VybHMuc3BvdGlmeTsKICAgICAgICAgICAgICBkZWxldGUgdHJhY2tzW2ldLmV4dGVybmFsX3VybHM7CiAgICAgICAgICAgICAgZGVsZXRlIHRyYWNrc1tpXS50eXBlOwogICAgICAgICAgICAgIGRlbGV0ZSB0cmFja3NbaV0udXJpOwogICAgICAgICAgICAgIGlmICh0cmFja3NbaV0uYWxidW0uaW1hZ2VzLmxlbmd0aCA+IDEpIHRyYWNrc1tpXS5pbWFnZSA9IHRyYWNrc1tpXS5hbGJ1bS5pbWFnZXNbMF0udXJsOwogICAgICAgICAgICAgIGlkcy5wdXNoKHRyYWNrc1tpXS5pZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0MzMubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpc3BhdGNoKCdnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzJywgaWRzKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGF1ZGlvRmVhdHVyZXMgPSBfY29udGV4dDMzLnNlbnQ7CgogICAgICAgICAgICBmb3IgKF9pNCA9IDA7IF9pNCA8IHRyYWNrcy5sZW5ndGg7IF9pNCsrKSB7CiAgICAgICAgICAgICAgdHJhY2tzW19pNF0udmFsZW5jZSA9IGF1ZGlvRmVhdHVyZXNbX2k0XS52YWxlbmNlOwogICAgICAgICAgICAgIHRyYWNrc1tfaTRdLmVuZXJneSA9IGF1ZGlvRmVhdHVyZXNbX2k0XS5lbmVyZ3k7CiAgICAgICAgICAgICAgdHJhY2tzW19pNF0uZGFuY2VhYmlsaXR5ID0gYXVkaW9GZWF0dXJlc1tfaTRdLmRhbmNlYWJpbGl0eTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzMuYWJydXB0KCJyZXR1cm4iLCB0cmFja3MpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzMy5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMzMpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGFydGlzdFRvcFRyYWNrcyhfeDU1LCBfeDU2KSB7CiAgICByZXR1cm4gX3JlZjMzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vIFNPQ0lBTCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCi8vIEFQSSBDQUxMUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLyB7bGltaXQ6IE51bWJlciAxLTUwLCB0aW1lX3JhbmdlOiAibG9uZ190ZXJtIiBTZXZlcmFsIHllYXJzLCAibWVkaXVtX3Rlcm0iIDYgTW9udGhzLCAic2hvcnRfdGVybSIgNCBXZWVrcywgb2Zmc2V0OiBJbmRleCBvZiBmaXJzdCBlbnRyeSB0byByZXR1cm59CgoKdmFyIGdldFRvcEFydGlzdHMgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjM0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzNChjb250ZXh0LCBwYXlsb2FkKSB7CiAgICB2YXIgcmVzcG9uc2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTM0JChfY29udGV4dDM0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDM0LnByZXYgPSBfY29udGV4dDM0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQzNC5wcmV2ID0gMDsKICAgICAgICAgICAgX2NvbnRleHQzNC5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRNeVRvcEFydGlzdHMoewogICAgICAgICAgICAgIGxpbWl0OiBwYXlsb2FkLmxpbWl0LAogICAgICAgICAgICAgIHRpbWVfcmFuZ2U6IHBheWxvYWQudGltZV9yYW5nZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzNC5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLml0ZW1zKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0MzQucHJldiA9IDc7CiAgICAgICAgICAgIF9jb250ZXh0MzQudDAgPSBfY29udGV4dDM0WyJjYXRjaCJdKDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMzQsIG51bGwsIFtbMCwgN11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRUb3BBcnRpc3RzKF94NTcsIF94NTgpIHsKICAgIHJldHVybiBfcmVmMzQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIHtsaW1pdDogTnVtYmVyIDEtNTAsIHRpbWVfcmFuZ2U6ICJsb25nX3Rlcm0iIFNldmVyYWwgeWVhcnMsICJtZWRpdW1fdGVybSIgNiBNb250aHMsICJzaG9ydF90ZXJtIiA0IFdlZWtzLCBvZmZzZXQ6IEluZGV4IG9mIGZpcnN0IGVudHJ5IHRvIHJldHVybn0KCgp2YXIgZ2V0VG9wVHJhY2tzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYzNSA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMzUoY29udGV4dCwgcGF5bG9hZCkgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzNSQoX2NvbnRleHQzNSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzNS5wcmV2ID0gX2NvbnRleHQzNS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MzUucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0MzUubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0TXlUb3BUcmFja3MoewogICAgICAgICAgICAgIGxpbWl0OiBwYXlsb2FkLmxpbWl0LAogICAgICAgICAgICAgIHRpbWVfcmFuZ2U6IHBheWxvYWQudGltZV9yYW5nZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzNS5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNS5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLml0ZW1zKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0MzUucHJldiA9IDc7CiAgICAgICAgICAgIF9jb250ZXh0MzUudDAgPSBfY29udGV4dDM1WyJjYXRjaCJdKDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMzUsIG51bGwsIFtbMCwgN11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRUb3BUcmFja3MoX3g1OSwgX3g2MCkgewogICAgcmV0dXJuIF9yZWYzNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8ge2xpbWl0OiBOdW1iZXIgMS01MCwgYWZ0ZXI6IFVuaXggdGltZXN0YW1wIE1pbGxpc2Vjb25kcywgYmVmb3JlOiBVbml4IHRpbWVzdGFtcCBNaWxsaXNlY29uZHMKCgp2YXIgZ2V0UmVjZW50bHlQbGF5ZWQgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjM2ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzNihjb250ZXh0LCBwYXlsb2FkKSB7CiAgICB2YXIgcmVzcG9uc2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTM2JChfY29udGV4dDM2KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDM2LnByZXYgPSBfY29udGV4dDM2Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQzNi5wcmV2ID0gMDsKICAgICAgICAgICAgX2NvbnRleHQzNi5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5nZXRNeVJlY2VudGx5UGxheWVkVHJhY2tzKHsKICAgICAgICAgICAgICBsaW1pdDogcGF5bG9hZC5saW1pdAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzNi5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNi5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0MzYucHJldiA9IDc7CiAgICAgICAgICAgIF9jb250ZXh0MzYudDAgPSBfY29udGV4dDM2WyJjYXRjaCJdKDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMzYsIG51bGwsIFtbMCwgN11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRSZWNlbnRseVBsYXllZChfeDYxLCBfeDYyKSB7CiAgICByZXR1cm4gX3JlZjM2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwoKdmFyIGdldFRyYWNrID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYzNyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMzcoY29udGV4dCwgdHJhY2tfaWQpIHsKICAgIHZhciByZXNwb25zZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMzckKF9jb250ZXh0MzcpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MzcucHJldiA9IF9jb250ZXh0MzcubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDM3LnByZXYgPSAwOwogICAgICAgICAgICBfY29udGV4dDM3Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldFRyYWNrKHRyYWNrX2lkKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzNy5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNy5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0MzcucHJldiA9IDc7CiAgICAgICAgICAgIF9jb250ZXh0MzcudDAgPSBfY29udGV4dDM3WyJjYXRjaCJdKDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNy5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzNy5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMzcsIG51bGwsIFtbMCwgN11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRUcmFjayhfeDYzLCBfeDY0KSB7CiAgICByZXR1cm4gX3JlZjM3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwoKdmFyIGdldFRyYWNrcyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMzggPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTM4KGNvbnRleHQsIHRyYWNrX2lkcykgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzOCQoX2NvbnRleHQzOCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzOC5wcmV2ID0gX2NvbnRleHQzOC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MzgucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0MzgubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0VHJhY2tzKHRyYWNrX2lkcyk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mzguc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzguYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBfY29udGV4dDM4LnByZXYgPSA3OwogICAgICAgICAgICBfY29udGV4dDM4LnQwID0gX2NvbnRleHQzOFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MzguYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mzguc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTM4LCBudWxsLCBbWzAsIDddXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gZ2V0VHJhY2tzKF94NjUsIF94NjYpIHsKICAgIHJldHVybiBfcmVmMzguYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIHthcnRpc3RJZDogU3RyaW5nfQoKCnZhciBnZXRBcnRpc3QgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjM5ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzOShjb250ZXh0LCBpZCkgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzOSQoX2NvbnRleHQzOSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzOS5wcmV2ID0gX2NvbnRleHQzOS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MzkucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0MzkubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXJ0aXN0KGlkKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzOS5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzOS5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0MzkucHJldiA9IDc7CiAgICAgICAgICAgIF9jb250ZXh0MzkudDAgPSBfY29udGV4dDM5WyJjYXRjaCJdKDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzOS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzOS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMzksIG51bGwsIFtbMCwgN11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRBcnRpc3QoX3g2NywgX3g2OCkgewogICAgcmV0dXJuIF9yZWYzOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8gW10KCgp2YXIgZ2V0QXJ0aXN0cyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmNDAgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQwKGNvbnRleHQsIGlkcykgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0MCQoX2NvbnRleHQ0MCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0MC5wcmV2ID0gX2NvbnRleHQ0MC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NDAucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0NDAubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXJ0aXN0cyhpZHMpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDQwLnNlbnQ7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQwLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuYXJ0aXN0cyk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBfY29udGV4dDQwLnByZXYgPSA3OwogICAgICAgICAgICBfY29udGV4dDQwLnQwID0gX2NvbnRleHQ0MFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDAuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDAuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTQwLCBudWxsLCBbWzAsIDddXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gZ2V0QXJ0aXN0cyhfeDY5LCBfeDcwKSB7CiAgICByZXR1cm4gX3JlZjQwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyBBcnJheSBJRHMKCgp2YXIgZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrcyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmNDEgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQxKGNvbnRleHQsIHRyYWNrX2lkcykgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0MSQoX2NvbnRleHQ0MSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0MS5wcmV2ID0gX2NvbnRleHQ0MS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NDEucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0NDEubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrcyh0cmFja19pZHMpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDQxLnNlbnQ7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQxLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuYXVkaW9fZmVhdHVyZXMpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgX2NvbnRleHQ0MS5wcmV2ID0gNzsKICAgICAgICAgICAgX2NvbnRleHQ0MS50MCA9IF9jb250ZXh0NDFbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQxLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQxLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU0MSwgbnVsbCwgW1swLCA3XV0pOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGdldEF1ZGlvRmVhdHVyZXNGb3JUcmFja3MoX3g3MSwgX3g3MikgewogICAgcmV0dXJuIF9yZWY0MS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2sgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjQyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0Mihjb250ZXh0LCB0cmFja19pZCkgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0MiQoX2NvbnRleHQ0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0Mi5wcmV2ID0gX2NvbnRleHQ0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NDIucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0NDIubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrcyhbdHJhY2tfaWRdKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ0Mi5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0Mi5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmF1ZGlvX2ZlYXR1cmVzWzBdKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0NDIucHJldiA9IDc7CiAgICAgICAgICAgIF9jb250ZXh0NDIudDAgPSBfY29udGV4dDQyWyJjYXRjaCJdKDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNDIsIG51bGwsIFtbMCwgN11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2soX3g3MywgX3g3NCkgewogICAgcmV0dXJuIF9yZWY0Mi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBnZXRBdWRpb0FuYWx5c2lzRm9yVHJhY2sgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjQzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0Myhjb250ZXh0LCB0cmFja19pZCkgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0MyQoX2NvbnRleHQ0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0My5wcmV2ID0gX2NvbnRleHQ0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NDMucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0NDMubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrKHRyYWNrX2lkKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ0My5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0My5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0NDMucHJldiA9IDc7CiAgICAgICAgICAgIF9jb250ZXh0NDMudDAgPSBfY29udGV4dDQzWyJjYXRjaCJdKDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNDMsIG51bGwsIFtbMCwgN11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRBdWRpb0FuYWx5c2lzRm9yVHJhY2soX3g3NSwgX3g3NikgewogICAgcmV0dXJuIF9yZWY0My5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8ge3NlZWRfdHJhY2tzOiBbdHJhY2tfaWRdLCB0YXJnZXRfZGFuY2ViaWxpdHk6IE5VTSwgbGltaXQ6IDYsIG1heF8qIG1pbl8qfQoKCnZhciBnZXRSZWNvbWVuZGF0aW9ucyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmNDQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQ0KGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHZhciByZXNwb25zZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNDQkKF9jb250ZXh0NDQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NDQucHJldiA9IF9jb250ZXh0NDQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDQ0LnByZXYgPSAwOwogICAgICAgICAgICBfY29udGV4dDQ0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5zdGF0ZS5zcG90aWZ5QXBpLmdldFJlY29tbWVuZGF0aW9ucyhwYXlsb2FkKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ0NC5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0NC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0NDQucHJldiA9IDc7CiAgICAgICAgICAgIF9jb250ZXh0NDQudDAgPSBfY29udGV4dDQ0WyJjYXRjaCJdKDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNDQsIG51bGwsIFtbMCwgN11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRSZWNvbWVuZGF0aW9ucyhfeDc3LCBfeDc4KSB7CiAgICByZXR1cm4gX3JlZjQ0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyB7bGltaXQ6IDEtNTAsIG9mZnNldDogZmlyc3QgaW5kZXh9CgoKdmFyIGdldFNhdmVkVHJhY2tzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWY0NSA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNDUoY29udGV4dCwgcGF5bG9hZCkgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0NSQoX2NvbnRleHQ0NSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0NS5wcmV2ID0gX2NvbnRleHQ0NS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NDUucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0NDUubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0TXlTYXZlZFRyYWNrcyh7CiAgICAgICAgICAgICAgbGltaXQ6IHBheWxvYWQubGltaXQsCiAgICAgICAgICAgICAgb2Zmc2V0OiBwYXlsb2FkLm9mZnNldAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ0NS5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0NS5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0NDUucHJldiA9IDc7CiAgICAgICAgICAgIF9jb250ZXh0NDUudDAgPSBfY29udGV4dDQ1WyJjYXRjaCJdKDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0NS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0NS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNDUsIG51bGwsIFtbMCwgN11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRTYXZlZFRyYWNrcyhfeDc5LCBfeDgwKSB7CiAgICByZXR1cm4gX3JlZjQ1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyBOb25lCgoKdmFyIGdldFVzZXIgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjQ2ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0Nihjb250ZXh0KSB7CiAgICB2YXIgcmVzcG9uc2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQ2JChfY29udGV4dDQ2KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQ2LnByZXYgPSBfY29udGV4dDQ2Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ0Ni5wcmV2ID0gMDsKCiAgICAgICAgICAgIGlmICghY29udGV4dC5zdGF0ZS5pbmljaWFsaXplZCkgewogICAgICAgICAgICAgIF9jb250ZXh0NDYubmV4dCA9IDc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0NDYubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0TWUoKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ0Ni5zZW50OwogICAgICAgICAgICBfY29udGV4dDQ2Lm5leHQgPSA3OwogICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb21taXQoJ3NldFVzZXJEYXRhJywgcmVzcG9uc2UpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgX2NvbnRleHQ0Ni5uZXh0ID0gMTI7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgX2NvbnRleHQ0Ni5wcmV2ID0gOTsKICAgICAgICAgICAgX2NvbnRleHQ0Ni50MCA9IF9jb250ZXh0NDZbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ2LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ2LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU0NiwgbnVsbCwgW1swLCA5XV0pOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGdldFVzZXIoX3g4MSkgewogICAgcmV0dXJuIF9yZWY0Ni5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8gQXJyYXkgSURzCgoKdmFyIHNlYXJjaFNwb3RpZnkgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjQ3ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0Nyhjb250ZXh0LCBwYXlsb2FkKSB7CiAgICB2YXIgcmVzcG9uc2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQ3JChfY29udGV4dDQ3KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQ3LnByZXYgPSBfY29udGV4dDQ3Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ0Ny5wcmV2ID0gMDsKICAgICAgICAgICAgX2NvbnRleHQ0Ny5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuc3RhdGUuc3BvdGlmeUFwaS5zZWFyY2gocGF5bG9hZC5xdWVyeSwgWyd0cmFjayddLCB7CiAgICAgICAgICAgICAgbGltaXQ6IDI1CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDQ3LnNlbnQ7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ3LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgX2NvbnRleHQ0Ny5wcmV2ID0gNzsKICAgICAgICAgICAgX2NvbnRleHQ0Ny50MCA9IF9jb250ZXh0NDdbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ3LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ3LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU0NywgbnVsbCwgW1swLCA3XV0pOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIHNlYXJjaFNwb3RpZnkoX3g4MiwgX3g4MykgewogICAgcmV0dXJuIF9yZWY0Ny5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBnZXRBcnRpc3RUb3BUcmFja3MgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjQ4ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0OChjb250ZXh0LCBpZCkgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0OCQoX2NvbnRleHQ0OCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0OC5wcmV2ID0gX2NvbnRleHQ0OC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NDgucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0NDgubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnN0YXRlLnNwb3RpZnlBcGkuZ2V0QXJ0aXN0VG9wVHJhY2tzKGlkLCAiVVMiLCB7fSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NDguc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NDguYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS50cmFja3MpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgX2NvbnRleHQ0OC5wcmV2ID0gNzsKICAgICAgICAgICAgX2NvbnRleHQ0OC50MCA9IF9jb250ZXh0NDhbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ4LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQ4LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU0OCwgbnVsbCwgW1swLCA3XV0pOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGdldEFydGlzdFRvcFRyYWNrcyhfeDg0LCBfeDg1KSB7CiAgICByZXR1cm4gX3JlZjQ4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgewogIGluaWNpYWxpemVHZXRUb2tlbjogaW5pY2lhbGl6ZUdldFRva2VuLAogIGluaWNpYWxpemVQYXJzZVRva2VuOiBpbmljaWFsaXplUGFyc2VUb2tlbiwKICBpbmljaWFsaXplU2V0VG9rZW46IGluaWNpYWxpemVTZXRUb2tlbiwKICBsb2FkTGlicmFyeTogbG9hZExpYnJhcnksCiAgcmV0cmlldmVTYXZlZFRyYWNrczogcmV0cmlldmVTYXZlZFRyYWNrcywKICBwcm9jZXNzVHJhY2tzOiBwcm9jZXNzVHJhY2tzLAogIGluaWNpYWxTY2FuUmVkdWNlSWRzOiBpbmljaWFsU2NhblJlZHVjZUlkcywKICBmaW5kQW5kU3RvcmVBcnRpc3RzOiBmaW5kQW5kU3RvcmVBcnRpc3RzLAogIGRpc3RyaWJ1dGVUcmFja0F1ZGlvRmVhdHVyZXM6IGRpc3RyaWJ1dGVUcmFja0F1ZGlvRmVhdHVyZXMsCiAgY2FsY1RyYWNrc1BlckdlbnJlOiBjYWxjVHJhY2tzUGVyR2VucmUsCiAgY2FsY0V4dHJlbWVzOiBjYWxjRXh0cmVtZXMsCiAgcmV0cmlldmVUb3BQbGF5ZWQ6IHJldHJpZXZlVG9wUGxheWVkLAogIHJldHJpZXZlVG9wUGxheWVkQXJ0aXN0czogcmV0cmlldmVUb3BQbGF5ZWRBcnRpc3RzLAogIHJldHJpZXZlVG9wUGxheWVkVHJhY2tzOiByZXRyaWV2ZVRvcFBsYXllZFRyYWNrcywKICBzYXZlTGlicmFyeTogc2F2ZUxpYnJhcnksCiAgY29udmVydFRyYWNrczogY29udmVydFRyYWNrcywKICBnYXRoZXJNb3N0UGxheWVkVHJhY2tzOiBnYXRoZXJNb3N0UGxheWVkVHJhY2tzLAogIGdhdGhlckV4dHJlbWVzOiBnYXRoZXJFeHRyZW1lcywKICBjb21wcmVzc1RyYWNrOiBjb21wcmVzc1RyYWNrLAogIGNvbnZlcnRBcnRpc3RzOiBjb252ZXJ0QXJ0aXN0cywKICBnYXRoZXJNb3N0UGxheWVkQXJ0aXN0czogZ2F0aGVyTW9zdFBsYXllZEFydGlzdHMsCiAgZ2F0aGVyTW9zdFNhdmVkQXJ0aXN0czogZ2F0aGVyTW9zdFNhdmVkQXJ0aXN0cywKICBjb21wcmVzc0FydGlzdDogY29tcHJlc3NBcnRpc3QsCiAgY29udmVydEdlbnJlczogY29udmVydEdlbnJlcywKICBzb25nQW5hbHlzaXM6IHNvbmdBbmFseXNpcywKICBzb25nQW5hbHlzaXNGZWF0dXJlczogc29uZ0FuYWx5c2lzRmVhdHVyZXMsCiAgY2xlYW5BdWRpb0FuYWx5c2lzOiBjbGVhbkF1ZGlvQW5hbHlzaXMsCiAgZ2V0UGVyY2VudGlsZXM6IGdldFBlcmNlbnRpbGVzLAogIEhTVnRvUkdCOiBIU1Z0b1JHQiwKICBhcnRpc3RBbmFseXNpczogYXJ0aXN0QW5hbHlzaXMsCiAgcHJvY2Vzc0FydGlzdDogcHJvY2Vzc0FydGlzdCwKICBhcnRpc3RUcmFja3M6IGFydGlzdFRyYWNrcywKICBhcnRpc3RUaW1lbGluZTogYXJ0aXN0VGltZWxpbmUsCiAgYXJ0aXN0VG9wVHJhY2tzOiBhcnRpc3RUb3BUcmFja3MsCiAgYmFuZ2VyQ2FsYzogYmFuZ2VyQ2FsYywKICBnZXRUb3BBcnRpc3RzOiBnZXRUb3BBcnRpc3RzLAogIGdldFRvcFRyYWNrczogZ2V0VG9wVHJhY2tzLAogIGdldFJlY2VudGx5UGxheWVkOiBnZXRSZWNlbnRseVBsYXllZCwKICBnZXRUcmFjazogZ2V0VHJhY2ssCiAgZ2V0VHJhY2tzOiBnZXRUcmFja3MsCiAgZ2V0QXJ0aXN0OiBnZXRBcnRpc3QsCiAgZ2V0QXJ0aXN0czogZ2V0QXJ0aXN0cywKICBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzOiBnZXRBdWRpb0ZlYXR1cmVzRm9yVHJhY2tzLAogIGdldEF1ZGlvRmVhdHVyZXNGb3JUcmFjazogZ2V0QXVkaW9GZWF0dXJlc0ZvclRyYWNrLAogIGdldEF1ZGlvQW5hbHlzaXNGb3JUcmFjazogZ2V0QXVkaW9BbmFseXNpc0ZvclRyYWNrLAogIGdldFJlY29tZW5kYXRpb25zOiBnZXRSZWNvbWVuZGF0aW9ucywKICBnZXRTYXZlZFRyYWNrczogZ2V0U2F2ZWRUcmFja3MsCiAgZ2V0VXNlcjogZ2V0VXNlciwKICBnZXRBcnRpc3RUb3BUcmFja3M6IGdldEFydGlzdFRvcFRyYWNrcywKICBzZWFyY2hTcG90aWZ5OiBzZWFyY2hTcG90aWZ5Cn07"},{"version":3,"sources":["C:/Users/andre/Documents/GitHub/Spotify-Features/front-end3/src/store/actions.js"],"names":["inicializeGetToken","context","authEndpoint","clientId","redirectUri","state","dev","scopes","access_token","window","location","join","inicializeParseToken","token","hash","substring","split","reduce","initial","item","parts","decodeURIComponent","dispatch","inicializeSetToken","spotifyApi","setAccessToken","commit","loadLibrary","limit","offset","retrieveSavedTracks","payload","response","total","items","length","keys","Object","audioFeatures","i","processTracks","ids","trackAudioFeatures","now","Date","nowTime","getTime","MONTH","tempo","energy","danceability","banger","addedDate","tracks","id","date","addedDateTime","month","Math","floor","value","valence","inicialScanReduceIds","artistsToFind","trackObject","track","j","artists","includes","push","map","artist","added_at","album","album_type","available_markets","href","external_urls","spotify","type","uri","disc_number","external_ids","images","image","url","findAndStoreArtists","values","trackSets","sectionIds","splice","newArtists","concat","artistObject","followers","genres","name","tracknum","distributeTrackAudioFeatures","acousticness","instrumentalness","liveness","loudness","speechiness","key","mode","properties","duration_ms","time_signature","calcTracksPerGenre","artistIds","genreTuples","entries","topGenres","sort","a","b","slice","topGenreIds","genre","artistTuples","topArtists","topArtistIds","calcExtremes","trackTuples","charts","topTracks","topTracksIds","chart","retrieveTopPlayed","retrieveTopPlayedArtists","ranges","time_range","index","retrieveTopPlayedTracks","bangerCalc","saveLibrary","private","include","numerical_data","audio_features","most_played_tracks","most_played_artists","data","progress","most_saved_artists","most_saved_genres","topSaved","topPlayed","numerical_features","extremes","probability_features","happiness_distribution","plot","energy_distribution","danceability_distribution","banger_distribution","added_timeline","dateAdded","happiness_timeline","happinessTimeline","timeline","convertTracks","reqTracks","addTracks","nonRepeatedTracks","gatherMostPlayedTracks","gatherExtremes","k","compressTrack","convertArtists","reqArtists","addArtists","nonRepeatedArtists","gatherMostPlayedArtists","gatherMostSavedArtists","compressArtist","convertGenres","reqGenres","songAnalysis","trackData","audioAnalysis","songAnalysisFeatures","song","cleanAudioAnalysis","audioAnalysisSegments","newSegments","segments","width","round","itemIndex","sum","pitches","averagePitch","hue","saturation","color","loudness_max","start","red","r","green","g","blue","getPercentiles","lower","HSVtoRGB","f","p","q","t","artistAnalysis","processArtist","artistTracks","artistTimeline","oldest","newest","artistSaved","dateTime","diff","diffMonth","time","artistTopTracks","getTopArtists","getMyTopArtists","getTopTracks","getMyTopTracks","getRecentlyPlayed","getMyRecentlyPlayedTracks","getTrack","track_id","getTracks","track_ids","getArtist","getArtists","getAudioFeaturesForTracks","getAudioFeaturesForTrack","getAudioAnalysisForTrack","getRecomendations","getRecommendations","getSavedTracks","getMySavedTracks","getUser","inicialized","getMe","searchSpotify","search","query","getArtistTopTracks"],"mappings":"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","sourcesContent":["\r\n\r\n////////////////////////////////////////////////////////////////\r\n// INICIALIZATION //////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\n// None\r\nconst inicializeGetToken = (context) => {\r\n    const authEndpoint = 'https://accounts.spotify.com/authorize';\r\n    const clientId = '42903eeb2bf943c4bd4903370f7a93f5';\r\n    let redirectUri = 'http://mymusictaste.org/redirect/';\r\n    if (context.state.dev)\r\n        redirectUri = 'http://localhost:8080/redirect/';\r\n    const scopes = [\r\n        'user-read-recently-played',\r\n        'user-top-read',\r\n        'user-library-read',\r\n        'user-read-email',\r\n    ];\r\n    if (!context.state.access_token) {\r\n        window.location = `${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join('%20')}&response_type=token&show_dialog=true`;\r\n    }\r\n};\r\n// None\r\nconst inicializeParseToken = (context) => {\r\n    let token = window.location.hash.substring(1).split('&').reduce(function (initial, item) {\r\n        if (item) {\r\n            let parts = item.split('=');\r\n            initial[parts[0]] = decodeURIComponent(parts[1]);\r\n        }\r\n        return initial;\r\n    }, {});\r\n    context.dispatch('inicializeSetToken', token.access_token);\r\n};\r\n// Token\r\nconst inicializeSetToken = async (context, token) => {\r\n    await context.state.spotifyApi.setAccessToken(token);\r\n    await context.commit('setInicialized', true);\r\n    context.dispatch('getUser');\r\n};\r\n////////////////////////////////////////////////////////////////\r\n// LOAD PROGRESS ///////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\n// None\r\nconst loadLibrary = async (context) => {\r\n    context.commit('resetProgress');\r\n    await context.dispatch('retrieveSavedTracks', {limit: 50, offset: 0});\r\n    await context.dispatch('retrieveTopPlayed');\r\n    await context.dispatch('calcTracksPerGenre');\r\n    await context.dispatch('calcExtremes');\r\n};\r\n// {limit: Number, offset: Number}\r\nconst retrieveSavedTracks = async (context, payload) => {\r\n    let response = await context.dispatch('getSavedTracks', {limit: payload.limit, offset: payload.offset});\r\n    if (payload.offset == 0)\r\n        context.commit('setTotal', response.total);\r\n    await context.dispatch('processTracks', response.items);\r\n    if (response.items.length == payload.limit)\r\n        await context.dispatch('retrieveSavedTracks', {limit: 50, offset: payload.offset + payload.limit});\r\n    else {\r\n        let keys = Object.keys(context.state.audioFeatures);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            await context.commit('averageAudioFeatureValue', keys[i]);\r\n        }\r\n        await context.commit('averageMode');\r\n        await context.commit('averageValenceOverTime');\r\n        context.commit('setTracksLoaded');\r\n    }\r\n};\r\n// Track Array\r\nconst processTracks = async (context, payload) => {\r\n    let ids = await context.dispatch('inicialScanReduceIds', payload);\r\n    let trackAudioFeatures = await context.dispatch('getAudioFeaturesForTracks', ids);\r\n    let now = new Date();\r\n    let nowTime = now.getTime();\r\n    const MONTH = 2626560000;\r\n    for (let i = 0; i < trackAudioFeatures.length; i++) {\r\n        trackAudioFeatures[i].banger = await context.dispatch('bangerCalc', {tempo: trackAudioFeatures[i].tempo, energy: trackAudioFeatures[i].energy, danceability: trackAudioFeatures[i].danceability});\r\n        let addedDate = new Date(context.state.tracks[trackAudioFeatures[i].id].date);\r\n        let addedDateTime = addedDate.getTime();\r\n        await context.commit('addValenceOverTime', {month: Math.floor((nowTime - addedDateTime) / MONTH), value:  trackAudioFeatures[i].valence});\r\n    }\r\n    await context.dispatch('distributeTrackAudioFeatures', trackAudioFeatures);\r\n};\r\n// Track Array\r\nconst inicialScanReduceIds = async (context, payload) => {\r\n    let ids = [];\r\n    let artistsToFind = {};\r\n    let now = new Date();\r\n    let nowTime = now.getTime();\r\n    const MONTH = 2626560000;\r\n    for (let i = 0; i < payload.length; i++) {\r\n        let trackObject = payload[i].track;\r\n        for (let j = 0; j < trackObject.artists.length; j++) {\r\n            if (!(trackObject.artists[j].id in context.state.artists)) {\r\n                if (!(trackObject.artists[j].id in artistsToFind))\r\n                    artistsToFind[trackObject.artists[j].id] = {id: trackObject.artists[j].id, tracks: [trackObject.id]};\r\n                else {\r\n                    if (!(artistsToFind[trackObject.artists[j].id].tracks.includes(trackObject.id)))\r\n                        artistsToFind[trackObject.artists[j].id].tracks.push(trackObject.id);\r\n                }\r\n            }\r\n            else\r\n                context.commit('addTrackToArtist', {id: trackObject.artists[j].id, track: trackObject.id});\r\n        }\r\n        trackObject.artists = trackObject.artists.map(artist => artist.id);\r\n        trackObject.date = payload[i].added_at;\r\n        let addedDate = new Date(trackObject.date);\r\n        let addedDateTime = addedDate.getTime();\r\n        context.commit('addDateAddedTrack', Math.floor((nowTime - addedDateTime) / MONTH));\r\n        delete trackObject.album.album_type;\r\n        delete trackObject.album.artists;\r\n        delete trackObject.album.available_markets;\r\n        delete trackObject.album.available_markets;\r\n        trackObject.album.href = trackObject.album.external_urls.spotify;\r\n        delete trackObject.album.type;\r\n        delete trackObject.album.uri;\r\n        delete trackObject.available_markets;\r\n        delete trackObject.disc_number;\r\n        delete trackObject.external_ids;\r\n        trackObject.href = trackObject.external_urls.spotify;\r\n        delete trackObject.external_urls;\r\n        delete trackObject.type;\r\n        delete trackObject.uri;\r\n        if (trackObject.album.images.length > 1)\r\n            trackObject.image = trackObject.album.images[0].url;\r\n        ids.push(trackObject.id);\r\n        context.commit('pushTrack', {id: trackObject.id, value: trackObject});\r\n        context.commit('addProcessed');\r\n    }\r\n    await context.dispatch('findAndStoreArtists', artistsToFind);\r\n    return ids;\r\n};\r\n// Array {id: String, tracks: [String]}\r\nconst findAndStoreArtists = async (context, payload) => {\r\n    let ids = Object.values(payload).map(artist => artist.id);\r\n    let trackSets = Object.values(payload);\r\n    let artists = [];\r\n    while (ids.length > 0) {\r\n        let sectionIds = ids.splice(0, 50);\r\n        let newArtists = await context.dispatch('getArtists', sectionIds);\r\n        artists = artists.concat(newArtists);\r\n    }\r\n    for (let i = 0; i < artists.length; i++) {\r\n        let artistObject = artists[i];\r\n        for (let j = 0; j < trackSets.length; j++) {\r\n            if (artistObject.id == trackSets[j].id){\r\n                artistObject.tracks = trackSets[j].tracks;\r\n                trackSets.splice(j, 1);\r\n                break;\r\n            }\r\n        }\r\n        artistObject.href = artistObject.external_urls.spotify;\r\n        delete artistObject.external_urls;\r\n        artistObject.followers = artistObject.followers.total;\r\n        for (let j = 0; j < artistObject.genres.length; j++) {\r\n            if (!(artistObject.genres[j] in context.state.genres))  \r\n                await context.commit('pushGenre', {id: artistObject.genres[j], value: {name: artistObject.genres[j], artists: [artistObject.id], tracknum: 0}});\r\n            else \r\n                await context.commit('addArtistToGenre', {id: artistObject.genres[j], artist: artistObject.id});\r\n        }\r\n        delete artistObject.type;\r\n        delete artistObject.uri;\r\n        if (artistObject.images.length > 0)\r\n            artistObject.image = artistObject.images[0].url;\r\n        delete artistObject.images;\r\n        await context.commit('pushArtist', {id: artistObject.id, value: artistObject});\r\n    }\r\n};\r\n// Audio Features Array\r\nconst distributeTrackAudioFeatures = async (context, payload) => {\r\n    let keys = Object.keys(context.state.audioFeatures);\r\n    let values = {\r\n        acousticness: 0,\r\n        danceability: 0,\r\n        energy: 0,\r\n        instrumentalness: 0,\r\n        liveness: 0,\r\n        loudness: 0,\r\n        speechiness: 0,\r\n        valence: 0,\r\n        tempo: 0,\r\n        banger: 0,\r\n    };\r\n    for (let i = 0; i < payload.length; i++) {\r\n        for (let j = 0; j < keys.length; j++) {\r\n            values[keys[j]] += payload[i][keys[j]];\r\n            context.commit('plotAudioFeatureValue', {key: keys[j], value: payload[i][keys[j]]});\r\n        }\r\n        context.commit('addMode', payload[i].mode);\r\n        await context.commit('addTrackProperties', {id: payload[i].id, properties: {\r\n            danceability: payload[i].danceability,\r\n            energy: payload[i].energy,\r\n            key: payload[i].key,\r\n            loudness: payload[i].loudness,\r\n            mode: payload[i].mode,\r\n            speechiness: payload[i].speechiness,\r\n            acousticness: payload[i].acousticness,\r\n            instrumentalness: payload[i].instrumentalness,\r\n            liveness: payload[i].liveness,\r\n            valence: payload[i].valence,\r\n            tempo: payload[i].tempo,\r\n            duration_ms: payload[i].duration_ms,\r\n            time_signature: payload[i].time_signature,\r\n            banger: payload[i].banger,\r\n        }});\r\n    }\r\n    for (let i = 0; i < keys.length; i++) {\r\n        await context.commit('addAudioFeatureValue', {key: keys[i], value: values[keys[i]]});\r\n    }   \r\n};\r\nconst calcTracksPerGenre = async (context) => {\r\n    let artistIds = Object.keys(context.state.artists);\r\n    for (let i = 0; i < artistIds.length; i++) \r\n        for (let j = 0; j < context.state.artists[artistIds[i]].genres.length; j++) \r\n            if (\"tracks\" in context.state.artists[artistIds[i]])\r\n                if (context.state.artists[artistIds[i]].tracks.length > 0)\r\n                    await context.commit('addGenreTrackNum', {id: context.state.artists[artistIds[i]].genres[j], value: context.state.artists[artistIds[i]].tracks.length});\r\n    let genreTuples = Object.entries(context.state.genres);\r\n    let topGenres = genreTuples.sort(function(a,b) {\r\n        if (!(\"tracknum\" in a[1]) && !(\"tracknum\" in b[1]))\r\n            return 0;\r\n        if (!(\"tracknum\" in b[1]))\r\n            return 0 - a[1].tracknum;\r\n        if (!(\"tracknum\" in a[1]))\r\n            return b[1].tracknum;\r\n        return b[1].tracknum - a[1].tracknum\r\n    }).slice(0,50);\r\n    let topGenreIds = topGenres.map(genre => genre[0]);\r\n    context.commit('setTopSavedGenres', topGenreIds);\r\n    let artistTuples = Object.entries(context.state.artists);\r\n    let topArtists = artistTuples.sort(function(a,b) {\r\n        if (!(\"tracks\" in a[1]) && !(\"tracks\" in b[1]))\r\n            return 0;\r\n        if (!(\"tracks\" in b[1]))\r\n            return 0 - a[1].tracks.length;\r\n        if (!(\"tracks\" in a[1]))\r\n            return b[1].tracks.length;\r\n        return b[1].tracks.length - a[1].tracks.length\r\n    }).slice(0,50);\r\n    let topArtistIds = topArtists.map(artist => artist[0]);\r\n    context.commit('setTopSavedArtists', topArtistIds);\r\n    context.commit('setArtistsLoaded');\r\n    context.commit('setGenresLoaded');\r\n};\r\nconst calcExtremes = async (context) => {\r\n    let keys = Object.keys(context.state.audioFeatures);\r\n    let trackTuples = Object.entries(context.state.tracks);\r\n    let charts = [\"minchart\", \"maxchart\"];\r\n    let topTracks;\r\n    for (let i = 0; i < keys.length; i++) \r\n        for (let j = 0; j < charts.length; j++) {\r\n            if (charts[j] == \"minchart\")\r\n                topTracks = trackTuples.sort((a,b) => a[1][keys[i]] - b[1][keys[i]]).slice(0,25);\r\n            else\r\n                topTracks = trackTuples.sort((a,b) => b[1][keys[i]] - a[1][keys[i]]).slice(0,25);\r\n            let topTracksIds = topTracks.map(track => track[0]);\r\n            context.commit('setAudioFeatureChart', {key: keys[i], chart: [charts[j]], value: topTracksIds});\r\n        }\r\n    context.commit('setExtremesLoaded');\r\n};\r\nconst retrieveTopPlayed = async (context) => {\r\n    await context.dispatch('retrieveTopPlayedArtists');\r\n    await context.dispatch('retrieveTopPlayedTracks');\r\n};\r\nconst retrieveTopPlayedArtists = async (context) => {\r\n    let ranges = ['short_term', 'medium_term', 'long_term'];\r\n    for (let i = 0; i < ranges.length; i++) {\r\n        let artists = await context.dispatch('getTopArtists', {limit: 50, time_range: ranges[i], offset: 0});\r\n        let ids = [];\r\n        for (let j = 0; j < artists.length; j++) {\r\n            ids.push(artists[j].id);\r\n            if (!(artists[j].id in context.state.artists)) {\r\n                let artistObject = artists[j];\r\n                artistObject.href = artistObject.external_urls.spotify;\r\n                delete artistObject.external_urls;\r\n                artistObject.followers = artistObject.followers.total;\r\n                delete artistObject.type;\r\n                delete artistObject.uri;\r\n                artistObject.tracks = [];\r\n                context.commit('pushArtist', {id: artists[j].id, value: artistObject});\r\n            }\r\n        }\r\n        context.commit('setTopPlayedArtists', {index: i, value: ids});\r\n    }\r\n};\r\nconst retrieveTopPlayedTracks = async (context) => {\r\n    let ranges = ['short_term', 'medium_term', 'long_term'];\r\n    for (let i = 0; i < ranges.length; i++) {\r\n        let tracks = await context.dispatch('getTopTracks', {limit: 50, time_range: ranges[i], offset: 0});\r\n        let ids = [];\r\n        for (let j = 0; j < tracks.length; j++) {\r\n            ids.push(tracks[j].id);\r\n            if (!(tracks[j].id in context.state.tracks)) {\r\n                let trackObject = tracks[j];\r\n                delete trackObject.album.album_type;\r\n                delete trackObject.album.artists;\r\n                delete trackObject.album.available_markets;\r\n                delete trackObject.album.available_markets;\r\n                trackObject.album.href = trackObject.album.external_urls.spotify;\r\n                delete trackObject.album.type;\r\n                delete trackObject.album.uri;\r\n                delete trackObject.available_markets;\r\n                delete trackObject.disc_number;\r\n                delete trackObject.external_ids;\r\n                trackObject.href = trackObject.external_urls.spotify;\r\n                delete trackObject.external_urls;\r\n                delete trackObject.type;\r\n                delete trackObject.uri;\r\n                context.commit('pushTrack', {id: tracks[j].id, value: trackObject});\r\n            }\r\n        }\r\n        context.commit('setTopPlayedTracks', {index: i, value: ids});\r\n    }\r\n};\r\n////////////////////////////////////////////////////////////////\r\n// AUDIO FEATURES //////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\n// {tempo: Number, energy: Number, danceability: Number}\r\nconst bangerCalc = async (context, payload) => {\r\n    return ((payload.tempo - 96 + (payload.energy * 100) + (payload.danceability*50)) / 210);\r\n}\r\n////////////////////////////////////////////////////////////////\r\n// SAVE LIBRARY ////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\n// {name: String, privacy: Boolean, include: Object}\r\n// INCLUDE ITEM               KEY                        PUBLIC REQ\r\n// Numerical Data: True.      numerical_data             True\r\n// Most Saved Artists:        most_saved_artists         \r\n// Audio Features: True.      audio_features             True\r\n// Top Saved Genres:          most_saved_genres\r\n// Numerical Features:        numerical_features\r\n// Probability Features:      probability_features\r\n// Date Added Timeline:       added_timeline\r\n// Happiness Distribution:    happiness_distribution\r\n// Energy Distribution:       energy_distribution\r\n// Danceability Distribution: danceability_distribution\r\n// Banger Distribution:       banger_distribution\r\n// Happiness Timeline         happiness_timeline\r\n// Top 30 Songs:              most_played_tracks          True\r\n// Top 30 Artists:            most_played_artists         True\r\n// Extremes Top 10:           extremes\r\n\r\nconst saveLibrary = async (context, payload) => {\r\n    if (!payload.private && !payload.include.numerical_data && !payload.include.audio_features && !payload.include.most_played_tracks && !payload.include.most_played_artists)\r\n        return null;\r\n    let data = {};\r\n    data.include = payload.include;\r\n    data.name = payload.name;\r\n    data.private = payload.private;\r\n    data.tracks = await context.dispatch('convertTracks', payload.include);\r\n    data.artists = await context.dispatch('convertArtists', payload.include);\r\n    data.genres = await context.dispatch('convertGenres', payload.include);\r\n    if (payload.include.numerical_data)\r\n        data.numerical_data = {total: context.state.progress.total, artists: (Object.keys(context.state.artists)).length, genres: (Object.keys(context.state.genres)).length};\r\n    if (payload.include.most_saved_artists || payload.include.most_saved_genres) {\r\n        data.topSaved = {};\r\n        if (payload.include.most_saved_artists)\r\n            data.topSaved.artists = context.state.topSaved.artists.slice(0, 20);\r\n        if (payload.include.most_saved_genres)\r\n            data.topSaved.genres = context.state.topSaved.genres.slice(0, 20);\r\n    }\r\n    if (payload.include.most_played_tracks || payload.include.most_played_artists) {\r\n        data.topPlayed = {};\r\n        if (payload.include.most_played_tracks) \r\n            data.topPlayed.tracks = [];\r\n            data.topPlayed.tracks[0] = context.state.topPlayed.tracks[0].slice(0, 20);\r\n            data.topPlayed.tracks[1] = context.state.topPlayed.tracks[1].slice(0, 20);\r\n            data.topPlayed.tracks[2] = context.state.topPlayed.tracks[2].slice(0, 20);\r\n        if (payload.include.most_played_artists) \r\n            data.topPlayed.artists = [];\r\n            data.topPlayed.artists[0] = context.state.topPlayed.artists[0].slice(0, 20);\r\n            data.topPlayed.artists[1] = context.state.topPlayed.artists[1].slice(0, 20);\r\n            data.topPlayed.artists[2] = context.state.topPlayed.artists[2].slice(0, 20);\r\n    }\r\n    if (payload.include.audio_features || payload.include.numerical_features || payload.include.extremes || payload.include.probability_features) {\r\n        data.audioFeatures = {\r\n            acousticness: {},\r\n            danceability: {},\r\n            energy: {},\r\n            instrumentalness: {},\r\n            liveness: {},\r\n            loudness: {},\r\n            speechiness: {},\r\n            tempo: {},\r\n            valence: {},\r\n            banger: {},\r\n        };\r\n        if (payload.include.audio_features) {\r\n            data.audioFeatures.valence.value = context.state.audioFeatures.valence.value;\r\n            data.audioFeatures.energy.value = context.state.audioFeatures.energy.value;\r\n            data.audioFeatures.danceability.value = context.state.audioFeatures.danceability.value;\r\n        }\r\n        if (payload.include.numerical_features) {\r\n            data.audioFeatures.tempo.value = context.state.audioFeatures.tempo.value;\r\n            data.audioFeatures.loudness.value = context.state.audioFeatures.loudness.value;\r\n            data.mode = context.state.mode.value;\r\n        }\r\n        if (payload.include.probability_features) {\r\n            data.audioFeatures.acousticness.value = context.state.audioFeatures.acousticness.value;\r\n            data.audioFeatures.instrumentalness.value = context.state.audioFeatures.instrumentalness.value;\r\n            data.audioFeatures.liveness.value = context.state.audioFeatures.liveness.value;\r\n            data.audioFeatures.speechiness.value = context.state.audioFeatures.speechiness.value;\r\n        }\r\n        if (payload.include.extremes) {\r\n            let keys = Object.keys(data.audioFeatures);\r\n            let charts = [\"minchart\", \"maxchart\"]\r\n            for (let i = 0; i < keys.length; i++) {\r\n                for (let j = 0; j < charts.length; j++) {\r\n                    data.audioFeatures[keys[i]][charts[j]] = context.state.audioFeatures[keys[i]][charts[j]].slice(0, 10);\r\n                }\r\n            }\r\n        }\r\n        if (payload.include.happiness_distribution) {\r\n            data.audioFeatures.valence.plot = context.state.audioFeatures.valence.plot;\r\n        }\r\n        if (payload.include.energy_distribution) {\r\n            data.audioFeatures.energy.plot = context.state.audioFeatures.energy.plot;\r\n        }\r\n        if (payload.include.danceability_distribution) {\r\n            data.audioFeatures.danceability.plot = context.state.audioFeatures.danceability.plot;\r\n        }\r\n        if (payload.include.banger_distribution) {\r\n            data.audioFeatures.banger.plot = context.state.audioFeatures.banger.plot;\r\n        }\r\n    }\r\n    if (payload.include.added_timeline) \r\n        data.dateAdded = context.state.dateAdded;\r\n    if (payload.include.happiness_timeline) {\r\n        data.happinessTimeline = context.state.audioFeatures.valence.timeline;\r\n    }\r\n    return data;\r\n};\r\n// Include Object\r\nconst convertTracks = async (context, payload) => {\r\n    let reqTracks = {};\r\n    let addTracks = [];\r\n    if (payload.most_played_tracks)\r\n        addTracks = addTracks.concat(await context.dispatch('gatherMostPlayedTracks'));\r\n    if (payload.extremes) \r\n        addTracks = addTracks.concat(await context.dispatch('gatherExtremes'));\r\n    let nonRepeatedTracks = {};\r\n    for (let i = 0; i < addTracks.length; i++) {\r\n        if (!(addTracks[i] in nonRepeatedTracks))\r\n            nonRepeatedTracks[addTracks[i]] = 0;\r\n        else {\r\n            nonRepeatedTracks[addTracks[i]] += 1;\r\n        }\r\n    }\r\n    let ids = Object.keys(nonRepeatedTracks);\r\n    for (let i = 0; i < ids.length; i++) {\r\n        reqTracks[ids[i]] = await context.dispatch(\"compressTrack\", context.state.tracks[ids[i]]);\r\n    }\r\n    return reqTracks;\r\n};\r\n// Nothing\r\nconst gatherMostPlayedTracks = async (context) => {\r\n    let ids = [];\r\n    for (let i = 0; i < context.state.topPlayed.tracks.length; i++) {\r\n        for (let j = 0; (j < context.state.topPlayed.tracks[i].length && j < 20); j++) {\r\n            ids.push(context.state.topPlayed.tracks[i][j]);\r\n        }\r\n    }\r\n    return ids;\r\n}\r\n// Nothing\r\nconst gatherExtremes = async (context) => {\r\n    let keys = Object.keys(context.state.audioFeatures);\r\n    let charts = [\"minchart\", \"maxchart\"];\r\n    let ids = [];\r\n    for (let i = 0; i < keys.length; i++) {\r\n        for (let j = 0; j < charts.length; j++) {\r\n            for (let k = 0; k < (context.state.audioFeatures[keys[i]][charts[j]].length) && k < 10; k++) {\r\n                ids.push(context.state.audioFeatures[keys[i]][charts[j]][k]);\r\n            }\r\n        }\r\n    }\r\n    return ids;\r\n}\r\n// Track object\r\nconst compressTrack = async (context, payload) => {\r\n    let newArtists = [];\r\n    for (let i = 0; i < payload.artists.length; i++) {\r\n        if (typeof(payload.artists[i]) == 'object')\r\n            newArtists.push({id: payload.artists[i], name: payload.artists[i].name});\r\n        else \r\n            newArtists.push({id: payload.artists[i], name: context.state.artists[payload.artists[i]].name});\r\n    }\r\n    return {id: payload.id, name: payload.name, image: payload.album.images[0].url, artists: newArtists};\r\n};\r\n// None\r\nconst convertArtists = async (context, payload) => {\r\n    let reqArtists = {};\r\n    let addArtists = [];\r\n    if (payload.most_played_artists)\r\n        addArtists = addArtists.concat(await context.dispatch('gatherMostPlayedArtists'));\r\n    if (payload.most_saved_artists) \r\n        addArtists = addArtists.concat(await context.dispatch('gatherMostSavedArtists'));\r\n    let nonRepeatedArtists = {};\r\n    for (let i = 0; i < addArtists.length; i++) {\r\n        if (!(addArtists[i] in nonRepeatedArtists))\r\n            nonRepeatedArtists[addArtists[i]] = 1;\r\n        else {\r\n            nonRepeatedArtists[addArtists[i]] += 1;\r\n        }\r\n    }\r\n    let ids = Object.keys(nonRepeatedArtists);\r\n    for (let i = 0; i < ids.length; i++) {\r\n        reqArtists[ids[i]] = await context.dispatch(\"compressArtist\", context.state.artists[ids[i]]);\r\n    }\r\n    return reqArtists;\r\n};\r\n// Nothing\r\nconst gatherMostPlayedArtists = async (context) => {\r\n    let ids = [];\r\n    for (let i = 0; i < context.state.topPlayed.artists.length; i++) {\r\n        for (let j = 0; (j < context.state.topPlayed.artists[i].length && j < 20); j++) {\r\n            ids.push(context.state.topPlayed.artists[i][j]);\r\n        }\r\n    }\r\n    return ids;\r\n};\r\n// Nothing\r\nconst gatherMostSavedArtists = async (context) => {\r\n    let ids = [];\r\n    for (let i = 0; i < context.state.topSaved.artists.length; i++) {\r\n        ids.push(context.state.topSaved.artists[i]);\r\n    }\r\n    return ids;\r\n};\r\n// Track object\r\nconst compressArtist = async (context, payload) => {\r\n    return {id: payload.id, name: payload.name, image: payload.image, genres: payload.genres, tracks: payload.tracks};\r\n};\r\n// Include Object\r\nconst convertGenres = async (context, payload) => {\r\n    let reqGenres = {};\r\n    if (payload.most_saved_genres) {\r\n        for (let i = 0; (i < context.state.topSaved.genres.length && i < 20); i++) {\r\n            reqGenres[context.state.topSaved.genres[i]] = context.state.genres[context.state.topSaved.genres[i]];\r\n        }\r\n    }\r\n    return reqGenres;\r\n};\r\n\r\n////////////////////////////////////////////////////////////////\r\n// ANALYSIS ////////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\n/*\r\n    album: {album_type: \"album\", artists: Array(1), available_markets: Array(78), external_urls: {}, href: \"https://api.spotify.com/v1/albums/5MmMomspau1V5YpXjHYJRy\", }\r\n    artists: [{}]\r\n    available_markets: (78) [\"AD\", \"AE\", \"AR\", \"AT\", \"AU\", \"BE\", \"BG\", \"BH\", \"BO\", \"BR\", \"CA\", \"CH\", \"CL\", \"CO\", \"CR\", \"CY\", \"CZ\", \"DE\", \"DK\", \"DO\", \"DZ\", \"EC\", \"EE\", \"EG\", \"ES\", \"FI\", \"FR\", \"GB\", \"GR\", \"GT\", \"HK\", \"HN\", \"HU\", \"ID\", \"IE\", \"IL\", \"IN\", \"IS\", \"IT\", \"JO\", \"KW\", \"LB\", \"LI\", \"LT\", \"LU\", \"LV\", \"MA\", \"MC\", \"MT\", \"MX\", \"MY\", \"NI\", \"NL\", \"NO\", \"NZ\", \"OM\", \"PA\", \"PE\", \"PH\", \"PL\", \"PS\", \"PT\", \"PY\", \"QA\", \"RO\", \"SA\", \"SE\", \"SG\", \"SK\", \"SV\", \"TH\", \"TN\", \"TR\", \"TW\", \"US\", \"UY\", \"VN\", \"ZA\"]\r\n    disc_number: 1\r\n    duration_ms: 296899\r\n    explicit: false\r\n    external_ids: {isrc: \"GBCFB1200106\"}\r\n    external_urls: {spotify: \"https://open.spotify.com/track/74Csq5DMaOBShLUhI6NU5A\"}\r\n    href: \"https://api.spotify.com/v1/tracks/74Csq5DMaOBShLUhI6NU5A\"\r\n    id: \"74Csq5DMaOBShLUhI6NU5A\"\r\n    is_local: false\r\n    name: \"Curse Me Good\"\r\n    popularity: 50\r\n    preview_url: \"https://p.scdn.co/mp3-preview/ea8af91eefd28faf2ab5c73b6dc5a596bf0d5b9b?cid=42903eeb2bf943c4bd4903370f7a93f5\"\r\n    track_number: 2\r\n    type: \"track\"\r\n    uri: \"spotify:track:74\r\n\r\n\r\n    acousticness: 0.0105\r\n    album: {external_urls: {}, href: \"https://open.spotify.com/album/5MmMomspau1V5YpXjHYJRy\", id: \"5MmMomspau1V5YpXjHYJRy\", images: Array(3), name: \"The Glorious Dead\", }\r\n    artists: [\"0bZCak2tcRMY1dzEIuwF42\"]\r\n    banger: 0.6849999999999999\r\n    danceability: 0.809\r\n    date: \"2018-09-23T23:34:33Z\"\r\n    duration_ms: 296900\r\n    energy: 0.814\r\n    explicit: false\r\n    href: \"https://open.spotify.com/track/74Csq5DMaOBShLUhI6NU5A\"\r\n    id: \"74Csq5DMaOBShLUhI6NU5A\"\r\n    instrumentalness: 0.0000248\r\n    is_local: false\r\n    key: 6\r\n    liveness: 0.099\r\n    loudness: -6.829\r\n    mode: 0\r\n    name: \"Curse Me Good\"\r\n    popularity: 50\r\n    preview_url: \"https://p.scdn.co/mp3-preview/ea8af91eefd28faf2ab5c73b6dc5a596bf0d5b9b?cid=42903eeb2bf943c4bd4903370f7a93f5\"\r\n    speechiness: 0.0338\r\n    tempo: 118\r\n    time_signature: 4\r\n    track_number: 2\r\n    valence: 0.804\r\n*/\r\nconst songAnalysis = async (context, id) => {\r\n    let trackData;\r\n    trackData = await context.dispatch('getTrack', id);\r\n    trackData = await context.dispatch('songAnalysisFeatures', {trackData: trackData, id: id});\r\n    trackData.audioAnalysis = await context.dispatch('cleanAudioAnalysis', {id: id});\r\n    return trackData;\r\n};\r\n// {id: String}\r\nconst songAnalysisFeatures = async (context, payload) => {\r\n    let song = payload.trackData;\r\n    let audioFeatures = await context.dispatch('getAudioFeaturesForTrack', payload.id);\r\n    song.acousticness = audioFeatures.acousticness;\r\n    song.danceability = audioFeatures.danceability;\r\n    song.energy = audioFeatures.energy;\r\n    song.instrumentalness = audioFeatures.instrumentalness;\r\n    song.key = audioFeatures.key;\r\n    song.liveness = audioFeatures.liveness;\r\n    song.loudness = audioFeatures.loudness;\r\n    song.mode = audioFeatures.mode;\r\n    song.speechiness = audioFeatures.speechiness;\r\n    song.tempo = audioFeatures.tempo;\r\n    song.valence = audioFeatures.valence;\r\n    return song;\r\n};\r\nconst cleanAudioAnalysis = async (context, payload) => {\r\n    let audioAnalysisSegments = 80;\r\n    let audioAnalysis = await context.dispatch('getAudioAnalysisForTrack', payload.id);\r\n    let newSegments = [];\r\n    if (audioAnalysis.segments.length < audioAnalysisSegments)\r\n        audioAnalysisSegments = audioAnalysis.segments.length;\r\n    let width = Math.round(audioAnalysis.segments.length / audioAnalysisSegments);\r\n    \r\n    for (var i = 0; i < audioAnalysisSegments; i++)\r\n    {\r\n        let itemIndex = Math.round(width * i);\r\n        if (itemIndex > audioAnalysis.segments.length - 1)\r\n        {\r\n            itemIndex = audioAnalysis.segments.length - 2;\r\n        }\r\n        let sum = 0;\r\n        for (var j = 0; j < audioAnalysis.segments[itemIndex].pitches.length; j++)\r\n        {\r\n            sum += audioAnalysis.segments[itemIndex].pitches[j];\r\n        }\r\n        let averagePitch = sum / audioAnalysis.segments[itemIndex].pitches.length; \r\n        let color = await context.dispatch('HSVtoRGB', {hue: (((1 - averagePitch) * 229 + -50) / 360), saturation: 0.51, value: 0.89});\r\n        let loudness = (Math.round(((audioAnalysis.segments[itemIndex].loudness_max / 60) + 1) * 100) / 100);\r\n\r\n        newSegments.push({\r\n            start: Math.round(audioAnalysis.segments[itemIndex].start),\r\n            loudness_max: loudness, \r\n            red: color.r,\r\n            green: color.g,\r\n            blue: color.b,\r\n        });\r\n    }\r\n    audioAnalysis.segments = null;\r\n    return newSegments\r\n};\r\nconst getPercentiles = async (context, payload) => {\r\n    let ids = Object.keys(context.state.tracks);\r\n    let keys = Object.keys(payload);\r\n    let response = {valence: 0, danceability: 0, energy: 0, banger: 0};\r\n    for (let i = 0; i < keys.length; i++) {\r\n        let lower = 0;\r\n        for (let j = 0; j < ids.length; j++) {\r\n            if (context.state.tracks[ids[j]][keys[i]] <= payload[keys[i]]) {\r\n                lower += 1;\r\n            }\r\n        }\r\n        response[keys[i]] = lower / context.state.progress.total;\r\n    }\r\n    return response;\r\n};\r\n//{h, s, v}\r\nconst HSVtoRGB = async (context, payload) => {\r\n    var r, g, b, i, f, p, q, t;\r\n    i = Math.floor(payload.hue * 6);\r\n    f = payload.hue * 6 - i;\r\n    p = payload.value * (1 - payload.saturation);\r\n    q = payload.value * (1 - f * payload.saturation);\r\n    t = payload.value * (1 - (1 - f) * payload.saturation);\r\n    switch (i % 6) {\r\n        case 0: r = payload.value, g = t, b = p; break;\r\n        case 1: r = q, g = payload.value, b = p; break;\r\n        case 2: r = p, g = payload.value, b = t; break;\r\n        case 3: r = p, g = q, b = payload.value; break;\r\n        case 4: r = t, g = p, b = payload.value; break;\r\n        case 5: r = payload.value, g = p, b = q; break;\r\n    }\r\n    return {\r\n        r: Math.round(r * 255),\r\n        g: Math.round(g * 255),\r\n        b: Math.round(b * 255)\r\n    };\r\n};\r\nconst artistAnalysis = async (context, payload) => {\r\n    let artist = await context.dispatch(\"getArtist\", payload);\r\n    let artistObject = await context.dispatch(\"processArtist\", artist);\r\n    return artistObject;\r\n};\r\nconst processArtist = async (context, payload) => {\r\n    payload.href = payload.external_urls.spotify;\r\n    delete payload.external_urls;\r\n    payload.followers = payload.followers.total;\r\n    payload.image = payload.images[0].url;\r\n    delete payload.images;\r\n    return payload;\r\n};\r\nconst artistTracks = async (context, payload) => {\r\n    if (!(payload.id in context.state.artists))\r\n        return [];\r\n    let ids = context.state.artists[payload.id].tracks;\r\n    let tracks = [];\r\n    for (let i = 0; i < ids.length; i++) {\r\n        tracks.push(context.state.tracks[ids[i]]);\r\n    }\r\n    return tracks;\r\n};\r\nconst artistTimeline = async (context, payload) => {\r\n    if (!(payload.id in context.state.artists))\r\n        return {timeline: [], oldest: [], newest: []};\r\n    let artistObject = payload;\r\n    let timeline = [];\r\n    let tracks = [];\r\n    let now = new Date();\r\n    let nowTime = now.getTime();\r\n    const MONTH = 2626560000;\r\n    let artistSaved = context.state.artists[artistObject.id];\r\n    for (let i = 0; i < artistSaved.tracks.length; i++) {\r\n        let date = new Date(context.state.tracks[artistSaved.tracks[i]].date);\r\n        let dateTime = date.getTime();\r\n        let diff = nowTime - dateTime;\r\n        let diffMonth = Math.floor(diff / MONTH);\r\n        tracks.push({id: artistSaved.tracks[i], time: dateTime, month: diffMonth});\r\n        if (diffMonth >= timeline.length) {\r\n            while (diffMonth >= timeline.length) {\r\n                timeline.push(0);\r\n            }\r\n        }\r\n        timeline[diffMonth] += 1;\r\n    }\r\n    tracks.sort((a, b) => (a.time > b.time) ? 1 : -1);\r\n    let oldest = tracks.slice(0, 3);\r\n    let newest = tracks.slice(tracks.length - 3, tracks.length);\r\n    while (timeline.length < context.state.dateAdded.length) {\r\n        timeline.push(0);\r\n    }\r\n    return {timeline: timeline, oldest: oldest, newest: newest};\r\n};\r\nconst artistTopTracks = async (context, id) => {\r\n    let tracks = await context.dispatch('getArtistTopTracks', id);\r\n    let ids = [];\r\n    for (let i = 0; i < tracks.length; i++) {\r\n        delete tracks[i].album.album_type;\r\n        delete tracks[i].album.artists;\r\n        delete tracks[i].album.available_markets;\r\n        delete tracks[i].album.available_markets;\r\n        tracks[i].album.href = tracks[i].album.external_urls.spotify;\r\n        delete tracks[i].album.type;\r\n        delete tracks[i].album.uri;\r\n        delete tracks[i].available_markets;\r\n        delete tracks[i].disc_number;\r\n        delete tracks[i].external_ids;\r\n        tracks[i].href = tracks[i].external_urls.spotify;\r\n        delete tracks[i].external_urls;\r\n        delete tracks[i].type;\r\n        delete tracks[i].uri;\r\n        if (tracks[i].album.images.length > 1)\r\n            tracks[i].image = tracks[i].album.images[0].url;\r\n        ids.push(tracks[i].id);\r\n    }\r\n    let audioFeatures = await context.dispatch('getAudioFeaturesForTracks', ids);\r\n\r\n    for (let i = 0; i < tracks.length; i++) {\r\n        tracks[i].valence = audioFeatures[i].valence;\r\n        tracks[i].energy = audioFeatures[i].energy;\r\n        tracks[i].danceability = audioFeatures[i].danceability;\r\n    }\r\n\r\n    return tracks;\r\n};\r\n////////////////////////////////////////////////////////////////\r\n// SOCIAL //////////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\n\r\n////////////////////////////////////////////////////////////////\r\n// API CALLS ///////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////\r\n// {limit: Number 1-50, time_range: \"long_term\" Several years, \"medium_term\" 6 Months, \"short_term\" 4 Weeks, offset: Index of first entry to return}\r\nconst getTopArtists = async (context, payload) => {\r\n    try { \r\n        let response = await context.state.spotifyApi.getMyTopArtists({limit: payload.limit, time_range: payload.time_range});\r\n        return response.items;\r\n    } catch (error) {\r\n        return;\r\n    } \r\n};\r\n// {limit: Number 1-50, time_range: \"long_term\" Several years, \"medium_term\" 6 Months, \"short_term\" 4 Weeks, offset: Index of first entry to return}\r\nconst getTopTracks = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getMyTopTracks({limit: payload.limit, time_range: payload.time_range});\r\n        return response.items;\r\n    } catch (error) {\r\n        return;\r\n    }  \r\n};\r\n// {limit: Number 1-50, after: Unix timestamp Milliseconds, before: Unix timestamp Milliseconds\r\nconst getRecentlyPlayed = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getMyRecentlyPlayedTracks({limit: payload.limit});\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\nconst getTrack = async (context, track_id) => {\r\n  try {\r\n      let response = await context.state.spotifyApi.getTrack(track_id);\r\n      return response;\r\n  } catch (error) {\r\n      return;\r\n  }\r\n};\r\nconst getTracks = async (context, track_ids) => {\r\n  try {\r\n      let response = await context.state.spotifyApi.getTracks(track_ids);\r\n      return response;\r\n  } catch (error) {\r\n      return;\r\n  }\r\n};\r\n// {artistId: String}\r\nconst getArtist = async (context, id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getArtist(id);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n}; \r\n// []\r\nconst getArtists = async (context, ids) => {\r\n  try {\r\n      let response = await context.state.spotifyApi.getArtists(ids);\r\n      return response.artists;\r\n  } catch (error) {\r\n      return;\r\n  }\r\n};\r\n// Array IDs\r\nconst getAudioFeaturesForTracks = async (context, track_ids) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getAudioFeaturesForTracks(track_ids);\r\n        return response.audio_features;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\nconst getAudioFeaturesForTrack = async (context, track_id) => {\r\n  try {\r\n      let response = await context.state.spotifyApi.getAudioFeaturesForTracks([track_id]);\r\n      return response.audio_features[0];\r\n  } catch (error) {\r\n      return;\r\n  }\r\n};\r\nconst getAudioAnalysisForTrack = async (context, track_id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getAudioAnalysisForTrack(track_id);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// {seed_tracks: [track_id], target_dancebility: NUM, limit: 6, max_* min_*}\r\nconst getRecomendations = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getRecommendations(payload);\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// {limit: 1-50, offset: first index}\r\nconst getSavedTracks = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getMySavedTracks({limit: payload.limit, offset: payload.offset});\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// None\r\nconst getUser = async (context) => {\r\n    try {\r\n      if (context.state.inicialized)\r\n      {\r\n        let response = await context.state.spotifyApi.getMe();\r\n        await context.commit('setUserData', response);\r\n      }\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n// Array IDs\r\nconst searchSpotify = async (context, payload) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.search(payload.query, ['track'], {limit: 25});\r\n        return response;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n\r\nconst getArtistTopTracks = async (context, id) => {\r\n    try {\r\n        let response = await context.state.spotifyApi.getArtistTopTracks(id, \"US\", {});\r\n        return response.tracks;\r\n    } catch (error) {\r\n        return;\r\n    }\r\n};\r\n\r\n  \r\nexport default {\r\n    inicializeGetToken,\r\n    inicializeParseToken,\r\n    inicializeSetToken,\r\n\r\n    loadLibrary,\r\n    retrieveSavedTracks,\r\n    processTracks,\r\n    inicialScanReduceIds,\r\n    findAndStoreArtists,\r\n    distributeTrackAudioFeatures,\r\n    calcTracksPerGenre,\r\n    calcExtremes,\r\n    retrieveTopPlayed,\r\n    retrieveTopPlayedArtists,\r\n    retrieveTopPlayedTracks,\r\n\r\n    saveLibrary,\r\n    convertTracks,\r\n    gatherMostPlayedTracks,\r\n    gatherExtremes,\r\n    compressTrack,\r\n    convertArtists,\r\n    gatherMostPlayedArtists,\r\n    gatherMostSavedArtists,\r\n    compressArtist,\r\n    convertGenres,\r\n\r\n    songAnalysis,\r\n    songAnalysisFeatures,\r\n    cleanAudioAnalysis,\r\n    getPercentiles,\r\n    HSVtoRGB,\r\n\r\n    artistAnalysis,\r\n    processArtist,\r\n    artistTracks,\r\n    artistTimeline,\r\n    artistTopTracks,\r\n\r\n    bangerCalc,\r\n\r\n    getTopArtists,\r\n    getTopTracks,\r\n    getRecentlyPlayed,\r\n    getTrack,\r\n    getTracks,\r\n    getArtist,\r\n    getArtists,\r\n    getAudioFeaturesForTracks,\r\n    getAudioFeaturesForTrack,\r\n    getAudioAnalysisForTrack,\r\n    getRecomendations,\r\n    getSavedTracks,\r\n    getUser,\r\n    getArtistTopTracks,\r\n    searchSpotify\r\n};"]}]}